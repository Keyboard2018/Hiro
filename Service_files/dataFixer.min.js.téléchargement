define("dataFixer/plugins/verticalMenuFixer",["lodash","coreUtils","skinExports"],function(e,t,n){"use strict";var a=!1,i={},r={},o=[];function s(t,n){return"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"===n.componentType&&!function(t,n){var a=l(t,n);return!e.isUndefined(a.menuItemHeight)}(t,n)}function l(e,t){return e.data.component_properties[t.propertyQuery.replace("#","")]}function u(a,o){var s,u,c,d,f=(s=a,u=o,s.data.document_data[u.dataQuery.replace("#","")]),p=e.get(f,"menuRef","").replace("#",""),m=r[p],g=(c=a,d=o,c.data.theme_data[d.styleId]||i[d.styleId]);if(g){var b=parseInt(g.style.properties.sepw||g.style.properties.separatorHeight||0,10),F=n[g.skin];!function(e,n,a){var i=l(e,n);a?i.menuItemHeight=a:t.log.error("cannot find menu items")}(a,o,t.verticalMenuCalculations.getItemHeight(o.layout.height,b,m,F))}else t.log.error("cannot find style")}function c(t,n){e.forEach(n,function(e){s(t,e)&&u(t,e),e.components&&c(t,e.components)})}function d(e){var t=e.structure;t&&(t.components&&c(e,t.components),t.mobileComponents&&c(e,t.mobileComponents),t.children&&c(e,t.children))}return{exec:function(t){if(t.data.theme_data.THEME_DATA)for(i=t.data.theme_data,function(t){var n=t.data.document_data,a=n.CUSTOM_MENUS&&n.CUSTOM_MENUS.menus||[];e.forEach(a,function(t){var a=t.replace("#",""),i=n[a]&&n[a].items||[],o=e.filter(i,function(e){return n[e.replace("#","")].isVisible}).length;r[a]=o||1})}(t),d(t),a=!0;o.length>0;)d(o.pop());else{a?d(t):o.push(t)}}}}),define("dataFixer/plugins/boxSlideShowDataFixer",["lodash","coreUtils"],function(e,t){"use strict";var n="BOXSLIDESHOW_Regular_Slideshow_Slides_New_Slide_Label";return{exec:function(a,i,r,o,s,l,u){var c=a.data.document_data;if("Template"===e.get(u,"siteInfo.documentType")){!function(a,i){if(e.includes(t.languages,i)){var r=t.translationsLoader.getTranslationAllKeys("boxSlideShow",i,{},{useOldTranslations:!0});r&&e.forOwn(a,function(e){if("boxSlideShowSlide"===e.type||"StripContainerSlideShowSlide"===e.type){var t=e.title?e.title.split(" ")[1]:"";e.title=r[n]&&t?r[n].replace("<%= curr_slide %>",t):e.title}})}}(c,r?t.wixUserApi.getLanguage(r.cookie,o,r.language):"en")}}}}),define("dataFixer/plugins/contactFormDataFixer",["lodash","coreUtils"],function(e,t){"use strict";var n=["addressFieldLabel","emailFieldLabel","errorMessage","messageFieldLabel","nameFieldLabel","phoneFieldLabel","subjectFieldLabel","submitButtonLabel","successMessage","validationErrorMessage"];return{exec:function(a,i,r,o,s,l,u){var c=a.data.document_data;if("Template"===e.get(u,"siteInfo.documentType")){!function(a,i){if(e.includes(t.languages,i)){var r=t.translationsLoader.getTranslationAllKeys("contactFormTranslations",i,{},{useOldTranslations:!0});r&&e.forOwn(a,function(t){"ContactForm"===t.type&&e.forEach(n,function(e){t[e]=r[e]||t[e]})})}}(c,t.wixUserApi.getLanguage(r.cookie,o,r.language)),d=c,e.forOwn(d,function(e){"ContactForm"===e.type&&(e.onSubmitBehavior||(e.onSubmitBehavior="message"))});var d}}}}),define("dataFixer/plugins/subscribeFormDataFixer",["lodash","coreUtils"],function(e,t){"use strict";var n=["emailFieldLabel","errorMessage","firstNameFieldLabel","lastNameFieldLabel","phoneFieldLabel","submitButtonLabel","subscribeFormTitle","successMessage","validationErrorMessage"];return{exec:function(a,i,r,o,s,l,u){var c=a.data.document_data;if(d=u,"Template"===e.get(d,"siteInfo.documentType")){var d;!function(a,i){if(e.includes(t.languages,i)){var r=t.translationsLoader.getTranslationAllKeys("subscribeFormTranslations",i,{},{useOldTranslations:!0});r&&e.forOwn(a,function(t){"SubscribeForm"===t.type&&e.forEach(n,function(e){t[e]=r[e]||t[e]})})}}(c,t.wixUserApi.getLanguage(r.cookie,o,r.language)),f=c,e.forOwn(f,function(e){"SubscribeForm"===e.type&&(e.onSubmitBehavior||(e.onSubmitBehavior="message"))});var f}}}}),define("dataFixer",["lodash","experiment","santa-data-fixer","dataFixer/plugins/verticalMenuFixer","dataFixer/plugins/boxSlideShowDataFixer","dataFixer/plugins/contactFormDataFixer","dataFixer/plugins/subscribeFormDataFixer"],function(e,t,n,a,i,r,o){"use strict";return e.assign({},n,{fix:function(s,l,u,c,d,f,p){var m=e(e.get(p,"runningExperiments",{})).pickBy(function(e,n){return t.isOpen(n,{rendererModel:p})}).keys().value(),g=e.get(p,"clientSpecMap"),b=e.get(p,"siteMetaData.quickActions.configuration.quickActionsMenuEnabled",!1);return s=n.fix({pageJson:s,clientSpecMap:g,urlFormatModel:d,quickActionsMenuEnabled:b,isViewerMode:f,experiments:m,pageIdsArray:l}),e.forEach([a,i,r,o],function(e){return e.exec(s,l,u,c,d,f,p)}),s}})});
//# sourceMappingURL=dataFixer.min.js.map
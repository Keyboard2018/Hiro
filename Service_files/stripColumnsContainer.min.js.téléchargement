define("stripColumnsContainer",["react","lodash","core","santaProps","components","backgroundCommon"],function(i,t,e,r,n,o){"use strict";var s=e.compMixins,p={displayName:"StripColumnsContainer",mixins:[n.mediaCommon.mediaLogicMixins.fill,s.skinBasedComp,o.mixins.backgroundDetectionMixin,s.createChildComponentMixin],propTypes:{style:r.Types.Component.style.isRequired,isMeshLayoutMechanism:r.Types.Layout.isMeshLayoutMechanism,compProp:r.Types.Component.compProp,isMobileView:r.Types.isMobileView.isRequired,siteWidth:r.Types.siteWidth.isRequired,getScreenWidth:r.Types.getScreenWidth.isRequired,getScrollBarWidth:r.Types.getScrollBarWidth.isRequired,browser:r.Types.Browser.browser.isRequired,childrenData:r.Types.ColumnsContainer.childrenData.isRequired},statics:{useSantaTypes:!0,compSpecificIsDomOnly:function(i,e){var r=t.omitBy(e,function(e,r){return i[r]===e||t.isEqual(i[r],e)}),n=t.pick(r,["style","childrenData"]);if(0===t.size(r)||t.size(r)>t.size(n))return!1;return function(){return!t.has(n,"style")||(r=i.style,o=e.style,r.display===o.display);var r,o}()&&(!t.has(n,"childrenData")||function(i,e){if(t.size(i)!==t.size(e))return!1;var r=t.keys(e);return t.every(r,function(r){var n=t.get(i,r,{}),o=t.get(e,r,{}),s=t.omitBy(o,function(i,e){return n[e]===i||t.isEqual(n[e],i)});return 1===t.size(s)&&t.has(s,"height")})}(i.childrenData,e.childrenData))},behaviors:n.mediaCommon.mediaBehaviors.fill},componentDidLayout:function(){var i=this.props.getScrollBarWidth(),t=this.props.getScreenWidth(),e=this.lastScrollBarWidth!==i,r=this.lastScreenWidth!==t;this.props.isMobileView||!e&&!r||(this.lastScrollBarWidth=i,this.lastScreenWidth=t,this.registerReLayout(),this.forceUpdate())},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.stripContainer.DefaultStripContainer"},getMobileSkinProperties:function(){var t=this.props.compProp.rowMargin,e=i.Children.map(this.props.children,function(e){var r={position:"absolute",top:t,height:this.props.childrenData[e.props.id].height,left:0,width:320};t+=r.height+this.props.compProp.columnsMargin;return e=i.cloneElement(e,{rootStyle:r,bgStyle:{position:"absolute",overflow:"hidden",width:320,left:0,top:0,bottom:0}})},this);return{"":{tagName:"section",style:{height:t-this.props.compProp.columnsMargin+this.props.compProp.rowMargin}},background:this.createFillLayers(),inlineContent:{children:e}}},isScreenWidth:function(){return this.props.compProp.fullWidth},getDesktopRelativeSkinProperties:function(){var e=this.props,r=e.siteWidth,n=e.childrenData,o=e.children,s=e.style,p=e.isMeshLayoutMechanism,a=this.props.compProp,l=a.fullWidth,h=a.frameMargin,c=a.columnsMargin,d=a.siteMargin,u=a.rowMargin,m=t.size(this.props.children),g=r-2*d,y=r-2*h,f=y-c*(m-1),M=i.Children.map(o,function(i){var t=i.props;return n[t.id].width}),v=t.sum(M),S=t.map(M,function(i){return Math.round(i*f/v)});S[0]+=f-t.sum(S);var b=t.defaults({left:0,width:l?"100%":r+"px",minWidth:g+"px"},s),w=i.Children.map(o,function(t,e){var r=t.props.id,o=S[e],s=n[r],a=s.alignment,l=s.height,h={width:o,alignment:a/100},d={position:"relative",width:"100%",left:0,flex:o,marginLeft:e?c+"px":0,minWidth:o+"px",top:p?0:u,marginTop:p?u:0,marginBottom:p?u:0,height:l};return t=i.cloneElement(t,{rootStyle:d,contentArea:h})}),x={position:"absolute",left:0,right:0,width:"calc(100% - "+2*d+"px)",minWidth:r+"px"},C={position:"relative",width:"calc(100% - "+2*(d+h)+"px)",minWidth:y+"px"};return{"":{tagName:"section",style:b,"data-responsive":"true"},background:this.createFillLayers(t.assign({bgStyle:x},this.props)),inlineContent:{style:C,children:w}}},getMobileSkinPropertiesForMesh:function(){var t=this.props.compProp.rowMargin,e=i.Children.map(this.props.children,function(t,e){var r={position:"relative",marginBottom:e===this.props.children.length-1?0:this.props.compProp.columnsMargin};return t=i.cloneElement(t,{isMobileResponsive:!0,rootStyle:r,bgStyle:{position:"absolute",overflow:"hidden",width:320,left:0,top:0,bottom:0},inlineParentStyle:{position:"relative"},inlineStyle:{position:"relative"},containerStyle:{position:"relative"}})},this),r={padding:t+"px 0"};return{"":{tagName:"section","data-mobile-responsive":"true",style:{height:"auto"}},background:this.createFillLayers(),inlineContent:{style:r,children:e}}},getDesktopAbsoluteSkinProperties:function(){var e=this,r=this.props.siteWidth,n=this.props.getScreenWidth();this.lastScreenWidth=n;var o=t.sum(i.Children.map(this.props.children,function(i){return e.props.childrenData[i.props.id].width})),s=i.Children.map(this.props.children,function(i){return e.props.childrenData[i.props.id].width/o*100/100}),p=t.sum(s);s[0]+=1-p;var a=s.length,l=this.props.compProp,h=r-l.columnsMargin*(a-1)-2*l.frameMargin,c=t.map(s,function(i){return h*i}),d=t.reduce(s,function(i,t){return i.push(i[i.length-1]+t),i},[0]),u=void 0,m=void 0,g=void 0,y=this.props.getScrollBarWidth();this.lastScrollBarWidth=y;var f=n&&n<=r,M=0;l.fullWidth&&!f?(M=1,m="(100vw - "+y+"px - "+2*l.siteMargin+"px)",u="(100vw - "+y+"px - "+(l.columnsMargin*(a-1)+2*(l.siteMargin+l.frameMargin))+"px)",g="("+r+"px - "+m+") / 2 + "+l.frameMargin+"px + "):(m=r+"px",u="("+(r-(l.columnsMargin*(a-1)+2*l.frameMargin))+"px)",g=l.frameMargin+"px + ");var v=i.Children.map(this.props.children,function(t,e){var r=s[e],n=t.props.id,o=this.props.childrenData[n].alignment/100,p={position:"absolute",left:"calc("+u+" * "+(d[e]+r*o)+" + "+g+(e*l.columnsMargin-c[e]*o)+"px)",width:c[e],top:l.rowMargin,height:this.props.childrenData[n].height},a={position:"absolute",width:"calc("+u+" * "+r+" + "+M+"px)",left:"calc(("+u+" * "+r+" - "+c[e]+"px) * "+-o+" - "+M+"px)",top:0,bottom:0},h={position:"absolute",width:c[e],top:0,bottom:0,left:"calc((100% - "+c[e]+"px) * "+o+")"};return t=i.cloneElement(t,{rootStyle:p,bgStyle:a,inlineStyle:h})},this);return{"":{tagName:"section"},background:this.createFillLayers(t.assign({bgStyle:{top:0,bottom:0,left:"calc("+parseInt(r/2,10)+"px - ("+m+" / 2))",right:"calc("+parseInt(r/2,10)+"px + ("+m+" / 2))",width:"calc("+m+")"}},this.props)),inlineContent:{children:v}}},getSkinProperties:function(){return this.props.isMobileView?this.props.isMeshLayoutMechanism?this.getMobileSkinPropertiesForMesh():this.getMobileSkinProperties():this.props.isExperimentOpen("sv_kill980")?this.getDesktopRelativeSkinProperties():this.getDesktopAbsoluteSkinProperties()}};return e.compRegistrar.register("wysiwyg.viewer.components.StripColumnsContainer",p,!0),p});
//# sourceMappingURL=stripColumnsContainer.min.js.map
var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}define("layout/util/dataPreparationsForAnchors",["lodash","warmupUtils","experiment"],function(e,t,i){"use strict";var n=["WIX_ADS"],o=5;function r(e,i,n){return t.boundingLayout.getBoundingHeight({height:e,width:i,rotationInDegrees:n})}function a(e,n,o){var a=e.id,s=e.layout?e.layout.rotationInDegrees:0,u=o.height[a],c=void 0;c=i.isOpen("layout_verbs_with_anchors")?o.top[a]:o.top&&void 0!==o.top[a]?o.top[a]:e.layout&&e.layout.y||0,n.currentHeight[e.id]=s?r(u,o.width[a],s):u,n.heightDiff[a]=n.currentHeight[e.id]-u,n.currentY[a]=s?(l=c,g=u,d=o.width[a],h=s,t.boundingLayout.getBoundingY({y:l,height:g,width:d,rotationInDegrees:h})):c;var l,g,d,h;n.topDiff[a]=c-n.currentY[a]}function s(i,u,c,l,g,d){if(e.has(c.height,i.id)){!function(e,t,i){var n=e.id;e.layout&&e.layout.rotationInDegrees&&(t.noHeightChange[n]=!0),i.shrinkableContainer[n]?t.shrinkableContainer[n]=!0:("Document"===(o=e).type||"wysiwyg.viewer.components.PagesContainer"===o.componentType)&&(t.ignoreOriginalValue[n]=!0);var o}(i,u,c),a(i,u,c),u.minHeight[i.id]=function(t,i,a){var s=t.id;if(s&&(c=s,!c||!e.includes(n,c))){var u=Math.max(a.minHeight[s]||0,o);return r(u,i,t.layout.rotationInDegrees)}var c;return a.minHeight[s]||0}(i,c.width[i.id]||i.layout.width,u),u.currentHeight[i.id]=Math.max(u.currentHeight[i.id],u.minHeight[i.id]),u.collapsed[i.id]&&(u.currentHeight[i.id]=0),u.flat[i.id]=i;var h=l+u.currentY[i.id]-g,p=u.currentHeight[i.id];u.sortingY[i.id]=h,u.valueForFirstLockedAnchor[i.id]={pusherId:null,value:-Number.MAX_VALUE};var m=t.dataUtils.getChildrenData(i,d);e.forEach(m,function(e){s(e,u,c,h,p||5e3,d)})}}function u(e,t,i){return{distance:i,type:e,targetComponent:t,locked:!0,notEnforcingMinValue:!0}}function c(t,i,n,o){var r=t;t.$cloned||((r=e.clone(r)).layout=e.clone(r.layout),r.layout.anchors=e.clone(r.layout.anchors),r.$cloned=!0);return r.layout.anchors.push(u("TOP_TOP",i,n),u("BOTTOM_BOTTOM",i,o)),r}function l(t){return"wysiwyg.viewer.components.PopupContainer"===(e.get(t,"components.length")&&e.get(t,"components[0].componentType"))}return{getDataForAnchorsAndSort:function(t,i,n){var o={flat:{},sortingY:{},minHeight:{},shrinkableContainer:{},ignoreOriginalValue:{},noHeightChange:{},containerHeightMargin:{},currentHeight:{},currentY:{},heightDiff:{},topDiff:{},locked:{},valueForFirstLockedAnchor:{}};o.containerHeightMargin=i.containerHeightMargin||{},o.minHeight=e.clone(i.minHeight||{}),o.collapsed=e.clone(i.collapsed||{}),o.injectedAnchors=i.injectedAnchors||{},o.__isPopup=l(t),s(t,o,i,0,0,n),r=o.flat,e.forEach(r,function(t,i){if(t.layout&&t.layout.anchors){var n=e.filter(t.layout.anchors,{type:"LOCK_BOTTOM"});e.isEmpty(n)||(e.forEach(n,function(e){r[i]=c(r[i],e.targetComponent,e.topToTop,e.distance),r[e.targetComponent]=c(r[e.targetComponent],i,-1*e.topToTop,-1*e.distance)}),e.remove(r[i].layout.anchors,{type:"LOCK_BOTTOM"}))}});var r,a=e.sortBy(e.keys(o.flat),function(e){return o.sortingY[e]});return delete o.sortingY,{structureData:o,sortedIds:a}},fixMeasureMap:function(t,i){e.forEach(i.flat,function(e,n){t.height[n]=i.currentHeight[n]-i.heightDiff[n],t.top[n]=l(e)?0:i.currentY[n]+i.topDiff[n]})},maxMeasureMapHeight:function i(n,o,r,a){if(!e.has(n.height,a.id))return 0;o=o||0,o+=n.top[a.id];var s=t.dataUtils.getChildrenData(a,r);return s=e.reject(s,{layout:{fixedPosition:!0}}),Math.max(o+n.height[a.id],Math.max.apply(null,e.map(s,e.partial(i,n,o,r))))}}}),define("layout/util/anchors",["lodash","layout/util/dataPreparationsForAnchors"],function(e,t){"use strict";var i="BOTTOM_TOP",n="BOTTOM_PARENT",o=10,r=["Page","Document"],a={MOBILE:{"mobile.core.components.MasterPage":!0,"wysiwyg.viewer.components.HeaderContainer":!0,"wysiwyg.viewer.components.SiteRegionContainer":!0,"wysiwyg.viewer.components.PagesContainer":!0,"wysiwyg.viewer.components.PageGroup":!0,"wysiwyg.viewer.components.FooterContainer":!0,"wysiwyg.viewer.components.SiteBackground":!0},DESKTOP:{"mobile.core.components.MasterPage":!0,"wysiwyg.viewer.components.HeaderContainer":!0,"wysiwyg.viewer.components.PagesContainer":!0,"wysiwyg.viewer.components.PageGroup":!0,"wysiwyg.viewer.components.FooterContainer":!0,"wysiwyg.viewer.components.SiteBackground":!0}};function s(e,t){return(t?a.MOBILE:a.DESKTOP)[e.componentType]}var u={};function c(e,t,i,n){return t!==i&&(n.dirty[e]=!0,n.changedCompsMap[e]=n.flat[e]),n.dirty[e]}function l(t,i,n,o){var r=n[o.targetComponent],a=n[i];o.notEnforcingMinValue&&!e.isEmpty(a)&&(o.notEnforcingMinValue=!1),r[i]=t;var s=Math.max.apply(null,e.values(r));return o.notEnforcingMinValue&&delete r[i],s}function g(e,t,i,n,o){var r=e.targetComponent,a=t.valueForFirstLockedAnchor[r];a&&(e.locked||null===o?(a.pusherId&&(i[r]={},i[r][a.pusherId]=a.value),delete t.valueForFirstLockedAnchor[r]):(a.pusherId=n,a.value=Math.max(o,a.value)))}function d(e,t){var i;return t-=(i=t-e,i%1)}function h(t,i){return e.has(t.currentHeight,i)}function p(t,o){return r=t,a=o,e.get(r.collapsed,a.fromComp,!1)&&e.includes([i,n],a.type)?0:o.distance;var r,a}u.TOP_TOP=function(t,i,n){var o=i.targetComponent;if(!h(n,o)||!h(n,t))return!1;if(e.has(n.locked,o))return!1;var r=n.currentY[o],a=n.currentY[t]+p(n,i);return g(i,n,n.toTopAnchorsY,t,null),a=d(r,a=l(a,t,n.toTopAnchorsY,i)),n.currentY[o]=a,c(o,r,a,n)},u[i]=function(t,i,n){var r=i.targetComponent;if(!h(n,r)||!h(n,t))return!1;if(e.has(n.locked,r))return!1;var a=n.currentY[r],s=n.currentHeight[t]+n.currentY[t],u=null;return i.locked?s+=p(n,i):(u=s+o,s=n.valueForFirstLockedAnchor[r]?Math.max(s+o,i.originalValue):u),s=Math.max(s,n.currentY[t]+n.currentHeight[t]/2),g(i,n,n.toTopAnchorsY,t,u),s=d(a,s=l(s,t,n.toTopAnchorsY,i)),n.currentY[r]=s,c(r,a,s,n)};function m(e,t,i,n){var r=void 0;return n.shrinkableContainer[i]?r=t:e.locked?r=t+p(n,e):(r=t+o,n.ignoreOriginalValue[i]||(r=Math.max(r,e.originalValue))),r}function f(t,i,n,o){var r=t;return e.isNumber(o.minHeight[i])&&t<o.minHeight[i]&&(r=o.minHeight[i],n.notEnforcingMinValue&&(n.notEnforcingMinValue=!1,o.dirty[i]=!0,o.changedCompsMap[i]=o.flat[i])),r}u[n]=function(t,i,n){var o=i.targetComponent;if(e.get(n.collapsed,o))return!1;if(!h(n,o)||!h(n,t))return!1;if(e.has(n.locked,o))return!1;if(n.flat[o].layout&&n.flat[o].layout.rotationInDegrees)return!1;var r=n.currentHeight[o],a=m(i,n.currentHeight[t]+n.currentY[t]+(n.containerHeightMargin[o]||0),o,n);return a=l(a=f(a,o,i,n),t,n.toBottomAnchorsHeight,i),n.currentHeight[o]=a,c(o,r,a,n)},u.BOTTOM_BOTTOM=function(t,i,n){if(n.ignoreBottomBottom)return!1;var o=i.targetComponent;if(!h(n,o)||!h(n,t))return!1;if(e.has(n.locked,o))return!1;if(n.flat[o].layout&&n.flat[o].layout.rotationInDegrees)return!1;var r=n.currentHeight[o],a=m(i,n.currentHeight[t]+n.currentY[t]-n.currentY[o],o,n);return a=l(a=f(a,o,i,n),t,n.toBottomAnchorsHeight,i),n.currentHeight[o]=a,c(o,r,a,n)};return{enforceAnchors:function(i,n,o,a,c,l,g,d){var h=t.getDataForAnchorsAndSort(i,n,a),p=h.structureData,m=h.sortedIds,f=e.invert(m);p.dirty={},p.toTopAnchorsY={},p.toBottomAnchorsHeight={},p.locked=l,p.changedCompsMap=p.flat,p.ignoreBottomBottom=!!d,e.forEach(p.flat,function(e,t){p.dirty[t]=!0,p.toTopAnchorsY[t]={},p.toBottomAnchorsHeight[t]={}}),g&&(p.changedCompsMap=e.pick(p.flat,e.keys(g)));var y=function(t,i,n,o,r,a,c){var l=!1;function g(t){var g,d,h,p=(g=t,d=o,h=n,"masterPage"===g?[]:h.injectedAnchors[g]||d[g]||[]),m=Number.MAX_VALUE;return!n.dirty[t]||r&&!s(n.flat[t],c)||e.forEach(p,function(e){if(u[e.type]&&n.flat[e.targetComponent]&&(!r||s(n.flat[e.targetComponent],c))){e.targetComponent===a&&(l=!0);var o=u[e.type](t,e,n)?i[e.targetComponent]:Number.MAX_VALUE;m=Math.min(o,m)}}),n.dirty[t]=!1,m}for(var d=t.length,h=0;h<d;){var p=g(t[h]);h=Math.min(h+1,p)}return l}(m,f,p,o,c,i.id,a);if(t.fixMeasureMap(n,p),!y&&e.includes(r,i.type)){var w=n.height[i.id];n.height[i.id]=t.maxMeasureMapHeight(n,0,a,i),n.height[i.id]!==w&&(p.changedCompsMap[i.id]=p.flat[i.id])}return p.changedCompsMap},HARD_WIRED_COMPS_TO_RELAYOUT:{SITE_FOOTER:!0,SITE_HEADER:!0,SITE_PAGES:!0,PAGES_CONTAINER:!0,masterPage:!0,SITE_BACKGROUND:!0}}}),define("layout/util/reduceDistancesAlgorithm/sortByAnchors",["lodash"],function(e){"use strict";return function(t,i){var n=e.reduce(t,function(e,t){return e[t.id]=0,e},{});function o(t,r){if(a=n,s=t,e.has(a,s)){var a,s,u=e.max([n[t],r+1]);n[t]=u;var c=e.map(i[t],"targetComponent");e.forEach(c,function(e){o(e,u)})}}var r=function(t,i){var n=e.reduce(t,function(t,n){var o=i[n.id];return e.forEach(o,function(e){t[e.targetComponent]=!0}),t},{});return e.filter(t,function(e){return!n[e.id]})}(t,i);return e.forEach(r,function(e){o(e.id,0)}),e.sortBy(t,function(e){return n[e.id]})}}),define("layout/util/reduceDistancesAlgorithm/anchorsTypes",[],function(){"use strict";return{TOP_TOP:"TOP_TOP",BOTTOM_TOP:"BOTTOM_TOP",BOTTOM_PARENT:"BOTTOM_PARENT"}}),define("layout/util/reduceDistancesAlgorithm/createAnchorsDataManager",["lodash","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(e,t){"use strict";var i={SITE_FOOTER:!0,SITE_HEADER:!0,SITE_PAGES:!0,PAGES_CONTAINER:!0,masterPage:!0,SITE_BACKGROUND:!0};function n(n,o,r,a){var s=e.flatten(e.values(n)),u={from:{},to:{}},c={from:{},to:{}};function l(t){return a.shrinkableContainer[t.targetComponent]?e.assign({},t,{locked:!0,distance:0}):t}function g(i){if(a.collapsed[i.fromComp]&&(n=i,n.locked&&e.includes([t.BOTTOM_TOP,t.BOTTOM_PARENT],n.type)))return e.assign({},i,{distance:0});var n;return i}function d(t){i=t,t=e.flow([g])(i);var i;u.from[t.fromComp]=u.from[t.fromComp]||[],u.from[t.fromComp].push(t),u.to[t.targetComponent]=u.to[t.targetComponent]||[],u.to[t.targetComponent].push(t)}function h(t){i=t,t=e.flow([l,g])(i);var i;c.from[t.fromComp]=t,c.to[t.targetComponent]=c.to[t.targetComponent]||[],c.to[t.targetComponent].push(t)}var p=e.filter(s,function(t){return r?i[t.fromComp]&&i[t.targetComponent]:e.has(o,t.fromComp)&&e.has(o,t.targetComponent)});return e.forEach(p,function(e){e.type===t.BOTTOM_PARENT?h(e):d(e)}),{anchors:p,siblingsAnchors:u,childToParentAnchors:c}}return function(t,i,o,r){return new function(t,i,o,r){var a=n(t,i,o,r);e.merge(this,{getComponentPushers:function(e){return a.siblingsAnchors.to[e]||[]},getComponentAnchorToParent:function(e){return a.childToParentAnchors.from[e]}})}(t,i,o,r)}}),define("layout/util/reduceDistancesAlgorithm/createMeasureMapManager",["lodash","warmupUtils"],function(e,t){"use strict";var i=5;function n(i,n){return e(n).pickBy(function(t){return e.get(t,"layout.rotationInDegrees")}).mapValues(function(e,n){var o,r,a,s,u,c,l,g=i.top[n],d=i.height[n],h=i.width[n];return{heightDiff:(o=d,r=h,a=e.layout.rotationInDegrees,t.boundingLayout.getBoundingHeight({height:o,width:r,rotationInDegrees:a}))-d,yDiff:(s=g,u=d,c=h,l=e.layout.rotationInDegrees,t.boundingLayout.getBoundingY({y:s,height:u,width:c,rotationInDegrees:l}))-g}}).value()}return function(t,o){return new function(t,o){var r=t,a=n(t,o);function s(t){return e.get(a,[t,"yDiff"],0)}function u(t){return e.get(a,[t,"heightDiff"],0)}e.merge(this,{get:function(){return r},getComponentTop:function(t){if(!e.isUndefined(r.top[t]))return r.top[t]+s(t)},getComponentHeight:function(t){if(!e.isUndefined(r.height[t]))return r.collapsed[t]?0:r.height[t]+u(t)},getComponentMinHeight:function(t){return r.collapsed[t]?0:e.max([r.minHeight[t],i])},getContainerHeightMargin:function(e){return r.containerHeightMargin[e]||0},isCollapsed:function(e){return Boolean(r.collapsed[e])},isShrinkableContainer:function(e){return Boolean(r.shrinkableContainer[e])},getComponentWidth:function(e){return r.width[e]},getSiteWidth:function(){return r.width.site},getClientSize:function(){return{width:r.clientWidth,height:r.clientHeight}},setComponentTop:function(e,t){r.top[e]=t-s(e)},setComponentHeight:function(e,t){r.height[e]=t-u(e)}})}(t,o)}}),define("layout/util/reduceDistancesAlgorithm/createOriginalValuesManager",["lodash"],function(e){"use strict";return function(t,i){return new function(t,i){e.merge(this,{getOriginalTop:function(n){return e.get(t,[n,"top"])||i[n].y},getOriginalHeight:function(n){return e.get(t,[n,"height"])||i[n].height}})}(t,i)}}),define("layout/util/reduceDistancesAlgorithm/generateEnforceData",["lodash","warmupUtils","layout/util/reduceDistancesAlgorithm/sortByAnchors","layout/util/reduceDistancesAlgorithm/createAnchorsDataManager","layout/util/reduceDistancesAlgorithm/createMeasureMapManager","layout/util/reduceDistancesAlgorithm/createOriginalValuesManager"],function(e,t,i,n,o,r){"use strict";var a={ROOT:["masterPage","SITE_BACKGROUND"],masterPage:["SITE_HEADER","PAGES_CONTAINER","SITE_FOOTER"],PAGES_CONTAINER:["SITE_PAGES"]};function s(n,o,r,s,u){if(s)return c=n,l=r,g=u,e.find(a.ROOT,function(e){return e===c.id})?function n(o){var r=a[o.id],s=t.dataUtils.getChildrenKey(o,g),u=o[s],c=e.omit(o,s);if(r){var d=e.reduce(u,function(t,i){return e.includes(r,i.id)&&t.push(n(i)),t},[]);c.children=i(d,l)}else c.children=[];return c}(c):null;var c,l,g;return d=o,h=r,p=u,function n(o){var r=t.dataUtils.getChildrenKey(o,p),a=o[r],s=e.omit(o,r),u=Boolean(d.collapsed[o.id])?[]:e(a).filter(function(t){return e.has(d.height,t.id)}).map(n).value();return s.children=i(u,h),s}(n);var d,h,p}return function(i,a,u,c,l,g,d){var h=l?t.constants.VIEW_MODES.MOBILE:t.constants.VIEW_MODES.DESKTOP,p=function(t,i,n,o){var r=e.get(n,[t.id,o]);return e.merge({},r,i.injectedAnchors)}(i,a,u,h),m=s(i,a,p,g,l);if(!m)return null;var f,y,w=function(t){var i={};return function t(n){i[n.id]=n,e.forEach(n.children,t)}(t),i}(m),v=(f=w,y=a,e.mapValues(f,function(i){if(i.layout){var n=e.cloneDeep(i.layout);if(e.assign(n,t.boundingLayout.getBoundingLayout(i.layout)),t.layoutUtils.isVerticallyStretchedToScreen(n)){n.isVerticallyStretchedToScreen=!0;var o={width:y.clientWidth,height:y.clientHeight},r=y.width.site;n.minHeight=t.positionAndSize.getHeightInPixelsRounded(i.layout,null,o,r),delete n.docked.top,delete n.docked.bottom}return n}}));return{structure:m,flatDataMap:w,layoutsMap:v,measureMapManager:o(a,w),anchorsDataManager:(C=p,M=a,S=g,I=w,n(C,I,S,M)),originalValuesManager:function(t,i,n,o){var a=e.get(i,[t.id,n]);return r(a,o)}(i,c,h,v),lockedCompsMap:d||{}};var C,M,S,I}}),define("layout/util/reduceDistancesAlgorithm/minHeightDataUtils",["lodash"],function(e){"use strict";function t(e){var t=e.absoluteHeight;if(e.topPercents||e.bottomPercents){var i=1-((e.topPercents||0)+(e.bottomPercents||0))/100;return Math.ceil(t/i)}return t}function i(e,t,i){this.absoluteHeight=e||0,t&&(this.topPercents=t),i&&(this.bottomPercents=i)}i.prototype.clone=function(){return new i(this.absoluteHeight,this.topPercents,this.bottomPercents)},i.prototype.addAbsoluteHeight=function(e){return this.absoluteHeight+=e,this},i.prototype.addMinHeightData=function(e){this.absoluteHeight+=e.absoluteHeight;var t=(this.topPercents||0)+(e.topPercents||0);t&&(this.topPercents=t);var i=(this.bottomPercents||0)+(e.bottomPercents||0);return i&&(this.bottomPercents=i),this};function n(e,t){this.absoluteHeight=e,this.dynamicHeights=t}n.prototype.merge=function(e){return this.dynamicHeights=this.dynamicHeights.concat(e.dynamicHeights),this.absoluteHeight=Math.max(this.absoluteHeight,e.absoluteHeight),this},n.prototype.solve=function(){if(e.isEmpty(this.dynamicHeights))return this.absoluteHeight;var i=Math.ceil(e(this.dynamicHeights).map(t).max()),n=Math.max(this.absoluteHeight,i);return o=this.dynamicHeights,r=n,e.reduce(o,function(e,t){var i=Math.ceil(t.topPercents/100*r),n=Math.ceil(t.bottomPercents/100*r),o=i+t.absoluteHeight+n;return o>e?o:e},r);var o,r};return{createMinHeightData:function(e,t,n){return new i(e,t,n)},createMinHeightDataForDockedTopData:function(e){return new i(e.px,e.pct)},createMinHeightDataForDockedBottomData:function(e){return new i(e.px,null,e.pct)},createMinHeightDataForVerticallyCenteredDockedData:function(t){var n=void 0,o=void 0;return e.isNumber(t.pct)&&(t.pct<0?o=2*Math.abs(t.pct):n=2*t.pct),new i(2*Math.abs(t.px),n,o)},createChainMinHeightData:function(t){var i=0,o=[];return e.forEach(t,function(e){(t=e).topPercents||t.bottomPercents?o.push(e):i=Math.max(i,e.absoluteHeight);var t}),new n(i,o)}}}),define("layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils",[],function(){"use strict";return{getAnchorMinDistance:function(e){return e.locked?e.distance:10}}}),define("layout/util/reduceDistancesAlgorithm/enforceComponentsMinHeight",["lodash","warmupUtils","layout/util/reduceDistancesAlgorithm/minHeightDataUtils","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(e,t,i,n,o){"use strict";function r(e,n,o){var r=i.createMinHeightData(),a=function(e){var n=t.layoutUtils.getTopDockData(e);return n?i.createMinHeightDataForDockedTopData(n):i.createMinHeightData(e.y)}(e),s=t.layoutUtils.isDockedToDirection(e,"top");return n||s||!o||a.absoluteHeight<0?a:r}function a(t,i,r){var a=r.type===o.TOP_TOP?0:i,s=n.getAnchorMinDistance(r);return e.map(t,function(e){var t=a+s;return e.clone().addAbsoluteHeight(t)})}function s(o,s,u,c,l,g){var d={value:0,chainsMinHeightData:i.createChainMinHeightData(),isShrinkableContainer:!1},h={};function p(e,t){t&&t.locked&&(d.isShrinkableContainer=!0),d.chainsMinHeightData.merge(e)}function m(o,r,a){var u=r?a.forDocked:a.forNonDocked,l=function(e){var o=t.layoutUtils.getBottomDockData(g[e]),r=void 0;if(o)r=i.createMinHeightDataForDockedBottomData(o);else{var a=s.getComponentAnchorToParent(e);r=i.createMinHeightData(n.getAnchorMinDistance(a))}var u=c[e];return r.clone().addAbsoluteHeight(u)}(o),d=e.map(u,function(e){return e.clone().addMinHeightData(l)});return i.createChainMinHeightData(d)}function f(t){var n=s.getComponentPushers(t),o=e.isEmpty(n),d=!!u[t];return o||d?function(e,t){var i=g[e];return{forNonDocked:[r(i,t,!1)],forDocked:[r(i,t,!0)]}}(t,d):function(t,n){var o=!1,r=[],s=[];if(e.forEach(n,function(e){e.locked&&(o=!0);var t=h[e.fromComp],i=c[e.fromComp];r=r.concat(a(t.forDocked,i,e)),s=s.concat(a(t.forNonDocked,i,e))}),!o){var u=l.getOriginalTop(t),g=i.createMinHeightData(u);s.push(g)}return{forDocked:r,forNonDocked:s}}(t,n)}function y(e){if(t.layoutUtils.isVerticallyCentered(g[e.id]))p(function(e,n){var o=t.layoutUtils.getVerticallyCenteredDockData(n),r=c[e],a=i.createMinHeightDataForVerticallyCenteredDockedData(o).addAbsoluteHeight(r);return i.createChainMinHeightData([a])}(e.id,g[e.id]));else{var n=f(e.id);h[e.id]=n;var o=s.getComponentAnchorToParent(e.id),r=!!o,a=t.layoutUtils.isDockedToDirection(g[e.id],"bottom");(a||r)&&p(m(e.id,a,n),o)}}return e.forEach(o.children,y),d.value=d.chainsMinHeightData.solve(),delete d.chainsMinHeightData,d}return function(i,n,o,r,a,u){var c={};function l(i,o){if(n.isCollapsed(i.id))return n.setComponentHeight(i.id,0),void(c[i.id]=0);var a=t.layoutUtils.isVerticallyStretched(u[i.id]),s=function(e,t,i){var o=[],a=u[e.id];if(!a)return o;var s=a.aspectRatio||0,c=i||a.isVerticallyStretchedToScreen||s||n.isShrinkableContainer(e.id)||t&&t.isShrinkableContainer;if(s){var l=n.getComponentWidth(e.id);o.push(s*l)}if(t&&(o.push(t.value+n.getContainerHeightMargin(e.id)),!c)){var g=r.getOriginalHeight(e.id);o.push(g)}if(c){var d=n.getComponentMinHeight(e.id),h=a.minHeight||0;o.push(d,h)}return o}(i,o,a);l=i.id,g=s,!a?(g.length&&n.setComponentHeight(l,e.max(g)),c[l]=n.getComponentHeight(l)):c[l]=g.length?e.max(g):0;var l,g}!function t(i){var g=i.children,d=void 0,h=a[i.id];e.isEmpty(g)||(p=i.id,n.isCollapsed(p))||(e.forEach(g,t),h||(d=s(i,o,a,c,r,u)));var p;l(i,d)}(i)}}),define("layout/util/reduceDistancesAlgorithm/enforceAnchorsAndDocking",["lodash","warmupUtils","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(e,t,i,n){"use strict";return function(o,r,a,s,u,c){function l(e,i){var n=function(e,i,n,o){var r={width:o.getComponentWidth(n),height:o.getComponentHeight(n)},a=o.getClientSize(),s=o.getComponentHeight(e);return t.positionAndSize.getYInPixelsRounded(i,r,a,s)}(e.id,c[e.id],i,r);r.setComponentTop(e.id,n)}function g(e,i){if(t.layoutUtils.isVerticallyStretched(c[e.id])&&!r.isCollapsed(e.id)){var n=function(e,i,n){var o=n.getComponentHeight(i),r=n.getComponentWidth(i),a=n.getClientSize(),s=n.getSiteWidth();return t.positionAndSize.getHeightInPixelsRounded(e,{width:r,height:o},a,s)}(c[e.id],i,r);r.setComponentHeight(e.id,n)}}function d(t){var o=a.getComponentPushers(t.id);if(!e.isEmpty(o)){var s=function(t,o){var r=[];return e.some(t,"locked")?(e.forEach(t,function(e){var t=o.getComponentTop(e.fromComp)+(e.type===n.TOP_TOP?0:o.getComponentHeight(e.fromComp))+i.getAnchorMinDistance(e);r.push(t)}),e.max(r)):null}(o,r);null!==s&&r.setComponentTop(t.id,s)}}function h(t){var o=a.getComponentPushers(t.id);if(!u[t.id])if(e.isEmpty(o))r.setComponentTop(t.id,s.getOriginalTop(t.id));else{var c=function(t,o,r,a){var s=[],u=e.every(o,{locked:!1});return e.forEach(o,function(e){if(u){var o=r.getOriginalTop(t);s.push(o)}var c=a.getComponentTop(e.fromComp)+(e.type===n.TOP_TOP?0:a.getComponentHeight(e.fromComp))+i.getAnchorMinDistance(e);s.push(c)}),e.max(s)}(t.id,o,s,r);r.setComponentTop(t.id,c)}}function p(i,n){e.forEach(i,function(e){t.layoutUtils.isVerticallyDocked(c[e.id])?(l(i=e,(o=n).id),g(i,o.id)):h(e);var i,o})}function m(n){var o=!1;function s(t,n){var u=t.fromComp,c=function(e,t){var i=r.getComponentTop(e),n=t-r.getComponentHeight(e);return n>=i?null:(r.setComponentTop(e,n),o=!0,n)}(u,n-i.getAnchorMinDistance(t));if(null!==c){var l=a.getComponentPushers(u);e.forEach(l,function(e){s(e,c)})}}var u=e.filter(n,function(e){return i=c[e.id],t.layoutUtils.isDockedToDirection(i,"bottom");var i});return e.forEach(u,function(t){!function(t){var i=r.getComponentTop(t),n=a.getComponentPushers(t);e.forEach(n,function(e){s(e,i)})}(t.id)}),o}!function i(n){var o=n.children;e.isEmpty(o)||(s=n.id,r.isCollapsed(s))||(p(o,n),m(o)&&(a=o,e.forEach(a,function(e){var i=t.layoutUtils.isDockedToDirection(c[e.id],"top"),n=t.layoutUtils.isDockedToDirection(c[e.id],"bottom");i||n||d(e)})),e.forEach(o,i));var a,s}(o)}}),define("layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithm",["layout/util/reduceDistancesAlgorithm/enforceComponentsMinHeight","layout/util/reduceDistancesAlgorithm/enforceAnchorsAndDocking"],function(e,t){"use strict";return{enforce:function(i){return e(i.structure,i.measureMapManager,i.anchorsDataManager,i.originalValuesManager,i.lockedCompsMap,i.layoutsMap),t(i.structure,i.measureMapManager,i.anchorsDataManager,i.originalValuesManager,i.lockedCompsMap,i.layoutsMap),i.flatDataMap}}}),define("layout/util/layoutAlgorithm",["lodash","experiment","warmupUtils","layout/util/anchors","layout/util/reduceDistancesAlgorithm/generateEnforceData","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithm"],function(e,t,i,n,o,r){"use strict";function a(a,s,u,c,l,g,d,h,p){var m=l?i.constants.VIEW_MODES.MOBILE:i.constants.VIEW_MODES.DESKTOP,f=e.get(u,[a.id,m]);if(f){if(t.isOpen("layout_verbs_with_anchors")){var y=o(a,s,u,c,l,g,d);return y?r.enforce(y):{}}return n.enforceAnchors(a,s,f,l,g,d,h,p)}return function(t,n,o){var r={};return function t(a){e.has(n.height,a.id)&&(r[a.id]=a,e.forEach(i.dataUtils.getChildrenData(a,o),t))}(t),r}(a,s,l)}function s(t,i){return e.has(t.height,i)}var u={SITE_FOOTER:!0,SITE_HEADER:!0,PAGES_CONTAINER:!0};function c(t,n,o){var r=i.dataUtils.getChildrenData(n,o),a=e.find(r,{id:"SITE_FOOTER"});t.height.masterPage=function(t,n,o){var r=0;return function t(a,u){if(u=u||0,s(n,a.id)){var c=u+n.top[a.id]+n.height[a.id];c>r&&(r=c);var l=i.dataUtils.getChildrenData(a,o);e.forEach(l,function(e){t(e,u+n.top[a.id])})}}(t),r||t.layout.y+t.layout.height}(a,t,o)}function l(t,i,n){var o,r;return(o=t,r=i,e(r).map(function(e){return s(o,e.id)?(t=o,i=e.id,t.top[i]+t.height[i]):0;var t,i}).max())-t.top.PAGES_CONTAINER-n}function g(t,n,o,r,a){var s=function(t,n){var o=i.dataUtils.getChildrenData(t,n);return e.reject(o,function(t){return u[t.id]||e.get(t,["layout","fixedPosition"])})}(n,a);if(!e.isEmpty(s)){var g=e.get(r,["pagesToFooterGap"],0),d=l(t,s,g);d>t.height.PAGES_CONTAINER&&(t.height.PAGES_CONTAINER=d,t.height.SITE_PAGES=d,o&&(t.height[o.pageId]=d),t.top.SITE_FOOTER=t.top.PAGES_CONTAINER+d+g)}c(t,n,a)}function d(t,n){var o=i.DALFactory.getPointersInstance(n),r=i.DALFactory.getInstance(n),a=t&&r.get(o.data.getDataItem(t,n.MASTER_PAGE_ID));return e.get(a,"ignoreBottomBottomAnchors")}return{enforceStructure:a,enforceAllStructures:function(t,i,n,o,r,u){var c={},l=void 0,h=void 0;n.originalValuesMap=n.originalValuesMap||{};var p=n.isMobileView();return t.inner&&(h=e.get(t,"inner.structure.id"),l=d(h,n),c.inner=a(t.inner.structure,i,n.anchorsMap,n.originalValuesMap,p,o,r,u,l),i.height.SITE_PAGES&&(i.height.SITE_PAGES=i.height[t.inner.pageId])),e.forOwn(t,function(m,f){if("inner"!==f&&(h=e.get(m,["structure","id"]),l=d(h,n),c[f]=a(m.structure,i,n.anchorsMap,n.originalValuesMap,p,o,r,u,l)),"outer"===f&&!p&&(w=i,s(w,"SITE_HEADER"))){var y=n.getMasterPageLayoutSettings();y.useDesktopSectionsLayout&&g(i,m.structure,t.inner,y,p)}var w}),c}}}),define("layout/util/createDOMPatchers",["zepto","lodash","warmupUtils"],function(e,t,i){"use strict";function n(t,n,o){t[n]?e(t[n]).css(o):i.log.error("Cannot find node with id {"+n+"} to patch css. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}function o(t,n,o){t[n]?e(t[n]).attr(o):i.log.error("Cannot find node with id {"+n+"} to patch attributes. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}function r(e,n,o){e[n]?t.forOwn(o,function(t){e[n].setAttributeNS(t.ns,t.attribute,t.value)}):i.log.error("Cannot find node with id {"+n+"} to patch attributesNS. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}function a(e,n,o){e[n]?t.forEach(t.keys(o),function(t){e[n][t]=o[t]}):i.log.error("Cannot find node with id {"+n+"} to patch events. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}function s(n,o,r){if(n[o]){var a=e(n[o]);t.forOwn(r,function(e,t){a.data(t,e)})}else i.log.error("Cannot find node with id {"+o+"} to patch data. Either the node doesn't exist, or it was never measured, or it was measured under a different id.")}return function(e){return{css:t.partial(n,e),attr:t.partial(o,e),attrNS:t.partial(r,e),data:t.partial(s,e),events:t.partial(a,e)}}}),define("layout/util/rootLayoutUtils",["lodash","warmupUtils"],function(e,t){"use strict";var i=t.layoutUtils,n={IMAGE_REF:"image",SVG_REF:"svg",RECT_REF:"rect",PATTERN_REF:"pattern"};return{measureNodeImage:function(t,i,o,r,a){var s=void 0,u=!1;o[t+n.IMAGE_REF]=o[t].querySelector("img")||o[t].querySelector("image"),o[t+n.IMAGE_REF]&&(o[t+n.SVG_REF]=o[t].querySelector("#svg"+t),o[t+n.RECT_REF]=o[t+n.SVG_REF]&&o[t+n.SVG_REF].querySelector("rect"),o[t+n.PATTERN_REF]=o[t].querySelector("pattern"),o[t+n.IMAGE_REF]&&"image"===o[t+n.IMAGE_REF].nodeName.toLowerCase()&&(u=!0,s=e.get(o[t].querySelector("filter"),"id")),i.width[t]=o[t].offsetWidth,i.height[t]=o[t].offsetHeight,i.custom[t]={isZoomed:o[t].getAttribute("data-image-zoomed"),isSvgImage:u,filterId:s,hasSvgNode:Boolean(o[t+n.SVG_REF]),imgSrc:o[t+n.IMAGE_REF].getAttribute("src"),parentId:a.id,renderedStyles:o[t].getAttribute("data-style"),hasPattern:!!o[t+n.PATTERN_REF]})},references:n,getRootWidth:function(e,t,n){return i.getRootWidth(t,n,e.getSiteWidth())},getRootLeft:function(e,t,n){return i.getRootLeft(t,n,e.getSiteX())}}}),define("layout/util/singleCompLayout",["lodash","zepto","warmupUtils","experiment","layout/util/rootLayoutUtils"],function(e,t,i,n,o){"use strict";var r,a=i.layoutUtils,s=i.style.unitize,u={},c={},l={},g={},d={},h=new WeakMap,p=i.constants.LAYOUT_MECHANISMS,m=p.ANCHORS,f=p.MESH,y=(r=h,function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=r.get(e)||[];r.set(e,i.concat(t))}}),w={};function v(t,i,n,o){var r=e.get(o,"layout.width",0);s=o,a.isHorizontallyStretched(s.layout)?t.width[i]=n.offsetWidth:l[o.componentType]||!e.get(o,"layout.width")?t.width[i]=Math.max(n.offsetWidth,r):t.width[i]=r;var s}function C(t,i,n,o){var r=e.get(o,"layout.height",0),s=e.get(o,"layout.aspectRatio",0);s&&(r=s*t.width[i]),u=o,a.isVerticallyStretched(u.layout)?t.height[i]=n.offsetHeight:l[o.componentType]||!e.get(o,"layout.height")?t.height[i]=Math.max(n.offsetHeight,r):t.height[i]=r;var u}function M(t,n,o,r,s){if(r.isDeadComp[t])!function(t,i,n,o){var r=e.get(o,"layout.width",0),a=e.get(o,"layout.height",0);t.width[i]=r,t.height[i]=a}(r,t,0,o);else{var u=window.getComputedStyle(n);c=r,l=t,g=n,"fixed"===u.position&&(c.fixed[l]=!0,c.top[l]=g.offsetTop,c.left[l]=g.offsetLeft);var c,l,g;!function(e,t,i){var n=i.zIndex;"auto"!==n&&(n=parseFloat(n),isNaN(n)||(e.zIndex[t]=n))}(r,t,u),v(r,t,n,o),C(r,t,n,o),(s.isExperimentOpen("layout_verbs_with_anchors")||s.getLayoutMechanism()===i.constants.LAYOUT_MECHANISMS.MESH)&&(d=t,h=n,r.top[d]=h.offsetTop);var d,h;r.left[t]=function(t,i){var n=e.get(t,"layout.x",0),o=i.offsetLeft,r=a.getMeasurerForElement(i);return r&&(o-=r.offsetLeft),Math.abs(n-o)<=.5?n:o}(o,n)}}function S(e){return e.getAttribute("data-dead-comp")}function I(e,t){if(!e)return!1;var i=t(e);return i||!1}var b=function(n,o,r){var a=y(o),s=i.constants.COMP_LAYOUT_OPTIONS.CHANGES_TYPES,u=[s.data];if(e.isFunction(r))a([r]);else if(e.isArray(r)){var c=e(r).reject(function(t){return e.isEmpty(t.changes)}).map(function(e){return e.id=e.node.getAttribute("id"),e}).value();!function(i){var n=Object.keys(s),o=i.map(function(i){var o=i.type,r=i.node,a=i.changes;if(!n.includes(o))throw new Error("can not use type "+o+" for patching. only types "+n+" are allowed");return u.includes(o)?function(){var i=t(r);e.forOwn(a,function(e,t){i[o](t,e)})}:function(){return t(r)[o](a)}});a(o)}(c),function(t){var i={height:"height","min-height":"minHeight","min-width":"minWidth",width:"width",top:"top"},o=Object.keys(i);e(t).filter({type:s.css}).map(function(t){var n=t.id,r=t.changes,a=e.pick(r,o);return e(a).mapKeys(function(e,t){return i[t]}).transform(function(e,t,i){e[i]=e[i]||{},e[i][n]=t},{}).value()}).forEach((r=n,function(t){return e.merge(r,t)}));var r}(c)}};function T(e,t){w[e]&&console.warn(e+" is already registered to 'registerCustomLayoutFunction'"),w[e]=t}return{patchComponent:function(t,r,c,l,g){var d=i.layoutUtils.getLayoutMechanism(g),p=t.id,y=t.layout;if(d===m&&function(t,i,n,o){var r={};o&&(a.isVerticallyDocked(o)&&!a.isVerticallyStretchedToScreen(o)||(r.top=s(n.top[t])),a.isVerticallyStretched(o)&&!a.isVerticallyStretchedToScreen(o)||(r.height=s(n.height[t])),e.isEmpty(r)||i.css(t,r))}(p,r,l,y),n.isOpen("sv_noSpecificCompLayout",g))return!1;!function(t,r,a,s,u){var c=s.layout,l=i.layoutUtils.getLayoutMechanism(u);if(c&&i.dockUtils.isHorizontalDockToScreen(c)&&l!==f){var g=o.getRootWidth(u,a,s.rootId),d=0-o.getRootLeft(u,a,s.rootId),h=i.dockUtils.getDockedStyleWithMargins(c,u.getPageMargins(),u.getScreenWidth(),g,d);if(a.left[t]=parseInt(h.left,10),a.width[t]=parseInt(h.width,10),n.isOpen("sv_kill980")){var p=-o.getRootLeft(u,a,s.rootId),m=e.get(s,"layout.docked.left",{}),y="calc("+(m.vw||0)+"vw + "+(m.px||0)+"px)",w="calc("+a.width.screen+"px - "+(2*m.vw||0)+"vw - "+(2*m.px||0)+"px)";r.css(t,{left:p,marginLeft:y,width:w})}else r.css(t,e.pick(h,["left","width"]))}}(p,r,l,t,g);var w=c[t.id],v=h.get(w);e.forEach(v,function(e){return e(r)}),!l.isDeadComp[p]&&u[t.type]&&u[t.type](p,r,l,t,g)},measureComponent:function(i,n,o,r,a,s){var u=n.id,l=I(u,o);if(l&&(h.set(l,[]),a[u]=l,r.isDeadComp[u]=S(l),M(u,l,i,r,s),!r.isDeadComp[u]&&!s.isExperimentOpen("sv_noSpecificCompLayout"))){var g=s.getSiteData();c[n.type]&&c[n.type](u,r,a,g,n),function(t,i,n,o,r,a){if(d[t]){var s=d[t];e.isFunction(s)?s(i,n,o,r,a):e.isPlainObject(s)&&e.forEach(e.values(s),function(e){return e(i,n,o,r,a)})}}(n.type,u,r,a,g,n);var p=g.getLayoutFunc(l);p&&b(r,l,p(l,t)),w[n.type]&&b(r,l,w[n.type](u,a,r,g,n))}},measureComponentChildren:function(t,i,n,o,r){var a=t.id,s=I(a,i);if(s&&!S(s)&&g[t.type]){var u=g[t.type];"function"==typeof u&&(u=u(a,o,t,r)),e.forEach(u,function(s){var u=e.isPlainObject(s),l=u?s.pathArray:s,g=i.apply(void 0,[a].concat(l))||i.apply(void 0,[a,"component"].concat(l));if(g){var d=l.join(""),h=a+d;o[h]=g,n.height[h]=g.offsetHeight,n.width[h]=g.offsetWidth,u&&c[s.type]&&c[s.type](h,n,o,r,t)}})}},isComponentDead:S,registerPatcher:function(e,t){u[e]=t},registerPatchers:function(t,i){u[t]=function(){var t=arguments;e.forEach(i,function(e){e.apply(null,t)})}},registerCustomMeasure:function(e,t){c[e]=t},registerCustomLayoutFunction:T,registerCustomDomChangesFunction:function(e,t){T(e,function(e,i){return t(i[e])})},registerRequestToMeasureDom:function(e){l[e]=!0},registerRequestToMeasureChildren:function(e,t){g[e]=t},registerAdditionalMeasureFunction:function(t,i,n){e.isString(n)&&!e.isEmpty(n)?(d[t]=e.isPlainObject(d[t])?d[t]:{},d[t][n]=i):d[t]=i}}}),define("layout/util/bodyNodePatcher",["zepto","lodash","experiment"],function(e,t,i){"use strict";return{updateBodyNodeStyle:function(n){var o=e("body"),r=e("html");if(n.isQaMode()&&o.addClass("qa-mode"),i.isOpen("sv_noSpecificCompLayout")||o.attr("data-js-loaded",!0),n.isMobileView()?(o.addClass("device-mobile-optimized"),r.addClass("device-mobile-optimized")):n.isMobileDevice()||n.isTabletDevice()?o.addClass("device-mobile-non-optimized"):(o.removeClass("device-mobile-optimized").removeClass("device-mobile-non-optimized"),r.removeClass("device-mobile-optimized")),n.isMobileDevice()){var a=t.assign({},n.os,n.browser),s=t(a).keys().filter(function(e){return!0===a[e]}).map(function(e){return"device-"+e}).join(" ");r.addClass(s)}var u=o.css("overflow"),c=n.renderFlags.allowSiteOverflow?null:"hidden";u!==c&&o.css("overflow",c)}}}),define("layout/util/iframesPatcher",["zepto","lodash"],function(e,t){"use strict";return{setIframesSrc:function(i){var n=(i||e)("iframe[data-src]");t.forEach(n,function(e){var t=e.getAttribute("src"),i=e.getAttribute("data-src");i&&(t!==i&&e.setAttribute("src",i),e.removeAttribute("data-src"))})}}}),define("layout/util/layout",["zepto","lodash","layout/util/anchors","layout/util/layoutAlgorithm","warmupUtils","layout/util/createDOMPatchers","layout/util/singleCompLayout","layout/util/bodyNodePatcher","layout/util/iframesPatcher","experiment"],function(e,t,i,n,o,r,a,s,u,c){"use strict";var l={},g={},d={},h=o.loggingUtils.performanceMetrics.RE_LAYOUT;function p(e,i){var n=t.last(e),r=o.dataUtils.getChildrenData(n,i);return t.transform(r,function(e,t){e[t.id]=!0},{})}function m(e){var i=e[e.length-2];return t.set({},i.id,!0)}var f={"wysiwyg.viewer.components.Group":p,"wysiwyg.viewer.components.BoxSlideShow":p,"wysiwyg.viewer.components.StripContainerSlideShow":p,"wysiwyg.viewer.components.StripColumnsContainer":p,"wysiwyg.viewer.components.Column":function(e,i){var n=e[e.length-2],r=o.dataUtils.getChildrenData(n,i),a=[n].concat(r);return t.transform(a,function(e,t){e[t.id]=!0},{})},"wysiwyg.viewer.components.StripContainerSlideShowSlide":m,"wysiwyg.viewer.components.BoxSlideShowSlide":m};function y(e,t,i){return e&&Math.max(t,Math.min(i,e))}function w(e,i,n){var r,a=i.getSiteData(),s=t.clone(e.layout),u={dataItem:e.dataItem||null,propertiesItem:e.propertiesItem||null,layout:s,styleItem:null,id:e.id,type:(r=e,r.componentType||r.documentType),structure:e,rootId:n};return u.layout&&(t.isFinite(u.layout.height)&&(u.layout.height=y(u.layout.height,o.siteConstants.COMP_SIZE.MIN_HEIGHT,o.siteConstants.COMP_SIZE.MAX_HEIGHT)),t.isFinite(u.layout.width)&&(u.layout.width=y(u.layout.width,o.siteConstants.COMP_SIZE.MIN_WIDTH,o.siteConstants.COMP_SIZE.MAX_WIDTH))),e.dataQuery&&!u.dataItem&&(u.dataItem=a.getDataByQuery(e.dataQuery,n)),e.propertyQuery&&!e.propertiesItem&&(u.propertiesItem=a.getDataByQuery(e.propertyQuery,n,a.dataTypes.PROPERTIES)),(e.behaviorQuery||e.behaviors)&&(u.behaviorsItem=e.behaviors||t.get(a.getDataByQuery(e.behaviorQuery,n,a.dataTypes.BEHAVIORS),"items")),e.designQuery&&(u.designDataItem=a.getDataByQuery(e.designQuery,n,a.dataTypes.DESIGN)),e.styleId&&(u.styleItem=a.getDataByQuery(e.styleId,n,a.dataTypes.THEME)),u}function v(e,i,n,o,r,s){var u=r.getSiteData(),c=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return a.patchComponent.apply(a,[e].concat(t))}}(e,i,o,u);t(n).keys().filter(function(e){return t=e,!Boolean(o.collapsed[t])&&i[e];var t}).map(function(e){return w(n[e],r,s)}).forEach(c)}function C(e,i,n,o,a){var s=r(n);t.forEach(e,function(e,t){v(s,n,o[t],i,a,e.pageId)})}function M(t,i,n,o,r,a,s){var u=e(i(t.id));u.attr("data-leaving")||(d[t.componentType]?function(e,t,i,n,o,r,a){var s=w(e,o,r);S(e,t,n),I(s,o,t,i,n,r,a),b(s,t,i,n,o,e,a)}(t,i,n,o,r,a,s):function(e,t,i,n,o,r,a){var s=w(e,o,r);S(e,t,n),b(s,t,i,n,o,e,a),I(s,o,t,i,n,r,a)}(t,i,n,o,r,a,s),u.attr("data-hidden")?n.isHidden[t.id]=!0:n.isHidden[t.id]=!1)}function S(e,t,i){var n=t(e.id);n&&(i[e.id]=n)}function I(e,i,n,r,a,s,u){var c=i.getSiteData(),l=o.dataUtils.getChildrenData(e.structure,c.isMobileView());t.forEach(l,function(e){M(e,n,r,a,i,s,u)})}function b(t,i,n,o,r,s,u){if(!(c=u)||c[t.id]){var c,l=e(i(s.id));n.collapsed[s.id]=!!l.attr("data-collapsed"),a.measureComponentChildren(t,i,n,o,r.getSiteData()),a.measureComponent(s,t,i,n,o,r)}}function T(e,i,n){var r=t.sortBy(t.keys(e),function(e){return"inner"===e?1:0});t.forEach(r,function(r){!function e(i,n,r,a,s,u){var c=i.id;if(u=u||n.fixed[c],c){var l=n.top[c]||0,g=n.left[c]||0;n.fixed[c]?(a=l,s=g):(a+=l,s+=g),n.absoluteTop[c]=a,n.absoluteLeft[c]=s,u&&(n.shownInFixed[c]=!0)}var d=o.dataUtils.getChildrenData(i,r);t.forEach(d,function(t){e(t,n,r,a,s,u)})}(e[r].structure,i,n,"inner"===r?i.absoluteTop.SITE_PAGES:0,"inner"===r?i.absoluteLeft.SITE_PAGES:0)})}function A(e,n,o,r,a,s,u,c){var l=[],d={},h=a.getSiteData(),p=h.isMobileView();return t.forEach(e,function(e){var o=w(e.structure,a),m=g[o.structure.componentType].measure(o,e.domNode,n,r,h,function(t){M(t,e.getDomNodeFunc,n,r,a,o.rootId,c)},function(t){return i.enforceAnchors(t,n,e.anchorsMap,p,u,s,c)});m&&(m.needsAdditionalInnerLayout&&l.push(e),m.changedCompsMap&&t.assign(d,m.changedCompsMap),m.needsParent&&c&&(c[e.parentId]=!0))}),t.forEach(e,function(e){var t=w(e.structure,a);e.skipPatch||g[t.structure.componentType].patch(t,n,o,r,a.getSiteData())}),{compsToInnerLayoutAgain:l,changedComps:d}}function D(e,i,n,s,u,c,l){var d=s.getSiteData(),h=d.getViewMode(),p={},m=[];t.forOwn(e,function(e){var i=t.get(e,"structure.id"),n=t.get(d.anchorsMap,[i,h]);!function e(i,n,r,s,u,c,l){var d=i.id&&n(i.id);if(d&&a.isComponentDead(d))return!1;var h=!c||!!c[i.id],p=r.getSiteData().isMobileView(),m=o.dataUtils.getChildrenData(i,p),f=t.reduce(m,function(t,o){return e(o,n,r,s,u,c,i.id)||t},!1),y=h||f;return d&&g[i.componentType]&&y&&s.push({anchorsMap:u,structure:i,getDomNodeFunc:n,domNode:d,parentId:l}),y}(e.structure,e.getDomNodeFunc,s,m,n,l,null)});for(var f=m,y=0,w=r(n);f.length&&y<3;){var v=A(f,i,w,n,s,u,c,l);f=v.compsToInnerLayoutAgain,p=t.assign(p,v.changedComps),y++}return p}var E=void 0;function L(i,n){var o=(E=e("#SITE_ROOT")).offset()||{top:0},r=c.isOpen("onboardingviewportmode")?function(e){var i=t.get(e.renderFlags,"onboardingViewportMode","auto");{if("parent"===i)return window.parent.document.documentElement.clientHeight;if(/fixed:/.test(i))return parseInt(i.split(":")[1],10)}return window.document.documentElement.clientHeight}(i):window.document.documentElement.clientHeight,a=i.mobile.getScreenDimensions();n.clientWidth=i.getBodyClientWidth(),n.clientHeight=r,n.width.screen=i.getScreenWidth(),n.width.site=i.getSiteWidth(),n.height.screen=n.clientHeight,n.innerHeight.screen=window.innerHeight,n.innerWidth.screen=window.innerWidth,n.height.device=a.height,n.width.device=a.width,n.availHeight.device=a.availHeight,n.availWidth.device=a.availWidth,n.devicePixelRatio=i.mobile.getDevicePixelRatio(),n.siteOffsetTop=o.top,n.siteMarginBottom=t.parseInt(E.css("padding-bottom"),10)||0,n.custom.wixTopAdHeight=i.getWixTopAdHeight()}function P(e,i,n){var r=t.last(e),a={};i[r.id]&&t.assign(a,function(e,i){var n=null,o=t.last(e);if(o&&e.length>1){var r=t.get(e,e.length-2);"wysiwyg.viewer.components.Group"===r.componentType&&((n={})[r.id]=!0)}return o&&f[o.componentType]?t.defaults({},n,f[o.componentType](e,i)):n}(e,n));var s=o.dataUtils.getChildrenData(r,n);return t.forEach(s,function(o){t.assign(a,P(e.concat([o]),i,n))}),a}function x(e,n,r,a,s){var u={};return t.assign(u,n,r,i.HARD_WIRED_COMPS_TO_RELAYOUT,o.arrayUtils.toTrueObj(a)),t.assign(u,function(e,i,n){var o={};return t.forOwn(i,function(i){t.assign(o,P([i.structure],e,n))}),o}(u,e,s)),u}function H(e){var i=t(e).values().flatMap(t.keys).value();return o.arrayUtils.toTrueObj(i)}var _=function(e){return!t.isEmpty(t.get(e,"inner.pageId"))||!t.isEmpty(e.pageId)};return{registerLayoutInnerCompsFirst:function(e,t,i){g[e]={measure:t,patch:i}},registerMeasureChildrenFirst:function(e,t){d[e]=t},registerPatcher:function(e,t){a.registerPatcher(e,t)},registerPatchers:function(e,t){a.registerPatchers(e,t)},registerCustomMeasure:function(e,t){a.registerCustomMeasure(e,t)},registerCustomLayoutFunction:function(e,t){a.registerCustomLayoutFunction(e,t)},registerCustomDomChangesFunction:a.registerCustomDomChangesFunction,registerAdditionalMeasureFunction:function(e,t,i){a.registerAdditionalMeasureFunction(e,t,i)},registerRequestToMeasureDom:function(e){a.registerRequestToMeasureDom(e)},registerRequestToMeasureChildren:function(e,t){a.registerRequestToMeasureChildren(e,t)},registerShapesMeasureFunction:function(e,i){t.forEach(e,function(e){return a.registerAdditionalMeasureFunction(e,i)})},updateBodyNodeStyle:s.updateBodyNodeStyle,reLayout:function(e,i,r,a,s,c){o.loggingUtils.performance.start(h),i.getLayoutMechanism()===o.constants.LAYOUT_MECHANISMS.MESH&&(s=null);var g=i.getSiteData(),d=g.isMobileView();delete e[void 0];var p,m,f=function(e,i){var n=l[e.siteId]||{};return t.omitBy(n,t.keys(i))}(g,s),y=s?(p=g.measureMap,m=s,t.forOwn(m,function(e,t){delete p.top[t],delete p.height[t],delete p.zIndex[t]}),p):{pageBottomByComponents:{},collapsed:{},isHidden:{},height:{},width:{},availHeight:{},availWidth:{},innerWidth:{},innerHeight:{},custom:{},containerHeightMargin:{},minHeight:{},minWidth:{},top:{},left:{},absoluteTop:{},absoluteLeft:{},fixed:{},shownInFixed:{},zIndex:{},isDeadComp:{},clientWidth:0,skipPatch:{},shrinkableContainer:{},injectedAnchors:{}};L(g,y);var w=D(e,y,f,i,a,r,s);s&&(s=x(e,s,w,i.getAllRenderedRootIds(),d)),v=e,S=y,I=f,b=i,A=s,t.forOwn(v,function(e){M(e.structure,e.getDomNodeFunc,S,I,b,e.pageId,A)});var v,S,I,b,A;!function(e,i){var n=t.filter(t.values(i),_);t.forEach(n,function(t){var i=t.pageId||t.inner.pageId;e.shrinkableContainer[i]=!0,e.left[i]=0})}(y,e);var E,P,R,B=i.getLayoutMechanism()===o.constants.LAYOUT_MECHANISMS.ANCHORS?n.enforceAllStructures(e,y,g,r,a,s):(E=e,P=y,R=g.isMobileView(),t.mapValues(E,function(e){return function e(i,n){return t.has(P.height,n.id)?t.assign(_defineProperty({},n.id,n),i,t.reduce(o.dataUtils.getChildrenData(n,R),e,{})):i}({},e.structure)}));return T(e,y,d),C(e,y,f,B,i),g.imageLoader.loadAllImages(g),u.setIframesSrc(c),l[g.siteId]=f,o.loggingUtils.performance.finish(h,g.isViewerMode()),{measureMap:y,reLayoutedCompsMap:H(B)}},enforceAndPatch:function(e,t){var i=t.getSiteData(),o=i.measureMap,r=n.enforceAllStructures(e,o,i,!1,null,{}),a=l[i.siteId];return T(e,o,i.isMobileView()),C(e,o,a,r,t),H(r)},enforceAnchors:i.enforceAnchors}}),define("layout/util/optimizedCssImageLayout",["lodash","zepto","warmupUtils"],function(e,t,i){"use strict";var n=250,o=i.mediaConsts.balataConsts;function r(e,t,i,n){n===o.BG_IMAGE?e.css(t,{backgroundImage:i?'url("'+i+'")':""}):e.attr(t,{src:i})}return{cacheCssImageMeasureData:function(i,n){var o=t(n);i.type=o.data("type"),i.currentCss=o.data("image-css"),i.currentCss&&e.isString(i.currentCss)&&(i.currentCss=JSON.parse(i.currentCss)),i.previousBackgroundImageCssUrl=o.css("backgroundImage")},patchCssImage:function(t,o,a,s,u,c){if(g=t.currentCss,(d=s)&&(!g||e.some(d,function(e,t){return e!==g[t]}))){a.css(o,s);var l=e.defaults(s,t.currentCss);a.data(o,{"image-css":JSON.stringify(l)})}var g,d,h,p,m=(h=u,p=c,h?i.urlUtils.isExternalUrl(h)?h:i.urlUtils.joinURL(p.getStaticMediaUrl(),h):"");f=t.previousBackgroundImageCssUrl,y=m,e.includes(f,y)&&Boolean(f)===Boolean(y)||function(t,i,o,a,s){var u=o.previousBackgroundImageCssUrl;s.imageResizeHandlers=s.imageResizeHandlers||{},u&&a?(s.imageResizeHandlers[t]||(s.imageResizeHandlers[t]=e.debounce(r,n,{trailing:!0})),s.imageResizeHandlers[t](i,t,a,o.type)):r(i,t,a,o.type)}(o,a,t,m,c);var f,y}}}),define("layout/bi/events.json",[],function(){return{IMAGE_UPSCALING:{eventId:348,adapter:"ugc-viewer",params:{ow:"originalWidth",oh:"originalHeight",tw:"targetWidth",th:"targetHeight",url:"url"}}}}),define("layout/specificComponents/imageLayout",["lodash","zepto","imageClientLib","warmupUtils","layout/bi/events.json","layout/util/rootLayoutUtils","layout/util/layout"],function(e,t,i,n,o,r,a){"use strict";var s=r.references,u=r.measureNodeImage,c=n.loggingUtils.logger.reportBI;function l(e,t,o){return n.imageUtils.getImageComputedProperties(i,e,t.getMediaFullStaticUrl.bind(t),t.currentUrl,t.mobile.getDevicePixelRatio(),o)}function g(t,i,n,o,r){var a,s=(a=i,e.pickBy(a,function(e){return""!==e})),u=t.css.container,c=e.assign({position:"absolute",width:n,height:o},u,s);return e.isNumber(r)&&(c.opacity=r),c}function d(t,i,n,r,a,u,d){var h,p=(h=n.custom[t].renderedStyles,h&&h.split?h.split(";").reduce(function(e,t){var i=t.split(":");return i[0]&&i[1]&&(e[i[0].trim()]=i[1].trim()),e},{}):{}),m=n.custom[t]&&n.custom[t].isZoomed;u=u||{width:n.width[t],height:n.height[t]};var f={imageData:a,containerWidth:m?a.width:u.width,containerHeight:m?a.height:u.height,displayMode:a.displayMode,alignType:d},y=void 0;n.custom[t].isSvgImage?function(t,i,n,o,r,a){var u=n.custom[t]&&n.custom[t].isSvgImage,c=n.custom[t]&&n.custom[t].filterId,l=o.containerWidth,g=o.containerHeight;if(!o.containerWidth||!o.containerHeight||!o.imageData.uri)return null;i.css(t+s.SVG_REF,{width:l,height:g}),u&&(i.attr(t+s.SVG_REF,a.attr.container),i.attrNS(t+s.IMAGE_REF,[{ns:"http://www.w3.org/1999/xlink",attribute:"xlink:href",value:a.uri}]),n.custom[t].hasPattern?(i.attr(t+s.RECT_REF,{filter:"url(#"+c+")",width:a.attr.container.width,height:a.attr.container.height,x:0,y:0}),i.attr(t+s.PATTERN_REF,a.attr.img),i.attr(t+s.IMAGE_REF,{width:a.attr.img.width,height:a.attr.img.height})):i.attr(t+s.IMAGE_REF,e.assign({filter:"url(#"+c+")"},a.attr.img)))}(t,i,n,f,0,y=l(f,r,"svg")):(y=l(f,r,"img"),w=t,v=y,i.css(w+s.IMAGE_REF,e.get(v,["css","img"])));var w,v,C=g(y,p,u.width,u.height,a.opacity);i.css(t,C);var M={patchers:i,id:t,isSvg:n.custom[t].isSvgImage,src:e.get(y,"uri"),absoluteTop:n.absoluteTop[n.custom[t].parentId]||0,height:u.height||n.height[t],currentSrc:n.custom[t].imgSrc};I=f,b=M,T=y,(S=r).isViewerMode()&&T.uri!==b.currentSrc&&e.includes(T.uri,"lg_1")&&c(S,o.IMAGE_UPSCALING,{originalWidth:I.imageData.width,originalHeight:I.imageData.height,targetWidth:Math.round(I.containerWidth),targetHeight:Math.round(I.containerHeight),devicePixelRatio:S.mobile.getDevicePixelRatio(),url:b.src});var S,I,b,T;r.imageLoader.loadImage(M,r)}function h(i,n,o,r,a){var s=n[i].querySelectorAll("*[data-image-info]"),c=[],l={};e.forEach(s,function(e){var i=e.getAttribute("id");n[i]=e,l[i]=t(n[i]).data("imageInfo"),u(i,o,n,r,a),c.push(i)});return function(t){e.forEach(c,function(e){var i=l[e];d(e,t,o,r,i.imageData,null,i.alignType)})}}return a.registerCustomMeasure("core.components.Image",u),a.registerCustomLayoutFunction("wysiwyg.viewer.components.LinkBar",h),a.registerCustomLayoutFunction("wysiwyg.viewer.components.FlashComponent",h),{patchNodeImage:d,measureNodeImage:u}}),define("layout/specificComponents/bgImageLayout",["lodash","layout/util/layout","warmupUtils","layout/util/optimizedCssImageLayout","layout/specificComponents/imageLayout"],function(e,t,i,n,o){"use strict";var r=i.mediaConsts.balataConsts;function a(t,n,o,r,a,s){var u=a.mobile.getDevicePixelRatio(),c={width:r.width,height:r.height,alignment:n,htmlTag:s||"bg",pixelAspectRatio:u},l={id:o.uri,width:o.width,height:o.height},g=e.defaults({quality:85},o.quality||{});return i.imageClientApi.getData(t,l,c,g,a.browser)}function s(e){var t=e.mediaRef;return t&&"WixVideo"===t.type&&(t=t.posterImageRef),t}return t.registerRequestToMeasureChildren("wysiwyg.viewer.components.background.bgImage",[["image"]]),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.BgImageStrip",[["bg"]]),{measureLegacyBgImageStrip:function(e,t,i){var o=e+"bg";i[o]&&(t.custom[e]={},n.cacheCssImageMeasureData(t.custom[e],i[o]))},measureBgImageBalata:function(e,t,i,a,s){var u=e+r.MEDIA+r.CONTENT,c=i[u].getAttribute("data-type");if(t.custom[e]=t.custom[e]||{},t.custom[e].type=c,c===r.IMAGE)o.measureNodeImage(u,t,i,a,s);else{var l=u+"image";i[l]=i[u].querySelector("#"+l);var g=i[l];t.custom[u]={},n.cacheCssImageMeasureData(t.custom[u],g)}},patchBgImage:function(t,i,u,c,l,g,d,h){var p=c.custom[t].type,m=(f=l,e.isUndefined(f.designDataItem)?f.dataItem.background:f.designDataItem.background);var f;if(p===r.IMAGE){var y={width:h.width,height:d},w=e.assign({displayMode:m.fittingType},s(m));o.patchNodeImage(i,u,c,g,w,y,m.alignType)}else{var v=i+"image",C=function(e,t,i,n,o){var r=i.width,u=n||i.height,c=s(e);return a(e.fittingType,e.alignType,c,{width:r,height:u},o,t)}(m,"bg",h,d,g),M=e.assign({height:d},C.css.container);n.patchCssImage(c.custom[i],v,u,M,C.uri,g)}},patchLegacyBgImageStrip:function(e,t,o,r,s,u){var c=o.custom[e],l=e+"bg";if(c){var g=r.dataItem;if(!g||(h=g.uri,!h||i.urlUtils.isExternalUrl(h)))return;var d=a(r.propertiesItem.fittingType,r.propertiesItem.alignType,g,u,s);n.patchCssImage(c,l,t,d.css.container,d.uri,s)}var h}}}),define("layout/specificComponents/html5VideoLayout",["lodash","warmupUtils","imageClientLib","layout/specificComponents/imageLayout"],function(e,t,i,n){"use strict";var o=t.containerBackgroundUtils,r=t.mediaConsts.balataConsts;function a(t,n,r,a,s){var u={position:"absolute",minWidth:0,minHeight:0,top:0,left:0},c=t.mediaRef;if(!c||"WixVideo"!==c.type)return u;var l,g,d,h,p=e.find(c.qualities,{quality:a}),m=(l=n.width,g=n.height,d=p.width,h=p.height,{wScale:l/d,hScale:g/h}),f=function(e,t,n,o){var r=void 0,a=void 0,s=void 0,u=i.fittingTypes;switch(e){case u.SCALE_TO_FILL:s=Math.max(t.wScale,t.hScale),r=Math.round(n*s),a=Math.round(o*s);break;case u.SCALE_TO_FIT:s=Math.min(t.wScale,t.hScale),r=Math.round(n*s),a=Math.round(o*s)}return{width:r,height:a}}(t.fittingType,m,p.width,p.height),y=function(e,t,n){var o=n.width,r=n.compRootHeight,a=Math.round((r-t.height)/2),s=Math.round((o-t.width)/2),u={},c=i.alignTypes;switch(e){case c.CENTER:u.left=s,u.top=a;break;case c.LEFT:u.left=0,u.top=a;break;case c.RIGHT:u.left=o-t.width,u.top=a;break;case c.TOP:u.left=s,u.top=0;break;case c.BOTTOM:u.left=s,u.top=r-t.height;break;case c.TOP_LEFT:u.left=0,u.top=0;break;case c.TOP_RIGHT:u.left=o-t.width,u.top=0;break;case c.BOTTOM_LEFT:u.left=0,u.top=r-t.height;break;case c.BOTTOM_RIGHT:u.left=o-t.width,u.top=r-t.height}return u}(t.alignType,f,n);return u={position:"absolute",minWidth:f.width,minHeight:f.height,left:y.left,top:o.isFullScreenByEffect(s,r.renderFlags.renderFixedPositionBackgrounds)?"":y.top}}function s(e){return e.designDataItem&&e.designDataItem.background?e.designDataItem.background:e.dataItem.background}function u(t){var i=s(t);return!e.isEmpty(i.mediaRef.qualities)}return{patchBgVideo:function(t,i,r,c,l,g,d){var h=s(c),p=d.width,m=d.height,f={width:p,height:g,top:0},y=e.assign({displayMode:h.fittingType},h.mediaRef.posterImageRef);n.patchNodeImage(t+"poster",i,r,l,y,f,h.alignType);var w=r.custom[t];if(u(c)){var v=!l.isTouchDevice(),C=o.getBgEffectName(c.behaviorsItem,v,l.isMobileView()),M=a(h,{width:p,height:g,compRootHeight:m},l,w.quality,C);i.attr(t+"video",{width:M.minWidth,height:M.minHeight}),i.css(t+"video",M)}else i.css(t+"poster",{position:"absolute",top:"0px"}),i.attr(t+"mp4",{src:""}),w.videoNode.load()},measureBgVideo:function(e,t,i,o,a){var s=e+r.POSTER;t.custom[s]={},n.measureNodeImage(s,t,i,o,a);var c=i[e],l=c.firstChild;i[e+"video"]=l,t.custom[e]={},u(a)?t.custom[e]={quality:c.getAttribute("data-quality"),videoNode:l}:t.custom[e]={videoNode:l}}}}),define("layout/specificComponents/youtubeVideoLayout",["lodash","warmupUtils","layout/specificComponents/imageLayout"],function(e,t,i){"use strict";var n=t.mediaConsts.balataConsts;return{patchBgVideo:function(t,n,o,r,a,s,u){var c,l=(c=r,c.designDataItem&&c.designDataItem.background?c.designDataItem.background:c.dataItem.background),g=u.width,d=u.height;n.attr(t+"video",{"min-width":g,"min-height":d,width:g,height:d}),n.css(t+"video",{position:"absolute"});var h={width:g,height:s,top:0},p=l.mediaRef.posterImage||{uri:"//img.youtube.com/vi/"+l.mediaRef.videoId+"/hqdefault.jpg"},m=e.assign({displayMode:l.fittingType},p);i.patchNodeImage(t+"poster",n,o,a,m,h,l.alignType)},measureBgVideo:function(e,t,o,r,a){var s=e+n.POSTER,u=o[e];o[e+"video"]=u.firstChild,t.custom[e]={},t.custom[s]={},i.measureNodeImage(s,t,o,r,a)}}}),define("layout/specificComponents/balataLayout",["lodash","warmupUtils","layout/specificComponents/bgImageLayout","layout/specificComponents/html5VideoLayout","layout/specificComponents/youtubeVideoLayout","experiment"],function(e,t,i,n,o,r){"use strict";var a=t.mediaConsts.balataConsts,s=a.BALATA,u=a.MEDIA,c=a.CONTENT,l=a.OVERLAY,g=a.POSTER,d=t.containerBackgroundUtils;function h(e){var t=e+s,i=t+u;return{balataId:t,mediaId:i,mediaContentId:i+c}}function p(t,a,s,u,c,l){var g=h(t),d=g.balataId,p=g.mediaContentId,m=!!s[d];if(m){var f=s[d].dataset,y=f.enableVideo,w=f.bgEffectName,v=f.mediaType,C=f.mediaVideoType,M=f.renderFixedPosition,S=f.useClipPath;a.custom[d]={hasBalata:m,enableVideo:y,bgEffectName:w,mediaType:v,mediaVideoType:C,renderFixedPosition:M,useClipPath:S};var I=l||function(t,i,n){var o=e.defaultTo(t.height[n],i.offsetHeight);return r.isOpen("sv_kill980")?{top:0,left:0,height:o,width:i.offsetWidth,absoluteLeft:i.getBoundingClientRect().left}:{top:0,left:0,height:o,width:t.width[n],absoluteLeft:t.absoluteLeft[n]}}(a,s[d],t);e.forEach(I,function(e,t){a[t][d]=e}),v&&("Image"!==v&&y?"WixVideo"===v?n.measureBgVideo(p,a,s,u,c):"Video"===v&&"YOUTUBE"===C&&o.measureBgVideo(p,a,s,u,c):i.measureBgImageBalata(d,a,s,u,c))}}return{BALATA_PATHS_TO_REQUEST_MEASURE:[[s],[s,u],[s,u,c],[s,u,c,g],[s,l],[s,l,l]],measure:p,measureDomOnly:function(e,t,i,n,o){var r=h(e).balataId;p(e,t,i,n,o,{top:0,left:0,width:(a=i[r]).offsetWidth,height:a.offsetHeight,absoluteLeft:a.getBoundingClientRect().left});var a},patch:function(t,a,s,u,c,l,g){var p=h(t),m=p.balataId,f=p.mediaId,y=p.mediaContentId,w=s.custom[m]||{},v=w.hasBalata,C=w.enableVideo,M=w.bgEffectName,S=w.mediaType,I=w.mediaVideoType,b=w.renderFixedPosition,T=w.useClipPath;if(v){var A,D,E=l||(A=s,D=m,{top:A.top[D],left:A.left[D],width:A.width[D],height:A.height[D],absoluteLeft:A.absoluteLeft[D]});l||(E.height=e.defaultTo(s.height[t],E.height));var L=d.getHeightByEffect(M,s,E.height),P=function(e,t,i){var n={};return r.isOpen("sv_kill980")||i||(n.left=e.left,n.width=e.width),t?n["-webkit-clip-path"]="border-box":n.clip="rect(0px,"+e.width+"px,"+e.height+"px,0px)",n}(E,T,g);if(a.css(m,P),S){a.css(f,{width:E.width,height:L,left:(x=M,H=b,_=E.absoluteLeft||0,d.isFullScreenByEffect(x,!!H)?Math.floor(_):0)});var x,H,_;"Image"!==S&&C?"WixVideo"===S?n.patchBgVideo(y,a,s,u,c,L,E):"Video"===S&&"YOUTUBE"===I&&o.patchBgVideo(y,a,s,u,c,L,E):i.patchBgImage(m,y,a,s,u,c,L,E)}}}}}),define("layout/specificComponents/screenWidthLayouts/screenWidthContainerLayout",["layout/util/layout"],function(e){"use strict";function t(e,t,n){t.left[e]=0,i(e,t,n)}function i(e,t,i){var n=t.height[e+"inlineContent"]||0;t.containerHeightMargin[e]=n?i[e].offsetHeight-n:0}var n="mobile.core.components.Container";return e.registerRequestToMeasureDom(n),e.registerRequestToMeasureChildren(n,[["inlineContent"]]),e.registerCustomMeasure(n,i),e.registerCustomMeasure("wysiwyg.viewer.components.ScreenWidthContainer",t),{measureContainer:i,measureScreenWidthContainer:t}}),define("layout/specificComponents/matrixGalleryLayout",["layout/util/layout","zepto","lodash","warmupUtils","imageClientLib","layout/specificComponents/imageLayout"],function(e,t,i,n,o,r){"use strict";var a=n.matrixCalculations,s=n.galleriesCommonLayout,u=n.matrixScalingCalculations,c=70,l=45;function g(e,n,r,c,l,g,d){var h,p,m,f,y,w=t(g),v=w.data("image-index"),C=i.defaults({displayMode:o.fittingTypes.SCALE_TO_FILL},l[v]),M=(h=C,p=r,m=n,f=c,y=w,u.getSizeAfterScaling({itemHeight:p,itemWidth:m,displayerData:h,imageMode:f.imageMode,heightDiff:parseInt(y.data("height-diff"),10)||0,widthDiff:parseInt(y.data("width-diff"),10)||0,bottomGap:parseInt(y.data("bottom-gap"),10)||0})),S=s.getContainerSize(M.imageWrapperSize,w),I=a.getItemPosition(d,n,r,c.margin,c.numCols);return{id:g.id,imageData:C,imageNodeId:g.id+"image",imageWrapperId:g.id+"imageWrapper",containerSize:S,sizeAfterScaling:M,position:I}}function d(e,n,o,r,u){s.measureFlexibleHeightGallery(e,n,o);var d=t(o[e]),h=o[e+"itemsContainer"],p=t(h).children(),m=u.dataItem.items;n.width[e]=Math.max(l,n.width[e]),n.height[e]=Math.max(c,n.height[e]);var f=parseInt(d.data("height-diff"),10)||0,y=parseInt(d.data("width-diff"),10)||0,w=parseInt(d.data("presented-row"),10)||0,v=u.propertiesItem,C=a.getItemWidth(v.margin,v.numCols,n.width[e],y),M=a.getItemHeight(v.margin,n.height[e],w,f);n.custom[e]={displayers:i.map(p,i.partial(g,e,C,M,u.propertiesItem,m))}}function h(e,t,n,o,a){var u=n.height[e],c=n.width[e],l=n.custom[e];t.css(e+"itemsContainer",{height:u,width:c}),t.css(e,{height:u,width:c}),i.forEach(l.displayers,function(e){var i=e.sizeAfterScaling;t.css(e.id,{height:i.displayerSize.height,width:i.displayerSize.width,left:e.position.left,top:e.position.top}),s.updateImageWrapperSizes(t,e.imageWrapperId,i),r.patchNodeImage(e.imageNodeId,t,n,a,e.imageData,e.containerSize)})}function p(e,t,n){var o=[["itemsContainer"]];return i.forEach(n.dataItem.items,function(e){var t={pathArray:[e.id,"image"],type:"core.components.Image"},i=[e.id,"imageWrapper"],n=[e.id];o.push(t,i,n)}),o}return e.registerRequestToMeasureDom("wysiwyg.viewer.components.MatrixGallery"),e.registerCustomMeasure("wysiwyg.viewer.components.MatrixGallery",d),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.MatrixGallery",p),e.registerPatcher("wysiwyg.viewer.components.MatrixGallery",h),{measureMatrixGallery:d,getChildrenIdToMeasure:p,patchMatrixGallery:h}}),define("layout/specificComponents/paginatedGridGalleryLayout",["layout/util/layout","zepto","lodash","warmupUtils","imageClientLib","layout/specificComponents/imageLayout"],function(e,t,i,n,o,r){"use strict";var a=n.matrixCalculations;function s(e,t,n,s,u,c,l,g,d){i.forEach(e,function(e,g){var h=a.getItemPosition(g,t,n,s.margin,s.numCols);c.css(e.imageItemId,{width:t,height:n,left:h.left,top:h.top});var p=i.assign({},d.dataItem.items[e.imageIndex],{displayMode:o.fittingTypes.SCALE_TO_FILL});r.patchNodeImage(e.imageItemId,c,l,u,p,{width:t,height:n})})}function u(e,t,n){var o=[["itemsContainer"]];return i.forEach(n.dataItem.items,function(e){o.push({pathArray:[e.id],type:"core.components.Image"})}),o}function c(e){return i.map(e,function(e){return{imageItemId:e.id,imageIndex:t(e).data("image-index")}})}function l(e,i,n){var o=i.custom[e]={},r=t(n[e]);o.heightDiff=parseInt(r.data("height-diff"),10),o.widthDiff=parseInt(r.data("width-diff"),10);var a=t(n[e+"itemsContainer"]);o.nextItemsData=c(a.children('div[data-page-desc="next"]')),o.prevItemsData=c(a.children('div[data-page-desc="prev"]')),o.currItemsData=c(a.children('div[data-page-desc="curr"]'))}function g(e,t,i,n,o){var r=i.height[e],u=i.width[e],c=i.custom[e],l=n.propertiesItem;t.css(e+"itemsContainer",{width:u-c.widthDiff,height:r-c.heightDiff});var g=a.getItemWidth(l.margin,l.numCols,u,c.widthDiff),d=a.getAvailableRowsNumber(l.maxRows,l.numCols,n.dataItem.items.length),h=a.getItemHeight(l.margin,r,d,c.heightDiff);s(c.nextItemsData,g,h,l,o,t,i,0,n),s(c.prevItemsData,g,h,l,o,t,i,0,n),s(c.currItemsData,g,h,l,o,t,i,0,n)}return e.registerPatcher("wysiwyg.viewer.components.PaginatedGridGallery",g),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",u),e.registerCustomMeasure("wysiwyg.viewer.components.PaginatedGridGallery",l),{patchPaginatedGridGallery:g,getChildrenIdToMeasure:u,customMeasurePaginatedGridGalleryLayout:l}}),define("layout/specificComponents/richtextLayout",["lodash","layout/util/layout"],function(e,t){"use strict";var i="wysiwyg.viewer.components.WRichText";function n(t,i,n){var o=n[t],r=e.has(o.dataset,"minHeight")?e.toNumber(o.dataset.minHeight):void 0,a="true"===o.dataset.packed,s=o.offsetHeight,u=Math.max(r||0,s);i.minHeight[t]=u,!a&&e.isUndefined(r)||(i.height[t]=u)}function o(e,t){t.css(e,{height:""})}return t.registerRequestToMeasureDom(i),t.registerCustomMeasure(i,n),t.registerPatcher(i,o),{richTextCompName:i,measureWRichText:n,patchWRichText:o}}),define("layout/specificComponents/slideShowLayout",["layout/util/layout","zepto","warmupUtils","imageClientLib","lodash","layout/specificComponents/imageLayout"],function(e,t,i,n,o,r){"use strict";var a=i.matrixScalingCalculations,s=i.galleriesCommonLayout;function u(e,i,r,u,c,l){var g=t(l),d=g.data("image-index"),h=o.defaults({displayMode:n.fittingTypes.SCALE_TO_FILL},c[d]),p=function(e,i,n,o,r){var s=t(r);return a.getSizeAfterScaling({itemHeight:i,itemWidth:n,displayerData:e,imageMode:o.imageMode,heightDiff:parseInt(s.data("height-diff"),10)||0,widthDiff:parseInt(s.data("width-diff"),10)||0,bottomGap:parseInt(s.data("bottom-gap"),10)||0})}(h,i,r,u,g),m=s.getContainerSize(p.imageWrapperSize,g);return{id:l.id,imageData:h,imageNodeId:l.id+"image",imageWrapperId:l.id+"imageWrapper",containerSize:m,sizeAfterScaling:p}}function c(e,i,n,r,a){s.measureFlexibleHeightGallery(e,i,n);var c=n[e+"itemsContainer"],l=t(c).children(),g=t(n[e]),d=i.height[e]-parseInt(g.data("height-diff"),10)||0,h=i.width[e]-parseInt(g.data("height-diff"),10)||0,p=a.dataItem.items;i.custom[e]={displayers:o.map(l,o.partial(u,e,d,h,a.propertiesItem,p))}}function l(e,t,i,n,a){var u=n.propertiesItem,c=i.height[e],l=i.width[e],g=a.isMobileDevice()||a.isMobileView(),d=i.custom[e].displayers;if(!o.isEmpty(d)){if("flexibleHeight"===u.imageMode){var h=o.last(d);c=h.sizeAfterScaling.displayerSize.height}t.css(e,{height:c,width:l}),o.forEach(d,function(e){t.css(e.id,{height:c,width:l}),s.updateImageWrapperSizes(t,e.imageWrapperId,e.sizeAfterScaling),r.patchNodeImage(e.imageNodeId,t,i,a,e.imageData,e.containerSize,g)})}}function g(e,t,i){var n=[["itemsContainer"]];return o.forEach(i.dataItem.items,function(e){var t={pathArray:[e.id,"image"],type:"core.components.Image"},i=[e.id,"imageWrapper"],o=[e.id];n.push(t,i,o)}),n}return e.registerRequestToMeasureDom("wysiwyg.viewer.components.SlideShowGallery"),e.registerCustomMeasure("wysiwyg.viewer.components.SlideShowGallery",c),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.SlideShowGallery",g),e.registerPatcher("wysiwyg.viewer.components.SlideShowGallery",l),{measureSlideShow:c,getChildrenIdToMeasure:g,patchSlideShow:l}}),define("layout/specificComponents/sliderGalleryLayout",["layout/util/layout","warmupUtils","imageClientLib","zepto","lodash","layout/specificComponents/imageLayout"],function(e,t,i,n,o,r){"use strict";var a=t.matrixScalingCalculations,s=t.galleriesCommonLayout;function u(e,t,r,u,c,l,g){var d=n(l),h={imageIndex:d.data("image-index"),width:d.data("displayer-width"),height:d.data("displayer-height"),uri:d.data("displayer-uri")},p={heightDiff:parseInt(d.data("height-diff"),10)||0,widthDiff:parseInt(d.data("width-diff"),10)||0,bottomGap:parseInt(d.data("bottom-gap"),10)||0},m=c&&c[h.imageIndex]?c[h.imageIndex]:h,f=function(e,t,i,n,o){var r=Math.floor(t+e);return a.getSizeAfterScaling({itemHeight:r,itemWidth:Math.floor(r*(o&&o.aspectRatio?o.aspectRatio:1)),displayerData:i,imageMode:o?o.imageMode:"clipImage",heightDiff:n.heightDiff,widthDiff:n.widthDiff,bottomGap:n.bottomGap})}(r,t,m=o.assign(m,{displayMode:i.fittingTypes.SCALE_TO_FILL}),p,u.propertiesItem);return{imageData:m,imageNodeId:e+"displayer"+g+"image",imageWrapperId:e+"displayer"+g+"imageWrapper",containerSize:s.getContainerSize(f.imageWrapperSize,d),sizeAfterScaling:f}}function c(e,t,i,r,a){var s=i[e+"images"],c=n(s).children(),l=o.get(a,"dataItem.items"),g=parseInt(n(i[e]).data("additional-height"),10)||0;t.custom[e]={displayers:o.map(c,o.partial(u,e,t.height[e],g,a,l)),additionalHeight:g}}function l(e,t,i,n,a){var u=i.height[e];t.css(e,{height:u});var c=i.custom[e];o.forEach(c.displayers,function(e){s.updateImageWrapperSizes(t,e.imageWrapperId,e.sizeAfterScaling),r.patchNodeImage(e.imageNodeId,t,i,a,e.imageData,e.containerSize)})}function g(e){var t=[["images"],["itemsContainer"]],i=n("#"+e+"images").children();return o.forEach(i,function(e,i){var n="displayer"+i,o={pathArray:[n,"image"],type:"core.components.Image"},r=[n,"imageWrapper"];t.push(o,r)}),t}return e.registerRequestToMeasureChildren("wysiwyg.viewer.components.SliderGallery",g),e.registerCustomMeasure("wysiwyg.viewer.components.SliderGallery",c),e.registerPatcher("wysiwyg.viewer.components.SliderGallery",l),{getChildrenIdToMeasure:g,measureSliderGalleryLayout:c,patchSliderGalleryLayout:l}}),define("layout/specificComponents/wPhotoLayout",["zepto","lodash","layout/util/layout","layout/specificComponents/imageLayout","imageClientLib","warmupUtils"],function(e,t,i,n,o,r){"use strict";var a={fitWidthStrict:o.fittingTypes.LEGACY_FIT_WIDTH,fitHeightStrict:o.fittingTypes.LEGACY_FIT_HEIGHT};function s(t,i,n){var o=e(n[t]),r=parseInt(o.data("content-padding-horizontal"),10),a=parseInt(o.data("content-padding-vertical"),10),s=parseFloat(o.data("exact-height"));i.height[t]=i.custom[t]&&i.custom[t].thisIsMyHeight||n[t].offsetHeight,i.custom[t]={marginWidth:r,marginHeight:a,exactHeight:s}}function u(e,i,s,u,c){var l,g=e+"img",d=e+"link",h=u.dataItem,p=u.propertiesItem,m=p&&p.displayMode||"fill",f=(l=m,l===o.fittingTypes.LEGACY_FIT_WIDTH?o.fittingTypes.LEGACY_FIT_HEIGHT:a[l]||l),y=r.imageUtils.getContainerSize(o,function(e,t,i){var n=t.height[e]-(t.custom[e].marginHeight||0),r=t.width[e]-(t.custom[e].marginWidth||0),a={width:r>0?r:t.width[e],height:n>0?n:t.height[e]},s=t.custom[e].exactHeight-(t.custom[e].marginHeight||0);return i===o.fittingTypes.LEGACY_FIT_HEIGHT&&Math.ceil(s)===a.height&&(a.height=s),a}(e,s,f),{width:h.width,height:h.height},f),w=r.layoutUtils.isVerticallyStretched(u.layout),v={width:r.layoutUtils.isHorizontallyStretched(u.layout)?"":y.width+s.custom[e].marginWidth,height:w?"":y.height+s.custom[e].marginHeight},C=t.assign({},t.pick(h,["width","height","uri","quality"]),{displayMode:f,crop:t.get(p,"overrideCrop")||h.crop});n.patchNodeImage(g,i,s,c,C,y),i.css(e,v),i.css(d,y)}var c={pathArray:["img"],type:"core.components.Image"};return i.registerRequestToMeasureDom("wysiwyg.viewer.components.WPhoto"),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.WPhoto",[c,["link"]]),i.registerPatcher("wysiwyg.viewer.components.WPhoto",u),i.registerCustomMeasure("wysiwyg.viewer.components.WPhoto",s),i.registerRequestToMeasureDom("wysiwyg.viewer.components.ClipArt"),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.ClipArt",[c,["link"]]),i.registerPatcher("wysiwyg.viewer.components.ClipArt",u),i.registerCustomMeasure("wysiwyg.viewer.components.ClipArt",s),{childImageComponent:c,patchNodePhoto:u,measurePhoto:s}}),define("layout/specificComponents/fiveGridLineLayout",["experiment","layout/util/layout","layout/util/rootLayoutUtils"],function(e,t,i){"use strict";t.registerPatcher("wysiwyg.viewer.components.FiveGridLine",function(t,n,o,r,a){var s=o.width.screen,u=i.getRootWidth(a,o,r.rootId),c=0,l=u,g=r.propertiesItem;if(g&&g.fullScreenModeOn){if(e.isOpen("sv_kill980"))return void n.css(t,{width:"100%",left:0,marginLeft:0});s>u&&(c=-(s-u)/2,l=s),n.css(t,{width:l+"px",left:c+"px"}),o.width[t]=l,o.left[t]=c}}),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.FiveGridLine",[["line"]]),t.registerRequestToMeasureDom("wysiwyg.viewer.components.FiveGridLine"),t.registerCustomMeasure("wysiwyg.viewer.components.FiveGridLine",function(e,t,i){var n=t.height[e+"line"],o=window.getComputedStyle(i[e]),r=parseFloat(o.borderBottomWidth);t.height[e]=Math.max(5,r,n),t.minHeight[e]=n})}),define("layout/specificComponents/registerToMeasureOnly",["layout/util/layout"],function(e){"use strict";return e.registerRequestToMeasureDom("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),e.registerRequestToMeasureDom("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"),e.registerRequestToMeasureDom("wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer"),e.registerRequestToMeasureDom("wysiwyg.viewer.components.Video"),e.registerRequestToMeasureDom("wysiwyg.viewer.components.WTwitterTweet"),e.registerRequestToMeasureDom("wysiwyg.viewer.components.SoundCloudWidget"),e.registerRequestToMeasureDom("wysiwyg.common.components.disquscomments.viewer.DisqusComments"),{}}),define("layout/specificComponents/registerToPureDomMeasure",["lodash","warmupUtils","layout/util/layout","experiment"],function(e,t,i,n){"use strict";function o(t,n){i.registerCustomMeasure(t,function(t,i,o){var r=o[t];e.get(n,"height",!0)&&(i.height[t]=r.offsetHeight),e.get(n,"width",!0)&&(i.width[t]=r.offsetWidth)})}function r(e){i.registerAdditionalMeasureFunction(e,function(e,i,n){i.containerHeightMargin[e]=t.measurerUtils.getContainerVerticalMarginFromContent(e,n[e])},"containerHeightMargin")}o("wysiwyg.viewer.components.FlashComponent"),o("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),o("wysiwyg.viewer.components.WGooglePlusOne"),o("wysiwyg.viewer.components.LinkBar"),o("wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer"),o("wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox"),o("wysiwyg.viewer.components.PayPalButton"),o("wysiwyg.viewer.components.PinterestFollow"),o("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"),o("wysiwyg.viewer.components.FlickrBadgeWidget"),o("wysiwyg.viewer.components.WTwitterFollow"),o("wysiwyg.viewer.components.WTwitterTweet"),o("wysiwyg.viewer.components.LoginButton"),o("wysiwyg.viewer.components.AdminLoginButton"),o("wysiwyg.viewer.components.ItunesButton"),o("wysiwyg.viewer.components.WFacebookLike"),o("wysiwyg.viewer.components.VerticalLine",{width:!1}),o("wysiwyg.viewer.components.FlashComponent"),o("wysiwyg.viewer.components.FacebookShare"),o("wysiwyg.viewer.components.Group"),o("wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton"),o("platform.components.AppController"),o("wysiwyg.viewer.components.VKShareButton"),o("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton"),o("wysiwyg.viewer.components.inputs.RadioGroup"),o("tpa.viewer.components.Impress"),o("tpa.viewer.components.Thumbnails"),o("tpa.viewer.components.Honeycomb"),o("tpa.viewer.components.Accordion"),o("wysiwyg.viewer.components.tpapps.TPA3DGallery"),o("wysiwyg.viewer.components.LanguageSelector"),o("tpa.viewer.components.Masonry"),o("tpa.viewer.components.Freestyle"),o("wysiwyg.viewer.components.tpapps.TPA3DCarousel"),o("wysiwyg.viewer.components.inputs.TextInput"),o("wysiwyg.viewer.components.inputs.TextAreaInput"),o("mobile.core.components.Page",{height:!1}),a="mobile.core.components.Page",i.registerAdditionalMeasureFunction(a,function(e,t,i){var n=i[e];t.minHeight[e]=parseInt(n.style.minHeight,10)},"pageMinHeight");var a;return o("wixui.Pagination"),o("wixui.RatingsDisplay"),r("wysiwyg.viewer.components.ScreenWidthContainer"),r("wysiwyg.viewer.components.HeaderContainer"),r("wysiwyg.viewer.components.FooterContainer"),r("mobile.core.components.Page"),n.isOpen("sv_kill980")&&o("tpa.viewer.components.Collage"),{}}),define("layout/specificComponents/menuLayout",["zepto","lodash","layout/util/layout","warmupUtils"],function(e,t,i,n){"use strict";var o=n.warmupMenuUtils,r="__more__",a="moreContainer";function s(e){return!isNaN(parseFloat(e))&&isFinite(e)}function u(e,i,n,o,r,a,s,u,c,l){var g=n.concat("__more__"),d=i.custom[e],h=d.realWidths,p=d.menuItemContainerExtraPixels,m=i.width[e];if(t.findIndex(g,function(e){return e===o})>=0&&h){var f=Math.abs(l.getSiteX()),y=i.fixed[e]?i.absoluteLeft[e]:f+i.absoluteLeft[e],w=function(e,t,i,n,o,r,a,s,u){var c="0px",l="auto",g=r.left,d=r.width;"left"===t?c="left"===o?0:g+e.left+"px":"right"===t?(l="right"===o?0:n-g-d-e.right+"px",c="auto"):"left"===o?c=g+(d+e.left-i)/2+"px":"right"===o?(c="auto",l=(d+e.right-(i+e.width))/2+"px"):c=e.left+g+(d-(i+e.width))/2+"px";if("auto"!==c){var h=a+parseInt(c,10);c=h<0?0:c}if("auto"!==l){var p=s-parseInt(l,10);l=p>u?0:l}return{moreContainerLeft:c,moreContainerRight:l}}(p,s,c,m,r,u,y,y+m,i.clientWidth);return{left:w.moreContainerLeft,right:w.moreContainerRight,bottom:d.needToOpenMenuUp?a+"px":"auto"}}}function c(e){var t=parseFloat(e);return isFinite(t)?t:0}return i.registerPatcher("wysiwyg.viewer.components.menus.DropDownMenu",function(e,i,n,c,l){i.css(e,{"overflow-x":"visible"});var g=n.height[e],d=c.dataItem.menuRef?c.dataItem.menuRef.id:"CUSTOM_MAIN_MENU",h=o.getMenuById(d,l,!0,{},!1),p=t.keys(h),m=p.concat("__more__"),f=n.custom[e];y=e,w=i,v=f.needToOpenMenuUp,w.data(y,{dropmode:v?"dropUp":"dropDown"});var y,w,v,C=f.menuItemContainerExtraPixels,M=0;if(f.hoverState===r){var S=f.realWidths.indexOf(0),I=f.menuItems[t.findKey(f.menuItems,["menuIndex",S])],b=I.moreIndex,T=b===p.length-1;i.attr(I.moreDOMid,{"data-listposition":T?"dropLonely":"top"}),t(f.menuItems).filter(function(e){return!!e.moreDOMid}).forEach(function(e){if(e.moreIndex<b)i.css(e.moreDOMid,{display:"none"});else{var t=e.moreDOMid+"label";M=Math.max(n.width[t],M)}})}else f.hoverState&&t.forEach(f.moreSubItem,function(t,i){var o=e+a+i+"label";M=Math.max(n.width[o],M)});!function(e,i,n,c,l,g){var d=n.custom[e],h=d.hoverState,p=l.dataItem.menuRef?l.dataItem.menuRef.id:"CUSTOM_MAIN_MENU",m=t.keys(o.getMenuById(p,c,!0,{},!1)),f=m.indexOf(h);if(s(d.hoverState)||h===r){if(!n.custom[e].realWidths)return;var y=Math.max(g,n.width[-1!==f?e+f:e+r]),w=t.isEmpty(d.moreSubItem)?0:d.lineHeight[d.moreSubItem[0]+"label"],v=(I=w,b=d,I+15+b.menuBorderY+b.labelPad+b.menuButtonBorder);t.forEach(d.moreSubItem,function(e){i.css(e,{"min-width":y+"px"}),i.css(e+"label",{"min-width":"0px","line-height":v+"px"})});var C=s(d.hoverState)?d.hoverState:"__more__",M={width:n.width[e+C],left:n.left[e+C]},S=u(e,n,m,h,d.hoverListPosition,n.height[e],d.alignButtons,M,y,c);i.css(e+a,{left:S.left,right:S.right}),i.css(e+"dropWrapper",{left:S.left,right:S.right,bottom:S.bottom})}var I,b}(e,i,n,l,c,M),f.originalGapBetweenTextAndBtn&&t.forEach(m,function(t){f.hasOriginalGapData[t]||i.data(e+t,{originalGapBetweenTextAndBtn:f.originalGapBetweenTextAndBtn[e+t]})}),function(e,t,i,n,o,r,a){for(var s=0,u=null,c=null,l=i.custom[e].lineHeight[e],g=r-a.height,d=0;d<n.length;d++){var h=o[d],p=h>0,m=e+n[d];c=i.custom[e].linkIds[m],p?(s++,u=m,t.css(m,{width:h+"px",height:g+"px",position:"relative","box-sizing":"border-box",overflow:"visible"}),t.css(m+"label",{"line-height":l}),t.attr(m,{"aria-hidden":!1}),t.attr(c,{tabIndex:0})):(t.css(m,{height:"0px",overflow:"hidden",position:"absolute"}),t.attr(m,{"aria-hidden":!0}),t.attr(c,{tabIndex:-1}))}1===s&&(t.data(e+"moreContainer",{listposition:"lonely"}),t.data(u,{listposition:"lonely"}))}(e,i,n,m,f.realWidths,g,C)}),i.registerCustomMeasure("wysiwyg.viewer.components.menus.DropDownMenu",function(i,r,a,s,u){var l,g=e(a[i]),d=e("#"+i+"itemsContainer")[0]||a[i+"itemsContainer"],h=d.childNodes,p=a[i+"moreContainer"],m=p.childNodes,f=r.custom[i]={alignButtons:g.data("dropalign"),hoverListPosition:g.data("drophposition"),menuBorderY:parseInt(g.data("menuborder-y"),10),ribbonExtra:parseInt(g.data("ribbon-extra"),10),ribbonEls:parseInt(g.data("ribbon-els"),10),labelPad:parseInt(g.data("label-pad"),10),menuButtonBorder:parseInt(g.data("menubtn-border"),10),menuItemContainerMargins:function(t){var i=t.lastChild;return(parseInt(e(i).css("margin-left"),10)||0)+(parseInt(e(i).css("margin-right"),10)||0)}(d),menuItemContainerExtraPixels:function(t,i){var n=e(t).css(["border-top-width","border-bottom-width","border-left-width","border-right-width","padding-top","padding-bottom","padding-left","padding-right","margin-top","margin-bottom","margin-left","margin-right"]),o=c(n["border-top-width"])+c(n["padding-top"]),r=c(n["border-bottom-width"])+c(n["padding-bottom"]),a=c(n["border-left-width"])+c(n["padding-left"]),s=c(n["border-right-width"])+c(n["padding-right"]);return i&&(o+=c(n["margin-top"]),r+=c(n["margin-bottom"]),a+=c(n["margin-left"]),s+=c(n["margin-right"])),{top:o,bottom:r,left:a,right:s,height:o+r,width:a+s}}(d,!0),needToOpenMenuUp:(l=a[i],l.getBoundingClientRect().top>window.innerHeight/2),menuItemMarginForAllChildren:!u.propertiesItem.stretchButtonsToMenuWidth||"false"!==d.getAttribute("data-marginAllChildren")};f.moreSubItem=[],f.lineHeight={},f.labelWidths={},f.linkIds={},f.parentId={},f.menuItems={},t.forEach(m,function(t,i){var n=e(t);f.parentId[t.id]=n.data("parent-id");var o=n.data("data-id");f.menuItems[o]={dataId:o,parentId:n.data("parent-id"),moreDOMid:t.id,moreIndex:i},a[t.id]=t;var s=e(t).find("p")[0];a[s.id]=s,r.width[s.id]=s.offsetWidth,r.height[s.id]=s.offsetHeight,r.left[s.id]=s.offsetLeft,f.lineHeight[s.id]=parseInt(window.getComputedStyle(s).fontSize,10),f.moreSubItem.push(t.id)}),t.forEach(h,function(t,i){var n=e(t).data("data-id");f.menuItems[n]=f.menuItems[n]||{},f.menuItems[n].menuIndex=i,f.menuItems[n].menuDOMid=t.id,r.left[t.id]=t.offsetLeft;var o=e(t).find("p")[0];a[o.id]=o,f.labelWidths[o.id]=function(e){var t=window.getComputedStyle(e);return parseInt(t.width,10)+parseInt(t.paddingLeft,10)+parseInt(t.paddingRight,10)}(o);var s=e(t).find("a")[0];a[s.id]=s,f.linkIds[t.id]=s.id});var y=r.height[i];f.lineHeight[i]=(w=y,v=f,n.style.unitize(w-v.menuBorderY-v.labelPad-v.ribbonEls-v.menuButtonBorder-v.ribbonExtra));var w,v,C=u.dataItem.menuRef?u.dataItem.menuRef.id:"CUSTOM_MAIN_MENU",M=t.keys(o.getMenuById(C,s,!0,{},!1)).concat("__more__"),S=function(i,n,r,a,s){var u=n.width[i],c=n.custom[i];c.hasOriginalGapData={},c.originalGapBetweenTextAndBtn={};var l=t.map(s,function(o){var r=void 0,s=e(a[i+o]).data("originalGapBetweenTextAndBtn");return t.isUndefined(s)?(c.hasOriginalGapData[o]=!1,r=n.width[i+o]-c.labelWidths[i+o+"label"],c.originalGapBetweenTextAndBtn[i+o]=r):(c.hasOriginalGapData[o]=!0,r=parseInt(s,10)),n.width[i+o]>0?c.labelWidths[i+o+"label"]+r:0}),g=l.pop(),d=r.sameWidthButtons,h=r.stretchButtonsToMenuWidth,p=!1,m=c.menuItemContainerMargins,f=c.menuItemMarginForAllChildren,y=c.menuItemContainerExtraPixels,w=o.getMaxWidth(l),v=o.getDropDownWidthIfOk(u,d,h,l,m,w,f,y);if(!v){for(var C=1;C<=l.length;C++)if(v=o.getDropDownWidthIfOk(u,d,h,l.slice(0,-1*C).concat(g),m,w,f,y)){p=!0;break}v||(p=!0,v=[g])}if(p){var M=v[v.length-1];for(v=v.slice(0,-1);v.length<s.length;)v.push(0);v[v.length-1]=M}return{realWidths:v,moreShown:p}}(i,r,u.propertiesItem,a,M);f.realWidths=S.realWidths,f.isMoreShown=S.moreShown,f.hoverState=p.getAttribute("data-hover")}),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.menus.DropDownMenu",function(e,i,n,r){var a=n.dataItem.menuRef?n.dataItem.menuRef.id:"CUSTOM_MAIN_MENU",s=t.keys(o.getMenuById(a,r,!0,{},!1)).concat("__more__"),u=[["moreContainer"],["itemsContainer"],["dropWrapper"]];return t.forEach([[]],function(e){u=u.concat(t.map(s,function(t){return[t].concat(e)}))}),u}),{}}),define("layout/specificComponents/verticalMenuLayout",["lodash","layout/util/layout"],function(e,t){"use strict";function i(e,t,i){var n,o,r=e.custom[t],a=e.absoluteTop[t]-r.pageYOffset,s="subMenuOpenDir-"+(n=r.screenHeight,o=a,Math.floor(n/2)>o?"down":"up");i.attr(t,{"data-open-direction":s})}return t.registerRequestToMeasureChildren("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",[["menuContainer"]]),t.registerCustomMeasure("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",function(e,t,i,n){n.isMobileView()?(t.height[e+"menuContainer"]=t.height[e],t.width[e+"menuContainer"]=t.width[e]):function(e,t,i){var n=e+"menuContainer";i[n]&&(t.custom[e]={screenHeight:t.height.screen,pageYOffset:window.pageYOffset},t.width[e]=i[n].offsetWidth,t.height[e]=i[n].offsetHeight)}(e,t,i)}),t.registerPatcher("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",function(e,t,n,o,r){var a=e+"menuContainer";n.height[a]&&n.width[a]&&(r.isMobileView()?t.css(a,{height:n.height[a],width:n.width[a]}):i(n,e,t))}),{}}),define("layout/specificComponents/memberLoginSectionLayout",["lodash","layout/specificComponents/imageLayout"],function(e,t){"use strict";var i=30;function n(e,t){return"true"===e[t].getAttribute("data-is-logged-in")}function o(t){var i=e.get(t,"dataItem",null);if(i){if("LoginSocialBar"===i.type)return i;if(i.loginSocialBarRef)return i.loginSocialBarRef}return null}function r(t){var i=o(t);return e.get(i,"iconItemsRef.menuRef.items",null)}function a(t){var i=o(t);return"textOnly"!==e.get(i,"loggedInMember")}function s(t){return e.get(t,"propertiesItem.iconSize",i)}function u(t){return e.get(t.getSiteMemberDetails(),"attributes.imageUrl",null)}return{measure:function(t,i,o,r,a,s){var u=t+(s||"");i.custom[u]=e.merge(i.custom[u]||{},{dataStates:o[u].getAttribute("data-state")||"",isLoggedIn:n(o,u)})},patch:function(i,n,o,c,l,g){var d=i+(g||"");!function(e,i,n,o,r){var c=e+"avatarimage",l=s(o);if(a(o)){var g=u(r);n.width[c]&&t.patchNodeImage(c,i,n,r,{uri:g},{width:l,height:l})}}(d,n,o,c,l),function(i,n,o,a,u){if(o.custom[i].isLoggedIn){var c=r(a)||[],l=s(a);e.forEach(c,function(e,r){var a=i+"button"+r+"iconimage",s=i+"button"+r+"iconsvg";e.iconRef&&(o.width[a]?t.patchNodeImage(a,n,o,u,e.iconRef,{width:l,height:l}):o.width[s])})}}(d,n,o,c,l)},getChildrenIdToMeasure:function(t,i,o,s,c){var l=[];if(a(s)&&n(o,i)&&u(t)&&l.push({pathArray:["avatar","image"],type:"core.components.Image"}),n(o,i)){var g=r(s);e.forEach(g,function(e,t){e.iconRef&&"Image"===e.iconRef.type&&l.push({pathArray:["button"+t,"icon","image"],type:"core.components.Image"})})}return c&&e.forEach(l,function(t){e.isArray(t.pathArray)&&t.pathArray.splice(0,0,c)}),l}}}),define("layout/specificComponents/loginSocialBarLayout",["lodash","layout/util/layout","warmupUtils","zepto","layout/specificComponents/memberLoginSectionLayout"],function(e,t,i,n,o){"use strict";var r="buttons",a="user",s="icon",u="text",c="arrow",l=60,g=14,d="login",h="dropdownMenu";function p(t,o,r,a){var s=r[t].getBoundingClientRect(),u=r[t+c],l=r[t+h],g=o.custom[t].borderWidth,d=l.offsetWidth,p={top:o.height[t]-g+"px"},m=void 0;if(u.children.length>0&&d>0){var f=a.isMobileView()?n("#SITE_ROOT")[0]:n("#SITE_CONTAINER")[0],y=u.children[0].getBoundingClientRect(),w=i.domMeasurements.getBoundingRect(l.offsetParent,f),v=s.right-y.right-g,C=y.left-s.left-g,M={right:v+"px",left:"initial"},S={left:C+"px",right:"initial"};!function(t,i,n){var o,r,a=(o=n,r=t,o[r].getAttribute("data-state"));return a&&e.includes(a,"rtl")}(t,0,r)?(m=M,w.right-v-d<0&&(m=S)):(m=S,w.left+C+d>o.width.screen&&(m=M))}o.custom[t+h]=e.assign(p,m||{})}t.registerCustomMeasure("wysiwyg.viewer.components.LoginSocialBar",function(e,t,i,h,m){t.custom[e]={dataStates:i[e].getAttribute("data-state")||"",borderWidth:parseInt(n(i[e]).css("border-width"),10)||0},function(e,t,i,n,o){var a=i[e+r],h=i[e+s],p=i[e+c],m=i[e+u],f=a.offsetWidth,y=h.offsetWidth,w=p.offsetWidth,v=m.offsetWidth,C=t.custom[e].borderWidth,M=i[e+d].offsetWidth,S=v>0&&0===f&&0===y?g:0,I=Math.max(f+y+w+S,M)+2*C,b=I;v>0&&(b+=l);var T=Math.max(b,o.layout.width),A=T-I;t.minWidth[e]=b,t.width[e]=T,t.custom[e+u]=A}(e,t,i,0,m),function(e,t,i,n,o){var s=i[e+r],u=i[e+a],c=i[e+d],l=s.offsetHeight,g=u.offsetHeight,h=c.offsetHeight,p=t.custom[e].borderWidth,m=Math.max(l,g,h)+2*p,f=Math.max(m,o.layout.height);t.minHeight[e]=m,t.height[e]=f}(e,t,i,0,m),p(e,t,i,h),o.measure(e,t,i,h,m)}),t.registerPatcher("wysiwyg.viewer.components.LoginSocialBar",function(e,t,i,n,r){t.css(e,{width:i.width[e]+"px",minWidth:i.minWidth[e]+"px",minHeight:i.minHeight[e]+"px"}),t.css(e+u,{maxWidth:i.custom[e+u]+"px"}),t.css(e+h,i.custom[e+h]),o.patch(e,t,i,n,r)}),t.registerRequestToMeasureChildren("wysiwyg.viewer.components.LoginSocialBar",function(e,t,i,n){var l=[[r],[a],[s],[u],[c],[d],[h]],g=o.getChildrenIdToMeasure(n,e,t,i);return l=l.concat(g)})}),define("layout/util/spaceCalculationsRegardingWixAds",["experiment"],function(e){"use strict";function t(e){var t=parseInt(e,10);return isNaN(t)?0:t}return{getFirstUnoccupiedTopCoordinate:function(e){return t(e.height.WIX_ADStop)+t(e.top.WIX_ADStop)},getScreenHeightExcludingAds:function(i){var n=i.height.screen,o=t(i.height.WIX_ADStop)+t(i.top.WIX_ADStop);return e.isOpen("displayWixAdsNewVersion")?n-o:n-o-t(i.height.WIX_ADSbottom)}}}),define("layout/specificComponents/dialogLayout",["lodash","layout/util/layout","layout/util/spaceCalculationsRegardingWixAds"],function(e,t,i){"use strict";function n(e,t,n){var o=e+"dialog",r=n.height[o],a=n.height.screen,s=i.getFirstUnoccupiedTopCoordinate(n),u=i.getScreenHeightExcludingAds(n);t.css(e,{height:a+"px"});var c=(u-r)/2;t.css(o,{top:Math.max(c,20)+s+"px"})}e.forEach(["wysiwyg.viewer.components.dialogs.EnterPasswordDialog","wysiwyg.viewer.components.dialogs.NotificationDialog","wysiwyg.viewer.components.dialogs.siteMemberDialogs.EmailVerificationDialog","wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog","wysiwyg.viewer.components.dialogs.siteMemberDialogs.NoPermissionsToPageDialog","wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog","wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog","wysiwyg.viewer.components.dialogs.siteMemberDialogs.SentConfirmationEmailDialog","wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog","wysiwyg.viewer.components.dialogs.siteMemberDialogs.WelcomeDialog"],function(e){t.registerRequestToMeasureChildren(e,[["dialog"]]),t.registerPatcher(e,n)})}),define("layout/specificComponents/siteBackgroundLayout",["lodash","zepto","layout/util/layout","warmupUtils","layout/specificComponents/imageLayout","layout/specificComponents/html5VideoLayout","layout/util/optimizedCssImageLayout","experiment"],function(e,t,i,n,o,r,a,s){"use strict";var u=1920,c=1e3,l="siteBackgroundcurrentImage",g="siteBackgroundcurrentVideo",d="siteBackgroundcurrent",h="siteBackgroundprevious",p="bgVideo",m=p+"poster",f=p+"video",y=p+"mp4",w=n.imageClientApi;function v(e,t,i){var n={availWidth:e.width.screen,availHeight:e.height.screen,pixelAspectRatio:e.devicePixelRatio};if(t&&i){var o=Math.min(e.availWidth.device,e.availHeight.device),r=Math.max(e.availWidth.device,e.availHeight.device);n.availHeight=Math.round(n.availWidth*(r/o))}return n}function C(e,t,i){return!!s.isOpen("sv_mobileBG")&&(i&&e.mediaRef&&"viewport"===t)}function M(t,i,n,o,r){var a={},s=e.at(w.fittingTypes,["LEGACY_BG_NORMAL","LEGACY_BG_FIT_AND_TILE","LEGACY_BG_FIT_AND_TILE_HORIZONTAL","LEGACY_BG_FIT_AND_TILE_VERTICAL"]),l=e.includes(s,i.fittingType);if(o&&!l)a.width=n.availWidth,a.height=n.availHeight,a.pixelAspectRatio=n.pixelAspectRatio;else{var g=r?c:u;a.width=Math.min(g,t.width),a.height=Math.min(g,Math.round(a.width/(t.width/t.height)))}return a.htmlTag="bg",a.alignment=i.alignType,a}function S(t,i,n){var o=t.bgData,r=o.mediaRef,a={backgroundSize:"",backgroundPosition:"",backgroundRepeat:""},s="";if(r){"WixVideo"===r.type&&(r=r.posterImageRef);var u=i.isMobileView(),c=v(n,u,i.isMobileDevice()),l=C(o,t.mediaSizing,u),g={id:r.uri,width:r.width,height:r.height},d=M(r,o,c,l,u),h=e.defaults({quality:85},r.quality||{}),p=w.getData(o.fittingType,g,d,h,i.browser);s=p.uri,a={backgroundSize:p.css.container.backgroundSize,backgroundPosition:p.css.container.backgroundPosition,backgroundRepeat:p.css.container.backgroundRepeat,height:t.currentImageHeight},l&&("fill"===o.fittingType&&(a.backgroundSize="auto 100%",a.height=c.availHeight),a.backgroundPosition=a.backgroundPosition.replace(/(center|bottom)$/,"top"))}return{css:a,uri:s}}function I(e,t,i){var n=parseInt(e.height.WIX_ADStop,10);n=isNaN(n)?0:n;var o=parseInt(e.top.WIX_ADStop,10);return o=isNaN(o)?0:o,t||s.isOpen("displayWixAdsNewVersion",i)?n:o}i.registerRequestToMeasureDom("wysiwyg.viewer.components.SiteBackground"),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteBackground",function(e,t,i,n){return[[n.getPrimaryPageId()]]}),i.registerPatcher("wysiwyg.viewer.components.SiteBackground",function(e,t,i,n,o){i.top[e]=I(i,o.isMobileView(),o),i.width[e]=function(e,t){var i=e.width[t.getStructureCompId()];return Math.ceil(Math.max(e.width.screen,i))}(i,o),i.height[e]=function(e,t){var i=e.height[t.getStructureCompId()],n=e.height.screen-I(e,t.isMobileView(),t);return Math.max(n,i)}(i,o),i.height.currentImage=i.height.masterPage,t.css(e,{top:i.top[e]+"px",height:i.height[e]+"px",width:i.width[e]+"px"});var u=i.custom[e];if(s.isOpen("sv_mobileBG")){var c=o.isMobileView(),g=o.isMobileDevice(),m={width:c?i.width.screen:"100%",height:c&&"fixed"===u.bgPosition?v(i,c,g).availHeight:"100%"};t.css(d,m),t.css(h,m)}var f=S(u,o,i);if(a.patchCssImage(u,l,t,f.css,f.uri,o),i.custom[e].hasVideo){var y={designDataItem:{background:u.bgData}},w={width:i.width.screen,height:i.height.screen};r.patchBgVideo(e+p,t,i,y,o,w.height,w)}}),i.registerCustomMeasure("wysiwyg.viewer.components.SiteBackground",function(i,n,r,u,c){r[l]=window.document.querySelector("."+l),s.isOpen("sv_mobileBG")&&(r[d]=window.document.querySelector("."+d),r[h]=window.document.querySelector("."+h));var w=function(e,t){var i=void 0;i=s.isOpen("sv_preferBgDataFromPage")?e.getDataByQuery(t,t):e.getDataByQuery(t);var n=e.isMobileView()?"mobile":"desktop";return{bgData:i.pageBackgrounds[n].ref,mediaSizing:i.pageBackgrounds[n].mediaSizing}}(u,u.getPrimaryPageId());n.custom[i]={bgData:w.bgData,hasVideo:!1,mediaSizing:w.mediaSizing,currentImageHeight:t(r[l]).data("height")},C(w.bgData,w.mediaSizing,u.isMobileView())&&(n.custom[i].bgPosition=t(r[d]).data("position")),a.cacheCssImageMeasureData(n.custom[i],r[l]),"WixVideo"!==e.get(w.bgData.mediaRef,"type")||u.isTouchDevice()||(n.custom[i].hasVideo=!0,r[g]=window.document.querySelector("."+g),r[i+f]=r[g].querySelector("."+f),r[i+m]=r[g].querySelector("."+m),r[i+y]=r[i+f].firstChild,n.custom[i+p]={bgData:w.bgData,quality:r[g].getAttribute("data-quality")},o.measureNodeImage(i+m,n,r,u,c))});return{testAPI:{getDeviceScreenDimensions:v,calculateTargetImageSize:M,getCssImageData:S}}}),define("layout/specificComponents/wixFreemiumBannerLayout",["lodash","layout/util/layout","experiment"],function(e,t,i){"use strict";t.registerRequestToMeasureChildren("wysiwyg.viewer.components.WixAds",[["top"],["bottom"]]),t.registerCustomMeasure("wysiwyg.viewer.components.WixAds",function(t,n,o,r){var a=r.isMobileView(),s=["height","width","top","left"],u=void 0;u=i.isOpen("displayWixAdsNewVersion")?["top"]:a?["top"]:["top","bottom"];var c=o.WIX_ADStop.getBoundingClientRect(),l=n.width.WIX_ADStop!==c.width;n.height.WIX_ADStop=c.height,e.forEach(u,function(i){var r=t+i,a=o[r].getBoundingClientRect();n.custom[r]=a,e.forEach(s,function(e){n[e][r]=Math.ceil(a[e])})}),a&&(n.top.WIX_ADStop=0),!i.isOpen("displayWixAdsNewVersion")&&l&&(n.width.WIX_ADStop+=5)}),i.isOpen("displayWixAdsNewVersion")||t.registerPatcher("wysiwyg.viewer.components.WixAds",function(e,t,i,n,o){if(t.css(e,{visibility:""}),!o.isMobileView()){var r=0===i.width.WIX_ADStop?"":i.width.WIX_ADStop;t.css(e+"top",{width:r})}})}),define("layout/specificComponents/documentMediaLayout",["zepto","lodash","layout/util/layout","imageClientLib","layout/specificComponents/imageLayout"],function(e,t,i,n,o){"use strict";i.registerRequestToMeasureChildren("wysiwyg.viewer.components.documentmedia.DocumentMedia",[["label"],{pathArray:["img"],type:"core.components.Image"},["link"]]),i.registerCustomMeasure("wysiwyg.viewer.components.documentmedia.DocumentMedia",function(t,i,n){var o=e(n[t]),r=t+"label",a=i.width[r],s=i.height[r],u=Math.max(i.width[t],a),c=o.data("content-padding-left"),l=o.data("content-padding-right"),g=o.data("content-padding-top"),d=o.data("content-image-height"),h={width:u-c-l,height:Math.max(d-g-s,1)};i.custom[t]={containerSize:h},i.width[t]=u,i.minWidth[t]=a}),i.registerPatcher("wysiwyg.viewer.components.documentmedia.DocumentMedia",function(e,i,r,a,s){var u=t.defaults({displayMode:n.fittingTypes.LEGACY_FULL},a.dataItem);o.patchNodeImage(e+"img",i,r,s,u,r.custom[e].containerSize),i.css(e,{width:r.width[e]})})}),define("layout/specificComponents/screenWidthLayouts/containerAndScreenWidthLayout",["warmupUtils","experiment","layout/util/layout"],function(e,t,i){"use strict";var n="wysiwyg.viewer.components.ScreenWidthContainer";i.registerRequestToMeasureDom(n),i.registerRequestToMeasureChildren(n,[["screenWidthBackground"],["inlineContent"]]),i.registerCustomLayoutFunction(n,function(i,n){if(t.isOpen("sv_kill980"))return{};var o="true"===n[i].dataset.isMobile,r=parseInt(n[i].dataset.siteWidth,10),a=e.measurerUtils.getScreenWidth(o);return function(e){e.css(i+"screenWidthBackground",{width:a,left:Math.min((r-a)/2,0)}),e.css(i,{left:0})}})}),define("layout/util/svgLayoutUtils",["lodash","warmupUtils"],function(e,t){"use strict";var i={width:1,height:1,x:0,y:0},n=function(e){return e.x+" "+e.y+" "+e.width+" "+e.height};return{getSvgScaleProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,o=arguments[1],r=arguments[2],a=arguments[3],s=a?"xMidYMid meet":"none",u=t.svgFeatureDetection.flags().isVectorEffect,c=o?function(e,t,i,n){var o=(i.width-t)/e.width,r=(i.height-t)/e.height,a=Math.min(o,r),s=i.width/(n?a:o),u=i.height/(n?a:r),c=e.x-(s-e.width)/2,l=e.y-(u-e.height)/2;return{width:s,height:u,x:c,y:l}}(e,o,r,a):e;return{viewBox:n(c),strokeWidth:o&&!u?function(e,t,i){var n=Math.min((i.width-t)/e.width,(i.height-t)/e.height);return t*(1/n)}(e,o,r):o,width:r.width,height:r.height,preserveAspectRatio:s}}}}),define("layout/specificComponents/svgShape/svgScalerUtils",[],function(){"use strict";return{trim:function(e){return e.replace(/^\s+|\s+$/g,"")},round:function(e){return Math.round(1e6*e)/1e6}}}),define("layout/specificComponents/svgShape/svgPathParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(e,t){"use strict";return{getParsedPath:function(i){var n=t.trim(i);if(""===n)return[];return n.match(/[a-z][^a-z]*/gi).map(function(i){for(i=i.replace(/-/g," -").replace(/,/g," ").replace(/(-?\d*[\.\-]\d+)/g,function(e,t){return" "+t});e.includes(i,"  ");)i=i.replace(/ {2}/g," ");return[i.substring(0,1),t.trim(i.substring(1))]}).map(function(t){var i=[];if(!e.includes("QSCL",t[0].toUpperCase())||1!==t[1].split(",").length)return t;var n=t[1].split(" ");return n.length%2!=0?t:(n.forEach(function(e,t,n){t%2==0&&i.push(e+" "+n[t+1])}),[t[0],i.join(",")])})},stringifyParsedPath:function(e){var t="";return e.forEach(function(e){e.forEach(function(e){t+=e})}),t}}}),define("layout/specificComponents/svgShape/svgBasicScaler",["layout/specificComponents/svgShape/svgScalerUtils"],function(e){"use strict";var t=function(t,i){return e.round(parseFloat(t)*i)},i=function(e,i,n){var o=e.split(/[\s,]+/);return t(o[0],i)+" "+t(o[1],n)};return{scaleSingleValue:t,scalePairString:i,scaleMultiplePairStrings:function(t,n,o){if(""===t)return"";return t.split(",").map(function(t){return i(e.trim(t),n,o)}).join(",")},scaleMultipleSingleStrings:function(i,n){if(""===i)return"";return i.split(/[\s,]+/).map(function(i){return t(e.trim(i),n)}).join(",")}}}),define("layout/specificComponents/svgShape/svgPathScaler",["lodash","layout/specificComponents/svgShape/svgPathParser","layout/specificComponents/svgShape/svgBasicScaler","warmupUtils"],function(e,t,i,n){"use strict";var o=function(e,t,o){if(7!==e.length)return n.log.verbose("incorrect arc string, should have exactly 7 parameters. (value was "+e.join(" ")),e.join(" ");e[0]=i.scaleSingleValue(e[0],t),e[1]=i.scaleSingleValue(e[1],o),e[2]=(r=e[2],a=t,s=o,i.scaleSingleValue(r,s/(360*a)));var r,a,s;return e[5]=i.scaleSingleValue(e[5],t),e[6]=i.scaleSingleValue(e[6],o),e.join(" ")},r={M:i.scaleMultiplePairStrings,L:i.scaleMultiplePairStrings,H:i.scaleMultipleSingleStrings,V:i.scaleMultipleSingleStrings,Z:function(){return""},C:i.scaleMultiplePairStrings,S:i.scaleMultiplePairStrings,Q:i.scaleMultiplePairStrings,T:i.scaleMultiplePairStrings,A:function(t,i,n){var r=t.split(/[\s,]+/),a=e.chunk(r,7),s=[];return e.forEach(a,function(e){s.push(o(e,i,n))}),s.join(" ")}};return{scale:function(i,n,o){var a=t.getParsedPath(i.getAttribute("d"));return e.forEach(a,function(e){var t=[e[1]],i=e[0].toUpperCase();"V"===i?t.push(o):"H"===i?t.push(n):(t.push(n),t.push(o)),e[1]=r[e[0].toUpperCase()].apply(null,t)}),{d:t.stringifyParsedPath(a)}}}}),define("layout/specificComponents/svgShape/svgPolygonParser",["layout/specificComponents/svgShape/svgScalerUtils"],function(e){"use strict";return{getParsedPoints:function(t){var i=e.trim(t),n=i.split(/[\s,]+/),o=[];if(""===i)return[];for(var r=0;r<n.length;r+=2)o.push([n[r],n[r+1]]);return o},stringifyPoints:function(t){var i="";return t.forEach(function(e){i+=e.join(",")+" "}),e.trim(i)}}}),define("layout/specificComponents/svgShape/svgPolygonScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolygonParser"],function(e,t,i){"use strict";return{scale:function(n,o,r){var a=i.getParsedPoints(n.getAttribute("points"));return e.forEach(a,function(e){e[0]=t.scaleSingleValue(e[0],o),e[1]=t.scaleSingleValue(e[1],r)}),e.isEmpty(a)?{}:{points:i.stringifyPoints(a)}}}}),define("layout/specificComponents/svgShape/svgCircleScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(e){"use strict";return{scale:function(t,i,n){var o=t.getAttribute("cx"),r=t.getAttribute("cy"),a=t.getAttribute("r"),s=Math.min(i,n);return o&&r?{cx:e.scaleSingleValue(o,s),cy:e.scaleSingleValue(r,s),r:e.scaleSingleValue(a,s)}:{}}}}),define("layout/specificComponents/svgShape/svgRectScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler"],function(e,t){"use strict";function i(i,n,o){return n?e.set({},i,t.scaleSingleValue(n,o)):null}return{scale:function(t,n,o){var r=t.getAttribute("width"),a=t.getAttribute("height"),s=t.getAttribute("rx"),u=t.getAttribute("ry"),c=t.getAttribute("x"),l=t.getAttribute("y");return e.assign({},i("width",r,n),i("height",a,o),i("rx",s,n),i("ry",u,o),i("x",c,n),i("y",l,o))}}}),define("layout/specificComponents/svgShape/svgEllipseScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(e){"use strict";return{scale:function(t,i,n){var o=t.getAttribute("cx"),r=t.getAttribute("cy"),a=t.getAttribute("rx"),s=t.getAttribute("ry"),u={};return o&&a&&(u.cx=e.scaleSingleValue(o,i),u.rx=e.scaleSingleValue(a,i)),r&&s&&(u.cy=e.scaleSingleValue(r,n),u.ry=e.scaleSingleValue(s,n)),u}}}),define("layout/specificComponents/svgShape/svgPolylineParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(e,t){"use strict";return{getParsedPoints:function(e){var i=t.trim(e),n=i.split(/[\s,]+/),o=[];if(""===i)return[];for(var r=0;r<n.length;r+=2)o.push([n[r],n[r+1]]);return o},stringifyPoints:function(e){var i="";return e.forEach(function(e){i+=e.join(",")+" "}),t.trim(i)}}}),define("layout/specificComponents/svgShape/svgPolylineScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolylineParser"],function(e,t,i){"use strict";return{scale:function(n,o,r){var a=i.getParsedPoints(n.getAttribute("points"));return a=e.map(a,function(i){return e.map(i,function(e,i){return t.scaleSingleValue(e,i?r:o)})}),e.isEmpty(a)?{}:{points:i.stringifyPoints(a)}}}}),define("layout/specificComponents/svgShape/svgLineScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(e){"use strict";return{scale:function(t,i,n){var o=t.getAttribute("x1"),r=t.getAttribute("y1"),a=t.getAttribute("x2"),s=t.getAttribute("y2");return o&&r&&a&&s?{x1:e.scaleSingleValue(o,i),x2:e.scaleSingleValue(a,i),y1:e.scaleSingleValue(r,n),y2:e.scaleSingleValue(s,n)}:{}}}}),define("layout/specificComponents/svgShape/svgScaler",["lodash","layout/specificComponents/svgShape/svgScalerUtils","layout/specificComponents/svgShape/svgPathScaler","layout/specificComponents/svgShape/svgPolygonScaler","layout/specificComponents/svgShape/svgCircleScaler","layout/specificComponents/svgShape/svgRectScaler","layout/specificComponents/svgShape/svgEllipseScaler","layout/specificComponents/svgShape/svgPolylineScaler","layout/specificComponents/svgShape/svgLineScaler"],function(e,t,i,n,o,r,a,s,u){"use strict";var c=["path","polygon","rect","circle","ellipse","polyline","line"];return{measure:function(l,g,d,h,p,m){var f=g[l+"svg"],y=function(e){var t=window.document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(f),w=g[l+"svg-g"]=f.getElementsByTagName("g")[0],v=e.pick(h,["width","height"]),C=e.pick(h,["x","y"]),M={path:i,polygon:n,rect:r,circle:o,ellipse:a,polyline:s,line:u};if(w){var S,I=function(e,i,n,o){var r=i.width/i.height,a=r>o,s=r<o,u=void 0,c=void 0;return u=e.width?n&&a?i.height*o/e.width:i.width/e.width:1,c=e.height?n&&s?i.width/o/e.height:i.height/e.height:1,{scaleX:t.round(u),scaleY:t.round(c)}}(v,d,m,h.width/h.height),b={scalers:{},style:{},groupTransform:{}},T=(S=y,window.document.createRange().createContextualFragment(S).querySelector("g").querySelectorAll(c.join(","))),A=void 0,D=void 0;e.forEach(T,function(e,t){A=e.nodeName.toLowerCase(),D=l+"svg"+A+t,b.scalers[D]=M[A].scale(e,I.scaleX,I.scaleY)}),e(w.childNodes).filter(function(t){return i=t.nodeName,e.includes(c,i.toLowerCase());var i}).forEach(function(e,t){A=e.nodeName.toLowerCase(),g[D=l+"svg"+A+t]=e}),b.groupTransform=(E=p,L={x:C.x*I.scaleX,y:C.y*I.scaleY},{transform:"translate("+parseFloat(-1*L.x+.5*E)+","+parseFloat(-1*L.y+.5*E)+")"});var E,L;return b.style={strokeWidth:p,width:Math.ceil(v.width*I.scaleX+p)+"px",height:Math.ceil(v.height*I.scaleY+p)+"px"},b}},patch:function(t,i,n){i.css(t+"svg",n.style),i.attr(t+"svg-g",n.groupTransform),e.forEach(n.scalers,function(e,t){i.attr(t,e)}),i.attr(t+"svg",{viewBox:" "})}}}),define("layout/specificComponents/shapeLayout",["lodash","warmupUtils","layout/util/layout","layout/util/svgLayoutUtils","layout/specificComponents/svgShape/svgScaler"],function(e,t,i,n,o){"use strict";function r(e,i,r,a){var s=e[i],u=e[i+"svg"],c=a?function(e){var t=e.split(" "),i=_slicedToArray(t,4);return{x:i[0],y:i[1],width:i[2],height:i[3]}}(a):u.getBBox();if(c){var l="stretch"!==s.getAttribute("data-display-mode"),g=parseInt(s.getAttribute("data-strokewidth"),10),d={width:s.offsetWidth,height:s.offsetHeight};return function(e,i){var n=t.svgFeatureDetection.flags().isVectorEffect;return e>0&&!i&&!n}(g,l)?(d.width-=g,d.height-=g,{polyfillScale:o.measure(i,e,d,c,g,l)}):{scale:n.getSvgScaleProps(c,g,d,l)}}}function a(t,i){var n=[],a={};return e.forEach(t,function(e){var t=e.getAttribute("id");i[t]=e,a[t]=function(e,t){if(t[e]){var i=t[e],n=i.getAttribute("data-svg-id"),o=i.querySelector("svg"),a="preserve"===i.getAttribute("data-preserve-viewbox")?i.getAttribute("data-viewbox"):"";return n&&o?(t[e+"svg"]=o,r(t,e,0,a)):void 0}}(t,i),n.push(t)}),function(t){e.forEach(n,function(i){return function(t,i,n){var r=e.get(n,"scale"),a=e.get(n,"polyfillScale");r?(i.css(t+"svg",e.pick(r,["strokeWidth"])),i.attr(t+"svg",e.pick(r,["preserveAspectRatio","viewBox"]))):a&&o.patch(t,i,a)}(i,t,a[i])})}}function s(e,t){if(t[e].getAttribute("data-svg-id"))return a([t[e]],t);return a(t[e].querySelectorAll("*[data-svg-id]"),t)}return i.registerCustomLayoutFunction("wysiwyg.viewer.components.VectorImage",s),i.registerCustomLayoutFunction("wysiwyg.viewer.components.svgshape.SvgShape",s),i.registerCustomLayoutFunction("wysiwyg.viewer.components.PopupCloseIconButton",s),i.registerCustomLayoutFunction("wysiwyg.viewer.components.MediaControls",s),i.registerCustomLayoutFunction("wysiwyg.viewer.components.mobile.TinyMenu",s),i.registerCustomLayoutFunction("wysiwyg.viewer.components.LoginSocialBar",s),{layoutShapeNodes:s}}),define("layout/specificComponents/tinyMenuLayout",["zepto","layout/util/layout","warmupUtils","experiment","layout/util/rootLayoutUtils","lodash","layout/specificComponents/memberLoginSectionLayout"],function(e,t,i,n,o,r,a){"use strict";var s="menuContainer",u="menuButton",c="menuItems",l="menuBackground",g="fullScreenOverlay",d="tinyMenuMemberSection",h=20,p="wysiwyg.viewer.skins.mobile.TinyMenuSkin";function m(e){return r.get(e,"dataItem.loginSocialBarRef")}function f(e,t,i){return t[e+d]&&m(i)}t.registerRequestToMeasureChildren("wysiwyg.viewer.components.mobile.TinyMenu",function(e,t,i,n){var o=[[s],[u],[c],[g],[l]],r=e+d;if(t[r]=t[e].querySelector("#"+r),f(e,t,i)){o.push({pathArray:[d],type:"wysiwyg.viewer.components.mobile.TinyMenuMemberSection"});var h=a.getChildrenIdToMeasure(n,r,t,i,d);o=o.concat(h)}return o}),t.registerCustomMeasure("wysiwyg.viewer.components.mobile.TinyMenu",function(t,n,o,g,h){var p=t+s,m=e("#SITE_ROOT")[0],y=i.domMeasurements.getElementRect(o[t],m);r.set(n.custom,["SITE_HEADER","isFixedPosition"].join("."),"fixed"===e("#SITE_HEADER").css("position")),n.custom[t]={menuContainerTop:y.bottom},n.top[p]=i.domMeasurements.getBoundingRect(o[p]).top,o[t+l]&&(n.height[t+l]=i.domMeasurements.getElementRect(o[t+l]).height),n.height[t]=n.height[t+u];var w=/menuOpen/.test(o[t+u].className);if(n.custom[t].isOpen=w,w){var v=i.domMeasurements.getElementRect(o[t+c],m);n.minHeight.masterPage=Math.max(n.minHeight.masterPage||0,v.bottom),M=n,I=g,f(C=t,S=o,b=h)&&a.measure(C,M,S,I,b,d)}var C,M,S,I,b}),t.registerPatcher("wysiwyg.viewer.components.mobile.TinyMenu",function(e,t,i,c,f){var y=e+s,w=o.getRootWidth(f,i,c.rootId)-2*h,v=r.get(i.custom.SITE_HEADER,"isFixedPosition"),C=c.layout.fixedPosition,M=r.get(i,["height","WIX_ADStop"],0);!function(e,t,i,n,o){var r=e+d;i.custom[e].isOpen&&i.width[r]&&m(n)&&a.patch(e,t,i,n,o,d)}(e,t,i,c,f);var S=0;if(n.isOpen("sv_fixedMobileHeader")?!v&&C&&(S=M):S=C?M:0,t.css(e+u,{marginTop:S+"px"}),r.get(c,["styleItem","skin"],p)===p)t.css(y,{maxHeight:(C?i.clientHeight-M:i.height.masterPage)-r.get(i,["custom",e,"menuContainerTop"],0),width:w+"px"});else{var I=i.height[e+l]-i.top[y];t.css(y,{paddingTop:M+"px",maxHeight:I+"px"}),t.css(e+g,{height:i.height.screen+1+"px"})}})}),define("layout/specificComponents/imageZoomLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/imageLayout","imageClientLib","warmupUtils"],function(e,t,i,n,o,r){"use strict";var a=r.mediaZoomCalculations;function s(e){return e.dataItem||e.structure.compData}function u(e,t){return e.getNonPageItemZoomData()||e.getDataByQuery(t)}function c(e){var t=e.getNonPageItemZoomData();return e.getExistingRootNavigationInfo(e.getFocusedRootId()).pageItemId||t&&t.id}function l(t,i,r,a,s){var l=c(s),g=!s.isMobileView()&&s.isMobileDevice()||s.isTabletDevice(),d=u(s,l),h=e.defaults({displayMode:o.fittingTypes.LEGACY_FULL},d);h.quality=e.defaults({quality:90},h.quality||{});var p=r.custom[t],m={width:p.imageContainerWidth,height:p.imageContainerHeight};if(n.patchNodeImage(t+l+"image",i,r,s,h,m),r.custom[t].hasPanel){var f=g?p.dialogBoxWidth:m.width;i.css(t+d.id+"panel",{width:f})}}function g(e,t,i,n,o){var r=i.custom[e];t.css(e+"dialogBox",{width:r.imageContainerWidth,minHeight:r.dialogBoxHeight,paddingTop:r.paddingTop}),l(e,t,i,0,o);var a=c(o);if(r.showDescription&&r.descriptionHeight>r.descriptionHeightLimit){var s=e+a+"description";t.css(s,{height:r.descriptionHeightLimit}),t.data(s,{expandable:"true"}),t.css(s,{height:r.descriptionHeightLimit}),t.css(e+a+"ellipsis",{display:""})}}function d(e,i,n,o){var r=c(o),s=u(o,r),l=!o.isMobileView()&&o.isMobileDevice()||o.isTabletDevice()?a.getNonOptimizedViewDimensions:a.getDesktopViewDimensions,g=t(n[e]),d=function(e){var t=h(e,"padding-bottom")+h(e,"padding-top");return{horizontal:h(e,"padding-right")+h(e,"padding-left"),vertical:t}}(t(n[e+"dialogBox"])),p=e+r+"panel",m={width:parseInt(g.data("width-spacer"),10),height:parseInt(g.data("height-spacer"),10)},f={isMobileDevice:o.isMobileDevice(),isTabletDevice:o.isTabletDevice(),siteWidth:o.getSiteWidth()},y={width:i.width.screen,height:i.height.screen,innerHeight:i.innerHeight.screen};i.custom[e]=l(s,f,y,m,i.height[p],d),i.custom[e].hasPanel=Boolean(n[p])}function h(e,t){return e&&t?parseInt(e.css(t),10)||0:0}function p(e,i,n,o,r){var s=c(o),l=u(o,s),g=a.getMobileViewDimensions(l,o,i);!function(e,i){var n=t(i);if("none"!==n.css("display")){var o=parseInt(n.css("line-height"),10);e.showDescription=!0,e.descriptionHeight=n.height(),e.descriptionHeightLimit=Math.floor(3*o)}}(g,n[e+s+"description"]),g.isMobileZoom=r,i.custom[e]=g}var m="wysiwyg.components.imageZoom";i.registerCustomMeasure(m,function(e,t,i,n,o){var r=s(o).id;(n.isMobileView()?p:d)(e+r,t,i,n)}),i.registerPatcher(m,function(e,t,i,n,o){var r=s(n).id;(o.isMobileView()?g:l)(e+r,t,i,n,o)}),i.registerRequestToMeasureChildren(m,function(e,t,i,n){var o=s(i).id,r=c(n),a={pathArray:[o,r,"image"],type:"core.components.Image"};return n.isMobileView()?[[o],a,[o,"dialogBox"],[o,r,"description"],[o,r,"ellipsis"]]:[[o],a,[o,"dialogBox"],[o,"buttonPrev"],[o,"buttonNext"],[o,r,"panel"]]})}),define("layout/util/calculateScreenWidthDimensions",["warmupUtils","layout/util/rootLayoutUtils"],function(e,t){"use strict";var i=e.layoutUtils.stretchInCenteredContainer;return function(e,n,o){var r=t.getRootWidth(n,e,o),a=Math.max(e.width.screen,r);return i(r,a)}}),define("layout/specificComponents/tpaGalleryLayout",["lodash","experiment","layout/util/layout","layout/util/calculateScreenWidthDimensions"],function(e,t,i,n){"use strict";function o(e,i,o,r,a){!function(e,i,o,r,a){if(t.isOpen("sv_kill980"))return i.css(e,{left:0,width:"100%"}),void i.css(e+"iframe",{width:"100%"});var s=n(o,r,a.rootId);i.css(e,{width:s.width+"px",left:s.left+"px"}),i.css(e+"iframe",{width:s.width+"px"}),o.width[e]=s.width,o.left[e]=s.left}(e,i,o,a,r)}t.isOpen("sv_kill980")||i.registerCustomMeasure("tpa.viewer.components.Collage",function(e,t,i,o,r){var a=r.propertiesItem,s=i[e];if(t.height[e]=s.offsetHeight,t.width[e]=s.offsetWidth,a.fitToScreenWidth){var u=n(t,o,r.rootId);s.style.width=u.width+"px",s.style.left=u.left+"px",t.width[e]=u.width,t.left[e]=u.left}}),i.registerRequestToMeasureChildren("tpa.viewer.components.StripShowcase",[["iframe"]]),i.registerPatcher("tpa.viewer.components.StripShowcase",o),i.registerRequestToMeasureChildren("tpa.viewer.components.StripSlideshow",[["iframe"]]),i.registerPatcher("tpa.viewer.components.StripSlideshow",o),i.registerRequestToMeasureChildren("tpa.viewer.components.Collage",[["iframe"]]),i.registerPatcher("tpa.viewer.components.Collage",function(e,i,n,o){o.propertiesItem.fitToScreenWidth&&t.isOpen("sv_kill980")?i.css(e+"iframe",{width:"100%"}):i.css(e+"iframe",{width:n.width[e]})})}),define("layout/specificComponents/formMixinLayout",["layout/util/layout"],function(e){"use strict";function t(e,t,i){!function(e,t){var i=t.height[e+"wrapper"];i&&(t.height[e]=i)}(e,t);t.width[e]=Math.max(t.width[e],180),t.minWidth[e]=180}["wysiwyg.viewer.components.ContactForm","wysiwyg.viewer.components.DynamicContactForm"].forEach(function(i){e.registerCustomMeasure(i,t),e.registerRequestToMeasureChildren(i,[["wrapper"]]),e.registerPatcher(i,function(e,t,i){t.attr(e,{"data-dcf-columns":(n=i.width[e],n<240?1:n<365?2:n<490?3:4)});var n})}),e.registerRequestToMeasureDom("wysiwyg.common.components.subscribeform.viewer.SubscribeForm"),e.registerRequestToMeasureChildren("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",[["wrapper"]]),e.registerCustomMeasure("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",function(e,t){var i=t.height[e+"wrapper"];i&&(t.height[e]=i)})}),define("layout/specificComponents/wixSiteLayout",["zepto","layout/util/layout"],function(e,t){"use strict";var i=void 0;function n(e){return e.isTabletDevice()&&(t=e,"WixSite"===t.rendererModel.siteInfo.documentType);var t}function o(t,n){i=i||function(){var t=e("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),i=e("<div>").css({width:"100%"}).appendTo(t).width();return t.remove(),100-i}();var o=window.document.body.clientWidth,r=window.innerWidth,a=o;r>o+i&&(a=r),t.body=window.document.body,n.width.body=a}t.registerCustomMeasure("mobile.core.components.MasterPage",function(e,t,i,r){n(r)&&o(i,t)}),t.registerPatcher("mobile.core.components.MasterPage",function(e,t,i,o,r){n(r)&&(a=i,t.css("body",{width:a.width.body}));var a})}),define("layout/specificComponents/fitToContentLayout",["lodash","layout/util/layout"],function(e,t){"use strict";var i=function(e,t){t.css(e,{height:""})};function n(e,t){t.css(e,{width:"",height:""})}return t.registerPatcher("wysiwyg.viewer.components.FacebookShare",n),t.registerPatcher("wysiwyg.viewer.components.PinterestFollow",n),t.registerPatcher("wysiwyg.viewer.components.PayPalButton",n),t.registerPatcher("platform.components.AppController",n),t.registerPatcher("wysiwyg.viewer.components.inputs.RadioGroup",i),t.registerPatcher("wysiwyg.viewer.components.LoginButton",i),t.registerPatcher("wixui.Pagination",i),{}}),define("layout/specificComponents/imageButtonLayout",["lodash","layout/util/layout","layout/specificComponents/imageLayout","imageClientLib"],function(e,t,i,n){"use strict";var o=["defaultImage","hoverImage","activeImage"];t.registerRequestToMeasureDom("wysiwyg.common.components.imagebutton.viewer.ImageButton"),t.registerRequestToMeasureChildren("wysiwyg.common.components.imagebutton.viewer.ImageButton",function(){var t=e.map(o,function(e){return{pathArray:[e],type:"core.components.Image"}});return t.push(["link"]),t}()),t.registerPatcher("wysiwyg.common.components.imagebutton.viewer.ImageButton",function(t,r,a,s,u){var c,l,g=(c=t,l=a,{width:l.width[c],height:l.height[c]});e.forEach(o,function(o){!function(t,o,r,a,s,u,c){var l=s.dataItem[t];if(l){var g=o+t,d=e.defaults({displayMode:n.fittingTypes.LEGACY_FULL},l);i.patchNodeImage(g,r,a,u,d,c)}}(o,t,r,a,s,u,g)});var d=t+"link";r.css(d,{width:g.width,height:g.height})})}),define("layout/specificComponents/boxSlideShowLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/balataLayout"],function(e,t,i,n){"use strict";var o=50;i.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShow",function(e,t){t.height[e]=Math.max(o,t.height[e]),t.minHeight[e]=o}),i.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShowSlide",function(e,i,o,r,a){i.top[e]=0,i.left[e]=0;var s=t(o[e]),u=s.data("parent-id");i.minHeight[e]=s.data("min-height"),i.height[e]=i.height[u],a.designDataItem.background&&n.measure(e,i,o,r,a)}),i.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShow"),i.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShowSlide"),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.BoxSlideShowSlide",[["inlineContentParent"],["inlineContent"]].concat(n.BALATA_PATHS_TO_REQUEST_MEASURE)),i.registerPatcher("wysiwyg.viewer.components.BoxSlideShowSlide",function(e,t,i,o,r){o.designDataItem.background&&n.patch(e,t,i,o,r)})}),define("layout/specificComponents/mediaContainerLayout",["lodash","layout/util/layout","layout/specificComponents/balataLayout"],function(e,t,i){"use strict";var n="container";function o(t,o,r,a,s){if(s.designDataItem.background){i.measure(t,o,r,a,s);var u=t+n,c=window.getComputedStyle(r[u]),l=parseInt(c.getPropertyValue("border-left-width"),10);e.isUndefined(o.borderWidth)&&(o.borderWidth={}),o.borderWidth[t]=l,o.width[t]=s.layout.width||r[t].clientWidth||o.width[t]}}function r(e,t,o,r,a){r.designDataItem.background&&(t.css(e+n,{left:-o.borderWidth[e],top:-o.borderWidth[e]}),i.patch(e,t,o,r,a))}e.forEach(["wysiwyg.viewer.components.MediaBox","wysiwyg.viewer.components.HoverBox","wysiwyg.viewer.components.MediaPlayer","wysiwyg.viewer.components.MediaContainer"],function(e){t.registerCustomMeasure(e,o),t.registerRequestToMeasureChildren(e,i.BALATA_PATHS_TO_REQUEST_MEASURE.concat([[n]])),t.registerPatcher(e,r)})}),define("layout/util/elementQueries",["lodash"],function(e){"use strict";return function(t,i,n){var o="data-element-query-",r={};return e.forEach(n,function(n,a){var s=e.get(i,[a,t]);s&&(r[o+a]="",e.forEach(n,function(e){e.min<s&&e.max>s&&(r[o+a]&&(r[o+a]+=" "),r[o+a]+=e.name)}))}),r}}),define("layout/specificComponents/mediaControlsLayout",["lodash","layout/util/layout","layout/util/elementQueries"],function(e,t,i){"use strict";var n={width:[{min:0,max:350,name:"minimal"},{min:0,max:450,name:"small"},{min:450,max:1200,name:"normal"},{min:1200,max:1/0,name:"large"}]};t.registerPatcher("wysiwyg.viewer.components.MediaControls",function(e,t,o){t.attr(e,i(e,o,n))})}),define("layout/specificComponents/mediaOverlayControlsLayout",["lodash","layout/util/layout","layout/specificComponents/shapeLayout"],function(e,t,i){"use strict";t.registerCustomLayoutFunction("wysiwyg.viewer.components.MediaOverlayControls",function(e,t){var n=e+"catcher",o=t[e].getAttribute("data-player-id");t[n]=t[e].querySelector("#"+n);var r=-t[e].offsetTop,a=-t[e].offsetLeft,s=t[o].offsetWidth,u=t[o].offsetHeight,c=i.layoutShapeNodes(e,t);return function(e){e.css(n,{top:r,left:a,width:s,height:u}),c(e)}})}),define("layout/specificComponents/columnsLayout",["lodash","warmupUtils","experiment","layout/util/layout","layout/specificComponents/balataLayout"],function(e,t,i,n,o){"use strict";var r=t.mediaConsts.balataConsts,a=function(e){return"true"===e.getAttribute("data-mobile-responsive")};var s="wysiwyg.viewer.components.StripColumnsContainer",u="wysiwyg.viewer.components.Column";n.registerRequestToMeasureDom(s),n.registerRequestToMeasureChildren(s,o.BALATA_PATHS_TO_REQUEST_MEASURE),n.registerCustomMeasure(s,function(n,s,u,c,l){var g=c.isMobileView();if(a(u[n]))return s.custom[n]={patchBalataOnly:!0},o.measure(n,s,u,c,l);var d=t.dataUtils.getChildrenData(l.structure,g),h=e.map(d,"id");if(g){var p=2*l.propertiesItem.rowMargin+(d.length-1)*l.propertiesItem.columnsMargin;e.forEach(h,function(e,t){p+=s.height[e],s.minHeight[e]=s.height[e];var i=t===h.length-1;s.injectedAnchors[e]=i?[{fromComp:e,distance:l.propertiesItem.rowMargin,topToTop:0,originalValue:0,type:"BOTTOM_PARENT",locked:!0,targetComponent:n}]:[{fromComp:e,distance:l.propertiesItem.columnsMargin,locked:!0,originalValue:0,targetComponent:h[t+1],topToTop:0,type:"BOTTOM_TOP"}]}),s.height[n]=p,s.height[n+r.BALATA]=p}else{var m=e(s.height).pick(h).values().max();e.forEach(h,function(e){s.top[e]=l.propertiesItem.rowMargin,s.minHeight[e]=m,s.injectedAnchors[e]=[{fromComp:e,distance:0,originalValue:0,type:"BOTTOM_PARENT",locked:!0,targetComponent:n}]}),s.height[n]=m+2*l.propertiesItem.rowMargin,s.containerHeightMargin[n]=l.propertiesItem.rowMargin,s.height[n+r.BALATA]=m+2*l.propertiesItem.rowMargin}if(o.measure(n,s,u,c,l),!i.isOpen("sv_kill980")){var f=u[n].getBoundingClientRect(),y=u[n+r.BALATA].offsetLeft;s.custom[n]={absoluteLeft:f.left+y,backgroundLeft:u[n+r.BALATA].offsetLeft,backgroundWidth:u[n+r.BALATA].offsetWidth}}}),n.registerPatcher(s,function(t,n,r,a,s){if(e.get(r.custom,[t,"patchBalataOnly"],!1))return o.patch(t,n,r,a,s);if(n.css(t,{height:r.height[t],left:0}),i.isOpen("sv_kill980"))return a.propertiesItem.fullWidth&&n.css(t,{width:"100%"}),void o.patch(t,n,r,a,s);var u={top:0,left:r.custom[t].backgroundLeft,width:r.custom[t].backgroundWidth,height:r.height[t],absoluteLeft:r.custom[t].absoluteLeft};o.patch(t,n,r,a,s,u,!0)}),n.registerRequestToMeasureDom(u),n.registerRequestToMeasureChildren(u,o.BALATA_PATHS_TO_REQUEST_MEASURE),n.registerLayoutInnerCompsFirst(u,function(t,i,n,o,r,s,u){if(!e.isEmpty(r.anchorsMap)&&!a(i)){var c=t.structure,l=c.id,g=n.height[l];s(c),n.minHeight[l]=0,n.height[l]=c.layout.height;var d=u(c);return r.isMobileView()&&(n.top[l]=o[l].offsetTop),g!==n.height[l]&&e.set(d,l,!0),{needsAdditionalInnerLayout:!1,needsParent:!0,changedCompsMap:e.mapValues(d,e.constant(!0))}}},e.noop),n.registerCustomMeasure(u,function(e,n,s,u,c){if(a(s[e]))return n.custom[e]={patchBalataOnly:!0},o.measure(e,n,s,u,c);var l=s[e];n.height[e]=n.minHeight[e],n.width[e]=l.offsetWidth,o.measure(e,n,s,u,c),t.layoutUtils.getLayoutMechanism(u)===t.constants.LAYOUT_MECHANISMS.ANCHORS&&(n.height[e+r.BALATA]=n.minHeight[e]);var g=l.getBoundingClientRect();if(i.isOpen("sv_kill980"))n.custom[e]={absoluteLeft:g.left};else{var d=s[e+r.BALATA].offsetLeft;n.custom[e]={absoluteLeft:g.left+d,backgroundLeft:s[e+r.BALATA].offsetLeft,backgroundWidth:s[e+r.BALATA].offsetWidth}}}),n.registerPatcher(u,function(t,n,r,a,s){if(e.get(r.custom,[t,"patchBalataOnly"],!1))return o.patch(t,n,r,a,s);if(n.css(t,{height:r.height[t]}),i.isOpen("sv_kill980"))return s.isMobileView()||n.css(t,{left:"",width:"",position:"relative"}),void o.patch(t,n,r,a,s);var u={top:0,left:r.custom[t].backgroundLeft,width:r.custom[t].backgroundWidth,height:r.height[t],absoluteLeft:r.custom[t].absoluteLeft};o.patch(t,n,r,a,s,u,!0)})}),define("layout/util/popupContainerDocking",["lodash","experiment","layout/specificComponents/balataLayout","layout/util/rootLayoutUtils","layout/util/calculateScreenWidthDimensions","warmupUtils"],function(e,t,i,n,o,r){"use strict";var a="fullHeight",s="fullWidth";function u(t){return e.get(t.designDataItem,"background",e.get(t.dataItem,"background"))}return{measure:function(e,n,c,l,g){var d=g.propertiesItem,h=void 0;d.alignmentType!==s?(d.alignmentType===a&&(n.minHeight[e]=n.innerHeight.screen,n.shrinkableContainer[e]=!0,h={top:0,left:0,width:n.width[e],height:n.innerHeight.screen}),n.left[e]=r.compAlignmentUtils.getLeft(d,n.width[e],n.width.screen,l.getSiteWidth()),i.measure(e,n,c,l,g,h)):function(e,n,r,a,s){var c=n.height[e+"inlineContent"]||0,l=o(n,a,s.rootId),g=l.width,d=l.left;n.left[e]=0,n.width[e]=t.isOpen("sv_kill980")?r[e].offsetWidth:g,n.containerHeightMargin[e]=c?r[e].offsetHeight-c:0,u(s)&&i.measure(e,n,r,a,s,!t.isOpen("sv_kill980")&&{top:0,left:d,width:g,height:n.height[e]})}(e,n,c,l,g)},patch:function(e,t,o,a,c){var l=a.propertiesItem,g=c.getCurrentPopupId(),d=r.compAlignmentUtils.getTop(l,o.height[e],o.innerHeight.screen),h=o.height[g]=d+o.height[e];o.top[e]=d,t.css(g,{height:h}),t.css(e,{left:o.left[e],top:d,width:o.width[e],height:o.height[e]}),l.alignmentType===s?(p=e,m=t,f=o,w=c,u(y=a)&&(m.css(p,{left:0,width:n.getRootWidth(w,f,y.rootId)}),i.patch(p,m,f,y,w))):i.patch(e,t,o,a,c);var p,m,f,y,w}}}),define("layout/specificComponents/popupContainerLayout",["lodash","experiment","layout/util/layout","layout/util/popupContainerDocking","layout/specificComponents/screenWidthLayouts/screenWidthContainerLayout","layout/specificComponents/balataLayout"],function(e,t,i,n,o,r){"use strict";i.registerMeasureChildrenFirst("wysiwyg.viewer.components.PopupContainer",!0),i.registerRequestToMeasureChildren("wysiwyg.viewer.components.PopupContainer",[["inlineContent"]].concat(r.BALATA_PATHS_TO_REQUEST_MEASURE)),i.registerRequestToMeasureDom("wysiwyg.viewer.components.PopupContainer"),i.registerCustomMeasure("wysiwyg.viewer.components.PopupContainer",function(e,i,r,a,s){o.measureContainer(e,i,r,a,s),n.measure(e,i,r,a,s);var u="fullWidth"===s.propertiesItem.alignmentType,c=t.isOpen("sv_kill980"),l="ROOT_"+s.rootId;i.width[l]=u&&!c?a.getSiteWidth():i.width[e],i.left[l]=u&&c?0:Math.floor(i.left[e]-a.getSiteX())}),i.registerPatcher("wysiwyg.viewer.components.PopupContainer",function(e,t,i,o,r){n.patch(e,t,i,o,r)})}),define("layout/specificComponents/rssButtonLayout",["lodash","layout/util/layout","layout/specificComponents/imageLayout"],function(e,t,i){"use strict";t.registerRequestToMeasureChildren("wysiwyg.common.components.rssbutton.viewer.RSSButton",function(t,i,n){return[{type:"core.components.Image",pathArray:[e.get(n,["dataItem","image","id"])]}]}),t.registerPatcher("wysiwyg.common.components.rssbutton.viewer.RSSButton",function(t,n,o,r,a){var s=e.get(r,"layout"),u=e.get(r,["dataItem","image"]);e.assign(u,{displayMode:"full"}),i.patchNodeImage(t+e.get(u,"id"),n,o,a,u,s)})}),define("layout/specificComponents/semiNativeComponentLayout",["zepto","lodash","layout/util/layout","warmupUtils","imageClientLib"],function(e,t,i,n,o){"use strict";function r(e,t){return e+"_images_"+t}i.registerCustomMeasure("platform.components.semiNativeComponent",function(i,n,o){var a=i+"localContainer",s=e(o[i]).find("img[data-wix-image='true']").get();n.height[i]=n.height[a],n.custom[i]=[],t.forEach(s,function(e,t){o[r(i,t)]=e,n.custom[i].push({containerSize:e.getBoundingClientRect(),src:e.getAttribute("data-src"),width:e.getAttribute("data-width"),height:e.getAttribute("data-height"),displayMode:e.getAttribute("data-display-mode")})})}),i.registerRequestToMeasureChildren("platform.components.semiNativeComponent",[["localContainer"]]),i.registerPatcher("platform.components.semiNativeComponent",function(e,i,a,s,u){var c=a.custom[e];t.forEach(c,function(t,a){var s=function(e,t,i,r,a,s){var u={imageData:{width:t,height:i,uri:e},containerWidth:r.width,containerHeight:r.height,displayMode:o.fittingTypes[a]};return n.imageUtils.getImageComputedProperties(o,u,s.getMediaFullStaticUrl.bind(s),s.currentUrl,s.mobile.getDevicePixelRatio(),"img")}(t.src,t.width,t.height,t.containerSize,t.displayMode,u),c=r(e,a);i.attr(c,{src:s.uri}),i.css(c,s.css.img)})})}),define("layout/specificComponents/screenWidthLayouts/stripsComponentsLayout",["lodash","layout/util/layout","layout/util/calculateScreenWidthDimensions","layout/specificComponents/bgImageLayout"],function(e,t,i,n){"use strict";function o(t){return"Image"===e.get(t,["dataItem","type"])}var r="wysiwyg.viewer.components.BgImageStrip";t.registerCustomMeasure(r,function(e,t,r,a,s){var u=i(t,a,s.rootId),c=u.width,l=u.left;t.width[e]=c,t.left[e]=l,o(s)&&n.measureLegacyBgImageStrip(e,t,r,a,s)}),t.registerPatcher(r,function(e,t,i,r,a){if(t.css(e,{width:i.width[e]+"px",left:i.left[e]+"px"}),o(r)){var s={width:i.width[e],height:i.height[e]};n.patchLegacyBgImageStrip(e,t,i,r,a,s)}else{var u=e+"bg";t.css(u,{backgroundImage:"none"})}})}),define("layout/specificComponents/screenWidthLayouts/headerLayout",["lodash","experiment","warmupUtils","layout/util/layout"],function(e,t,i,n){"use strict";var o="wysiwyg.viewer.components.HeaderContainer";n.registerRequestToMeasureDom(o),n.registerRequestToMeasureChildren(o,[["screenWidthBackground"],["inlineContent"]]),n.registerCustomLayoutFunction(o,function(e,n,o){var r=n[e],a=e+"screenWidthBackground",s="true"===r.dataset.isMobile,u=i.measurerUtils.getScreenWidth(s),c=parseInt(r.dataset.siteWidth,10);return o.top[e]=parseInt(r.style.top,10),o.left[e]=0,t.isOpen("sv_kill980")?{}:function(t){t.css(a,{width:u,left:s?0:Math.min((c-u)/2,0)}),t.css(e,{left:0})}})}),define("layout/specificComponents/screenWidthLayouts/footerLayout",["warmupUtils","layout/util/layout","experiment"],function(e,t,i){"use strict";var n="wysiwyg.viewer.components.FooterContainer";t.registerRequestToMeasureDom(n),t.registerRequestToMeasureChildren(n,[["screenWidthBackground"],["inlineContent"]]),t.registerCustomLayoutFunction(n,function(t,n,o){var r=n[t],a="true"===r.getAttribute("data-fixedposition"),s="true"===r.getAttribute("data-isrunninginmobile"),u=e.measurerUtils.getScreenWidth(s),c=parseInt(r.getAttribute("data-sitewidth"),10),l=e.measurerUtils.getSiteMarginBottom();return o.left[t]=0,function(e){a&&e.css(t,{left:0,top:"auto",bottom:l});var n=t+"screenWidthBackground",o={width:u};i.isOpen("sv_kill980")||(o.left=s?0:Math.min((c-u)/2,0)),e.css(n,o)}})}),define("layout/specificComponents/screenWidthLayouts/pageLayout",["lodash","warmupUtils","layout/util/layout","layout/specificComponents/balataLayout","experiment"],function(e,t,i,n,o){"use strict";var r=t.mediaConsts.balataConsts.BALATA;function a(t,i,n){var o="true"===i[t].getAttribute("data-ismobile")?"mobile":"desktop";return e.get(n.dataItem,["pageBackgrounds",o,"ref"])}var s="mobile.core.components.Page";i.registerRequestToMeasureDom(s),i.registerMeasureChildrenFirst(s,!0),i.registerRequestToMeasureChildren(s,function(e,t){var i="true"===t[e].getAttribute("data-ispopup")?n.BALATA_PATHS_TO_REQUEST_MEASURE:[];return[["inlineContent"]].concat(_toConsumableArray(i))}),i.registerCustomLayoutFunction(s,function(i,s,u,c,l){var g="true"===s[i].getAttribute("data-ispopup");return function(e,i,n,o,r){if("true"!==n[e].dataset.isMeshLayout){var a=i.containerHeightMargin[e]||0;i.height[e]=t.layoutUtils.getPageBottomChildEnd(i,n,o,r)+a}}(i,u,s,c,l),g&&function(t,i,s,u,c){var l=a(t,s,c);if(l){var g=e.assign({designDataItem:{background:l}},c);if(g.id+=r,o.isOpen("sv_kill980"))return i.height[t]=s[t].offsetHeight,void n.measure(t,i,s,u,g);n.measure(t,i,s,u,g,{left:Math.max(0,.5*(i.clientWidth-i.width.screen)),width:i.width.screen,height:i.innerHeight.screen})}}(i,u,s,c,l),function(t){if(g){var d=i+r,h=e.defaultsDeep({id:d,rootId:"masterPage",structure:{behaviors:[]},designDataItem:{background:a(i,s,l)}},l);if(o.isOpen("sv_kill980"))return void n.patch(i,t,u,h,c);var p={left:u.left[d],top:u.top[d],width:u.width[d],height:u.height[d]};n.patch(i,t,u,h,c,p)}}})}),define("layout/specificComponents/screenWidthLayouts/pagesContainerLayout",["warmupUtils","experiment","layout/util/layout"],function(e,t,i){"use strict";var n="wysiwyg.viewer.components.PagesContainer";i.registerCustomMeasure("wysiwyg.viewer.components.PagesContainer",function(e,t){t.left[e]=0}),i.registerRequestToMeasureChildren(n,[["screenWidthBackground"],["inlineContent"]]),t.isOpen("sv_kill980")||i.registerCustomLayoutFunction(n,function(t,i){var n=i[t],o=t+"screenWidthBackground",r="true"===n.dataset.isMobile,a=parseInt(n.dataset.siteWidth,10),s=e.measurerUtils.getScreenWidth(),u=r?0:Math.min((a-s)/2,0);return function(e){e.css(o,{left:u,width:s})}})}),define("layout/specificComponents/screenWidthLayouts/stripSlideshowLayout",["lodash","layout/util/layout","layout/specificComponents/balataLayout","layout/util/calculateScreenWidthDimensions","layout/util/rootLayoutUtils","experiment"],function(e,t,i,n,o,r){"use strict";var a="wysiwyg.viewer.components.StripContainerSlideShow",s="wysiwyg.viewer.components.StripContainerSlideShowSlide";t.registerRequestToMeasureDom(a),t.registerRequestToMeasureChildren(a,[["background"],["inlineContentParent"],["inlineContent"],["shownOnAllSlides"],["navigationArrows"],["prevButton"],["nextButton"]]),t.registerCustomMeasure(a,function(e,t,i){t.containerHeightMargin[e]=0;var n=i[e+"navigationArrows"];t.custom[e]={offset:parseInt(n.getAttribute("data-navigation-button-margin"),10)},r.isOpen("sv_kill980")||(t.left[e]=0)}),t.registerPatcher(a,function(e,t,i,a,s){var u=Math.min((a.layout.width-i.width.screen)/2,0)+i.custom[e].offset;if(t.css(e+"prevButton",{left:u}),t.css(e+"nextButton",{right:u}),!r.isOpen("sv_kill980")){var c=e+"inlineContent",l=c+"Parent",g=n(i,s,a.rootId);t.css(l,{left:g.left,width:g.width}),t.css(c,{left:-1*g.left,width:o.getRootWidth(s,i,a.rootId)})}}),t.registerRequestToMeasureDom(s),t.registerRequestToMeasureChildren(s,[["inlineContentParent"],["inlineContent"]].concat(_toConsumableArray(i.BALATA_PATHS_TO_REQUEST_MEASURE))),t.registerCustomMeasure(s,function(e,t,o,a,s){var u=o[e],c=u.getAttribute("data-parent-id");if(t.left[e]=0,t.height[e]=t.height[c],t.minHeight[e]=u.getAttribute("data-min-height"),t.width[e]=u.offsetWidth,r.isOpen("sv_kill980"))i.measure(e,t,o,a,s);else{var l=t.height[e+"inlineContent"]||0,g=n(t,a,s.rootId);t.containerHeightMargin[e]=l?o[e].offsetHeight-l:0,t.width[e]=g.width;var d={width:g.width,left:g.left,height:t.height[e]};i.measure(e,t,o,a,s,d)}}),t.registerPatcher(s,function(e,t,a,s,u){if(r.isOpen("sv_kill980"))i.patch(e,t,a,s,u);else{var c=e+"inlineContent",l=c+"Parent",g=n(a,u,s.rootId),d={top:0,left:g.left,width:g.width,height:a.height[e],absoluteLeft:0};t.css(l,{left:g.left,width:g.width}),t.css(c,{left:-1*g.left,width:o.getRootWidth(u,a,s.rootId)}),i.patch(e,t,a,s,u,d)}})}),define("layout/specificComponents/quickActionBarLayout",["zepto","lodash","layout/util/layout","warmupUtils"],function(e,t,i,n){"use strict";var o="actionsContainer",r="maxTextWidth";i.registerRequestToMeasureChildren("wysiwyg.viewer.components.QuickActionBar",[[o]]),i.registerCustomMeasure("wysiwyg.viewer.components.QuickActionBar",function(i,a,s,u,c){var l=e("#SITE_ROOT")[0],g=n.domMeasurements.getElementRect(s[i],l);a.width[i]=g.width,a.height[i]=g.height;var d=t.includes(s[i].className.split(/\s+/),c.styleItem.id+"_closed");a.width[i+r]=d?0:function(i){var n=e(i).find('div[data-quick-action="text"]');return t(n).map(function(i){var n=+t.replace(e(i).css("width"),"px","");return t.isNaN(n)?0:n}).max()}(s[i]);var h=u.mobile.isZoomed(),p=u.isMobileDevice();a.custom[i]={isZoomed:h&&p,visibility:s[i].style.visibility},d&&(a.height[i+o]=g.height,a.width[i+o]=g.width)}),i.registerPatcher("wysiwyg.viewer.components.QuickActionBar",function(e,t,i){t.css(e,{top:"",left:"",width:"",height:"","z-index":1001,visibility:i.custom[e].isZoomed?"hidden":i.custom[e].visibility,"pointer-events":i.custom[e].isZoomed?"none":""})})}),define("layout/specificComponents/quickActionBarItemLayout",["layout/util/layout"],function(e){"use strict";e.registerPatcher("wysiwyg.viewer.components.QuickActionBarItem",function(e,t){t.css(e,{top:"",left:"",width:"",height:"",position:"","z-index":""})})}),define("layout/specificComponents/touchMediaZoomLayout",["zepto","lodash","warmupUtils","layout/util/layout"],function(e,t,i,n){"use strict";var o=i.touchMediaZoomUtils,r=.2;n.registerCustomMeasure("wysiwyg.viewer.components.TouchMediaZoomItem",function(i,n,o){var r=e(o[i]);if(r.data("firstrender")){n.custom[i]={imageIds:[]};var a=t.toArray(r.find("img"));t.forEach(a,function(t,r){var a=i+"_image"+r;o[a]=t,n.custom[i].imageIds.push(a),n.custom[a]={imageData:e(t).data("imgdata"),scale:e(t).data("imgscale")}});var s=r.attr("id");o[i+"imageContainer"]=r.find("#"+s+"imageContainer").get(0),o[i+"info"]=r.find("#"+s+"info").get(0)}}),n.registerRequestToMeasureChildren("wysiwyg.viewer.components.TouchMediaZoom",[{pathArray:["stage_LEFT"],type:"wysiwyg.viewer.components.TouchMediaZoomItem"},{pathArray:["stage_CENTER"],type:"wysiwyg.viewer.components.TouchMediaZoomItem"},{pathArray:["stage_RIGHT"],type:"wysiwyg.viewer.components.TouchMediaZoomItem"}]),n.registerPatcher("wysiwyg.viewer.components.TouchMediaZoom",function(e,i,n,a,s){i.css(e,{top:0,position:"absolute",width:"100%",height:"100%"}),t.forEach(["stage_LEFT","stage_CENTER","stage_RIGHT"],function(a){u=e+a,c=i,g=s,(l=n).custom[u]&&(t.forEach(l.custom[u].imageIds,function(e){var t={pixelAspectRatio:g.mobile.getDevicePixelRatio(),browser:g.getBrowser(),staticMediaUrl:g.getStaticMediaUrl(),screenSize:{width:l.width.screen,height:l.height.screen}},i=l.custom[e],n=o.getImageApiData(i.imageData,t,i.scale);c.css(e,n.css.img),c.attr(e,{src:n.uri})}),c.css(u,{width:(1+2*r)*l.width.screen}),c.css(u+"imageContainer",{width:l.width.screen}),c.css(u+"info",{width:l.width.screen}));var u,c,l,g})})}),define("layout/specificComponents/siteButtonLayout",["lodash","zepto","warmupUtils","layout/util/layout"],function(e,t,i,n){"use strict";var o=new WeakMap;n.registerCustomDomChangesFunction("wysiwyg.viewer.components.SiteButton",function(n){var r,a,s=n.getAttribute("id"),u=n.querySelector("#"+s+"label"),c=t(n),l=c.data("width"),g=c.data("height"),d=o.get(n)||{},h=d.prevWidth,p=d.prevMinWidth,m=d.prevText,f=u.offsetHeight,y=u.offsetWidth,w=u.innerHTML,v=c.data("should-use-flex"),C=window.getComputedStyle(n),M=window.getComputedStyle(u),S=(r=C,r.minHeight&&Boolean(parseInt(r.minHeight,10))?parseInt(C.minHeight,10):f),I=v?y:y+(a=M,parseInt(a.marginRight,10)+parseInt(a.marginLeft,10)),b=c.data("shouldPreventWidthMeasurement"),T=l,A=g,D=Math.max(A,S),E=T;b||(E=w!==m&&(L=I,L<p)&&h===p&&y>0?I:Math.max(E,I));var L,P,x={align:c.attr("data-align"),margin:parseInt(c.attr("data-margin"),10),text:w,label:{verticalPadding:(P=M,parseInt(P.paddingTop,10)+parseInt(P.paddingBottom,10))}},H=y+x.margin>E;if("center"!==x.align){var _=v?"margin":"margin-"+x.align;x.label[_]=H?E-y:x.margin}var R={height:D,minHeight:S};b||(R.width=E);o.set(n,{prevText:x.text,prevMinWidth:I,prevWidth:E});var B=i.constants.COMP_LAYOUT_OPTIONS.CHANGES_TYPES;return[{node:n,type:B.css,changes:R},{node:u,type:B.css,changes:function(){var t=void 0;if(v){t={};var i=x.align;return"center"!==i&&x.label.margin&&(t["margin-"+i]=x.label.margin),t}return t={"line-height":D-x.label.verticalPadding+"px"},e.reduce(["margin-left","margin-right"],function(t,i){return e.isUndefined(x.label[i])||(t[i]=x.label[i]),t},t)}()}]})}),define("layout",["lodash","layout/util/layout","layout/util/rootLayoutUtils","layout/specificComponents/balataLayout","layout/specificComponents/screenWidthLayouts/screenWidthContainerLayout","layout/util/singleCompLayout","layout/specificComponents/matrixGalleryLayout","layout/specificComponents/paginatedGridGalleryLayout","layout/specificComponents/richtextLayout","layout/specificComponents/slideShowLayout","layout/specificComponents/sliderGalleryLayout","layout/specificComponents/wPhotoLayout","layout/specificComponents/fiveGridLineLayout","layout/specificComponents/registerToMeasureOnly","layout/specificComponents/registerToPureDomMeasure","layout/specificComponents/menuLayout","layout/specificComponents/verticalMenuLayout","layout/specificComponents/loginSocialBarLayout","layout/specificComponents/dialogLayout","layout/specificComponents/siteBackgroundLayout","layout/specificComponents/wixFreemiumBannerLayout","layout/specificComponents/documentMediaLayout","layout/specificComponents/screenWidthLayouts/containerAndScreenWidthLayout","layout/specificComponents/shapeLayout","layout/specificComponents/tinyMenuLayout","layout/specificComponents/imageZoomLayout","layout/specificComponents/tpaGalleryLayout","layout/specificComponents/formMixinLayout","layout/specificComponents/bgImageLayout","layout/specificComponents/wixSiteLayout","layout/specificComponents/fitToContentLayout","layout/specificComponents/imageButtonLayout","layout/specificComponents/boxSlideShowLayout","layout/specificComponents/mediaContainerLayout","layout/specificComponents/mediaControlsLayout","layout/specificComponents/mediaOverlayControlsLayout","layout/specificComponents/columnsLayout","layout/specificComponents/popupContainerLayout","layout/specificComponents/rssButtonLayout","layout/specificComponents/semiNativeComponentLayout","layout/specificComponents/screenWidthLayouts/stripsComponentsLayout","layout/specificComponents/screenWidthLayouts/headerLayout","layout/specificComponents/screenWidthLayouts/footerLayout","layout/specificComponents/screenWidthLayouts/pageLayout","layout/specificComponents/screenWidthLayouts/pagesContainerLayout","layout/specificComponents/screenWidthLayouts/stripSlideshowLayout","layout/specificComponents/screenWidthLayouts/containerAndScreenWidthLayout","layout/specificComponents/quickActionBarLayout","layout/specificComponents/quickActionBarItemLayout","layout/specificComponents/touchMediaZoomLayout","layout/specificComponents/siteButtonLayout"],function(e,t,i,n,o,r,a,s,u,c,l,g){"use strict";return e.assign(t,{singleCompLayout:r,rootLayoutUtils:i,specificComponents:{balataLayout:n,screenWidthContainerLayout:o,matrixGalleryLayout:a,paginatedGridGalleryLayout:s,richtextLayout:u,slideShowLayout:c,sliderGalleryLayout:l,wPhotoLayout:g}})});
//# sourceMappingURL=layout.min.js.map
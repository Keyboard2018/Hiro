define(["lodash","coreUtilsLib","imageClientLib"],function(e,t,n){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function i(e){this.migrationMap=e}var o=n(0),r=n(1);i.prototype.getComponentData=function(e,t){return t.dataQuery&&e.data.document_data[t.dataQuery.replace("#","")]},i.prototype.setComponentData=function(e,t,n,i){var a=t.dataQuery||o.get(i,[t.id,"dataQuery"])||r.guidUtils.getUniqueId("dataItem","-");a=a.replace("#",""),t.dataQuery="#"+a,n.id=a,e.data.document_data[a]=n,o.set(i,[t.id,"dataQuery"],a)},i.prototype.deleteComponentData=function(e,t){var n=t.dataQuery&&t.dataQuery.replace("#","");n&&e.data.document_data[n]&&delete e.data.document_data[n]},i.prototype.getComponentDesignData=function(e,t){return t.designQuery&&e.data.design_data[t.designQuery.replace("#","")]},i.prototype.deleteComponentDesignData=function(e,t){var n=t.designQuery&&t.designQuery.replace("#","");n&&e.data.design_data[n]&&delete e.data.design_data[n]},i.prototype.getComponentProperties=function(e,t){return t.propertyQuery&&e.data.component_properties[t.propertyQuery.replace("#","")]},i.prototype.deleteComponentProperties=function(e,t){var n=t.propertyQuery&&t.propertyQuery.replace("#","");n&&e.data.component_properties[n]&&delete e.data.component_properties[n],t.propertyQuery&&delete t.propertyQuery},i.prototype.setComponentDesignData=function(e,t,n,i){var a=t.designQuery||o.get(i,[t.id,"designQuery"])||r.guidUtils.getUniqueId("dataItem","-");if(a=a.replace("#",""),t.designQuery="#"+a,n.id=a,o.isObject(n.background)){var s=o.clone(n.background);s.id=(s.id||r.guidUtils.getUniqueId("dataItem","-")).replace("#",""),n.background="#"+s.id,e.data.design_data[s.id]=s}e.data.design_data[a]=n,o.set(i,[t.id,"designQuery"],t.designQuery)},i.prototype.setComponentProperties=function(e,t,n,i){var a=t.propertyQuery||o.get(i,[t.id,"propertyQuery"])||r.guidUtils.getUniqueId("propItem","-");a=a.replace("#",""),t.propertyQuery=a,n.id=a,e.data.component_properties[a]=n,o.set(i,[t.id,"propertyQuery"],a)},i.prototype.migrateComps=function(e,t,n,i){var r=this;o.forEach(i,function(i){r.migrationMap[i.componentType]&&r.migrationMap[i.componentType].call(r,e,t,n,i),r.migrateComps(e,t,n,i.components)})},i.prototype.migratePage=function(e){var t=e.structure;if(t){var n={},i=t.components||t.children,o=t.mobileComponents;i&&this.migrateComps(e,n,!1,i),o&&this.migrateComps(e,n,!0,o)}},e.exports=i},function(e,t,n){"use strict";function i(e){return(e||"").toLowerCase().trim()}function o(e){var t=i(e.bgRepeat),n=i(e.bgSize),o=l[t];return y[n]&&y[n](o)}function r(e){return e=i(e),f[e]}function a(e){return g[e]||g[""]}function s(e){return w[e]||w[""]}function c(e){return v[e]||v[""]}function u(e){return e===d.TILE?d.LEGACY_STRIP_TILE:e===d.TILE_HORIZONTAL?d.LEGACY_STRIP_TILE_HORIZONTAL:e===d.TILE_VERTICAL?d.LEGACY_STRIP_TILE_VERTICAL:e===d.SCALE_TO_FILL?d.LEGACY_STRIP_SCALE_TO_FILL:e===d.SCALE_TO_FIT?d.LEGACY_STRIP_SCALE_TO_FIT:e===d.FIT_AND_TILE?d.LEGACY_STRIP_FIT_AND_TILE:e===d.LEGACY_ORIGINAL_SIZE?d.LEGACY_STRIP_ORIGINAL_SIZE:e}var p=n(7),d=p.fittingTypes,m=p.alignTypes,l={"repeat-x":d.TILE_HORIZONTAL,"repeat no_repeat":d.TILE_HORIZONTAL,"repeat no-repeat":d.TILE_HORIZONTAL,"repeat-y":d.TILE_VERTICAL,"no_repeat repeat":d.TILE_VERTICAL,"no-repeat repeat":d.TILE_VERTICAL,repeat:d.TILE,"repeat repeat":d.TILE,"":""};Object.freeze(l);var y={auto:function(e){return e||d.LEGACY_ORIGINAL_SIZE},cover:function(){return d.SCALE_TO_FILL},contain:function(e){return e?d.FIT_AND_TILE:d.SCALE_TO_FIT},"":function(){return d.SCALE_TO_FILL}};Object.freeze(y);var f={"center center":m.CENTER,center:m.CENTER,"50% 50%":m.CENTER,"top center":m.TOP,"center top":m.TOP,"50% 0%":m.TOP,"bottom center":m.BOTTOM,"center bottom":m.BOTTOM,"50% 100%":m.BOTTOM,"center right":m.RIGHT,"right center":m.RIGHT,"100% 50%":m.RIGHT,"center left":m.LEFT,"left center":m.LEFT,"0% 50%":m.LEFT,"left top":m.TOP_LEFT,"top left":m.TOP_LEFT,"0% 0%":m.TOP_LEFT,"right top":m.TOP_RIGHT,"top right":m.TOP_RIGHT,"100% 0%":m.TOP_RIGHT,"left bottom":m.BOTTOM_LEFT,"bottom left":m.BOTTOM_LEFT,"0% 100%":m.BOTTOM_LEFT,"right bottom":m.BOTTOM_RIGHT,"bottom right":m.BOTTOM_RIGHT,"100% 100%":m.BOTTOM_RIGHT,"":m.CENTER};Object.freeze(f);var g=function(){var e={};return e[d.LEGACY_STRIP_TILE_HORIZONTAL]="repeat-x",e[d.TILE_HORIZONTAL]="repeat-x",e[d.LEGACY_STRIP_TILE_VERTICAL]="repeat-y",e[d.TILE_VERTICAL]="repeat-y",e[d.LEGACY_STRIP_TILE]="repeat",e[d.TILE]="repeat",e[d.FIT_AND_TILE]="repeat",e[""]="no-repeat",e}();Object.freeze(g);var w=function(){var e={};return e[d.LEGACY_ORIGINAL_SIZE]="auto",e[d.LEGACY_STRIP_ORIGINAL_SIZE]="auto",e[d.SCALE_TO_FILL]="cover",e[d.LEGACY_STRIP_SCALE_TO_FILL]="cover",e[d.SCALE_TO_FIT]="contain",e[d.LEGACY_STRIP_SCALE_TO_FIT]="contain",e[d.FIT_AND_TILE]="contain",e[d.LEGACY_STRIP_FIT_AND_TILE]="contain",e[""]="auto",e}();Object.freeze(w);var v=function(){var e={};return e[m.TOP]="center top",e[m.CENTER]="center",e[m.BOTTOM]="center bottom",e[m.TOP_LEFT]="left top",e[m.LEFT]="left center",e[m.BOTTOM_LEFT]="left bottom",e[m.TOP_RIGHT]="right top",e[m.RIGHT]="right center",e[m.BOTTOM_RIGHT]="right bottom",e[""]="center",e}();Object.freeze(v),e.exports={cssToFittingType:o,cssToAlignType:r,fittingTypeToBgRepeat:a,fittingTypeToBgSize:s,alignTypeToBgPosition:c,migrateToLegacyFittings:u}},function(e,t,n){"use strict";var i=n(0),o=n(1),r=n(9),a=n(11),s=n(12),c=n(14),u=n(16),p=n(17),d=n(18),m=n(19),l=n(20),y=n(21),f=n(22),g=n(24),w=n(25),v=n(26),T=n(27),h=n(28),k=n(29),S=n(30),_=n(31),I=n(32),E=n(33),M=n(34),b=n(35),P=n(36),C=n(37),x=n(38),A=n(39),O=n(40),B=n(41),N=n(42),L=n(43),D=n(44),R=n(45),F=n(46),U=n(47),G=n(48),Q=n(49),H=n(50),V=n(51),z=n(52),W=n(53),q=n(54),Y=n(55),j=n(56),Z=n(57),J=n(58),K=n(59),X=n(60),$=n(61),ee=n(62),te=n(63),ne=n(64),ie=n(65),oe=n(66),re=n(67),ae=n(68),se=n(69),ce=n(70),ue=n(71),pe=n(72),de=n(73),me=n(74),le=n(75),ye=n(76),fe=n(77),ge=i.compact([r,s,C,x,A,q,c,u,p,d,m,l,y,f,g,oe,w,v,T,h,k,S,_,a,I,E,M,b,P,$,O,B,N,L,D,R,F,G,Q,H,U,V,z,W,q,Y,j,Z,J,K,X,ee,ne,te,ie,re,ae,se,ce,ue,pe,de,me,le,ye,fe]);Object.freeze(ge);var we=["merge_clipart_and_image","sv_contactFormTemplatesMigration","sv_contactFormFinalMigration","sv_contactFormFinalMigrationEditor","sv_fixedMobileHeader","sv_migrateTpaToSemiNative","se_vector_image","se_proGalleryBGDataFixer","sv_tpaAddPublicAPI","sv_tpaSectionsMobileFSDataFixer"];e.exports=function(e){var t=e.pageJson,n=e.urlFormatModel,r=e.isViewerMode,a=e.clientSpecMap,s=e.quickActionsMenuEnabled,c=e.experiments,u=e.pageIdsArray,p={};p.isSlash=i.matchesProperty("format",o.siteConstants.URL_FORMATS.SLASH)(n),p.pageIdToResolvedUriSEO=i.get(n,"pageIdToResolvedUriSEO",{}),p.clientSpecMap=a,p.quickActionsMenuEnabled=s,p.isExperimentOpen=function(e){return i.includes(i.intersection(we,c),e)},p.isViewerMode=r;var d=t.data||{};return d.document_data=d.document_data||{},d.theme_data=d.theme_data||{},d.component_properties=d.component_properties||{},d.mobile_hints=d.mobile_hints||{},t.data=d,i.forEach(ge,function(e){e.exec(t,u,null,null,null,null,null,p)}),t}},function(e,t,n){"use strict";function i(e){return{id:o.guidUtils.getUniqueId("behavior","-"),type:"ObsoleteBehaviorsList",items:e}}var o=n(1);e.exports={createBehaviorsDataItem:i}},function(e,t,n){"use strict";function i(e){return e&&e.layout&&e.layout.y+e.layout.height}function o(e){return e.layout&&e.layout.anchors||[]}function r(e,t,n){var o=void 0;switch(e.type){case p.BOTTOM_BOTTOM:o=i(n);break;case p.BOTTOM_TOP:o=u.get(n,"layout.y");break;default:return!1}return!u.isUndefined(o)&&o-i(t)<0}function a(e){return e.type===p.BOTTOM_BOTTOM||e.type===p.BOTTOM_TOP}function s(e,t,n,i){if(i[t.id])return!1;i[t.id]=!0;var r=o(t);return r=u.filter(r,a),u.some(r,function(t){return t.targetComponent===e.id||s(e,n[t.targetComponent],n,i)})}function c(e){if(!u.isEmpty(e)){var t=u.keyBy(e,"id");u.forEach(e,function(e){var n=o(e);u.remove(n,function(n){return a(n)&&r(n,e,t[n.targetComponent])&&s(e,t[n.targetComponent],t,{})}),c(e.components)})}}var u=n(0),p={BOTTOM_BOTTOM:"BOTTOM_BOTTOM",BOTTOM_TOP:"BOTTOM_TOP"};e.exports={fixBottomTopBottomBottomCycles:c}},function(e,t){e.exports=n},function(e,t,n){"use strict";var i=n(4),o=n(78),r=n(79),a=n(3),s=n(6);e.exports={fix:i,deprecatedSiteModelMigrater:o,fixBackgroundData:r,imageTransformDataFixers:a,anchorCyclesHelper:s}},function(e,t,n){"use strict";function i(e,t,n,i){if(!n)return void(t[i.id]=i);var o=t[i.id];if(o.componentType!==i.componentType){var r=o.componentType;i.componentType=r;var s=this.getComponentProperties(e,i),c=a[r].propType;!r||s&&s.type===c||(i.propertyQuery=o.propertyQuery)}}var o=n(0),r=n(2),a=n(10);e.exports={exec:function(e){var t=o.mapValues(a,function(){return i});new r(t).migratePage(e)}}},function(e,t,n){"use strict";e.exports={"wysiwyg.viewer.components.MatrixGallery":{propType:"MatrixGalleryProperties"},"wysiwyg.viewer.components.PaginatedGridGallery":{propType:"PaginatedGridGalleryProperties"},"wysiwyg.viewer.components.SliderGallery":{propType:"SliderGalleryProperties"},"wysiwyg.viewer.components.SlideShowGallery":{propType:"SlideShowGalleryProperties"},"tpa.viewer.components.Masonry":{propType:"MasonryProperties"},"tpa.viewer.components.Accordion":{propType:"AccordionProperties"},"tpa.viewer.components.Impress":{propType:"ImpressProperties"},"tpa.viewer.components.Freestyle":{propType:"FreestyleProperties"},"tpa.viewer.components.Collage":{propType:"CollageProperties"},"tpa.viewer.components.Honeycomb":{propType:"HoneycombProperties"},"tpa.viewer.components.StripShowcase":{propType:"StripShowcaseProperties"},"tpa.viewer.components.StripSlideshow":{propType:"StripSlideshowProperties"},"tpa.viewer.components.Thumbnails":{propType:"ThumbnailsProperties"},"wysiwyg.viewer.components.tpapps.TPA3DGallery":{propType:"SlideShowGalleryProperties"},"wysiwyg.viewer.components.tpapps.TPA3DCarousel":{propType:"SlideShowGalleryProperties"}}},function(e,t,n){"use strict";e.exports={exec:function(e){e.structure=e.structure||{},e.structure.layout=e.structure.layout||{},e.structure.layout.y=0}}},function(e,t,n){"use strict";function i(e){e.SITE_STRUCTURE&&(e.masterPage=e.SITE_STRUCTURE),e.masterPage||(e.masterPage={}),e.masterPage.id="masterPage",delete e.SITE_STRUCTURE}function o(e){return 0===l.get(e,"layout.width")}function r(e){return 0===l.get(e,"layout.height")}function a(e){o(e)&&l.set(e,"layout.width",100),r(e)&&l.set(e,"layout.height",100)}function s(e){l.forEach(e,function(e){l.forEach(l.get(e,"layout.anchors"),function(t){switch(e.id){case"SITE_FOOTER":"BOTTOM_PARENT"===t.type&&(t.distance=0);break;case"PAGES_CONTAINER":"BOTTOM_TOP"===t.type&&t.locked&&t.distance>=70&&(t.originalValue=0,t.locked=!1)}})})}function c(e,t){var n=!1;if(l.forEach(["SITE_HEADER","SITE_FOOTER"],function(i){var a=l.find(e,{id:i});o(a)&&(n=!0),r(a)&&(l.set(a,"layout.height",100),n=!0),l.set(a,"layout.width",t)}),n){var i=l.reject(e,{id:"PAGES_CONTAINER"});y(i,[a])}}function u(e,t){if(!t.behaviorQuery)return!1;var n=l.get(e,["data","behaviors_data",t.behaviorQuery]);try{var i=JSON.parse(n.items);return l.some(i,{type:"scrub",name:"ScrubAnimation"})}catch(e){return!1}}function p(e,t,n){var i=l.find(e,{id:"SITE_HEADER"});if(i){n?u(t,i)&&l.set(i,["layout","fixedPosition"],!0):l.set(i,["layout","fixedPosition"],!1);var o=l.find(e,{id:"SITE_FOOTER"});l.set(o,["layout","fixedPosition"],!1)}}function d(e,t){var n=e.structure,i=n.children,o=n.mobileComponents,r=l.get(e,"data.document_data.masterPage.renderModifiers.siteWidth",980);m(i),c(i,r),m(o),c(o,320),p(o,e,t),s(o)}function m(e){l.forEach(f,function(t){if(!l.find(e,{id:t.id})){var n=l.find(e,{componentType:t.componentType});n&&(n.id=t.id)}})}var l=n(0),y=n(13),f=[{componentType:"wysiwyg.viewer.components.PagesContainer",id:"PAGES_CONTAINER"},{componentType:"wysiwyg.viewer.components.FooterContainer",id:"SITE_FOOTER"},{componentType:"wysiwyg.viewer.components.HeaderContainer",id:"SITE_HEADER"}];e.exports={exec:function(e,t,n,o,r,a,s,c){if(e.structure&&"Document"===e.structure.type){e.structure.id="masterPage",e.structure.componentType="mobile.core.components.MasterPage",i(e.data.document_data);d(e,c.isExperimentOpen("sv_fixedMobileHeader"))}return e}}},function(e,t,n){"use strict";function i(e,t){o.forEach(e,function(e){o.forEach(t,function(t){t(e)}),e.components&&i(e.components,t)})}var o=n(0);e.exports=i},function(e,t,n){"use strict";function i(e,t){return T.map(e,function(e){return o(t,e)})}function o(e,t){var n=_+k++,o=e[y(t.refId)];return e[n]={id:n,label:o.title,isVisible:!o.hidePage,isVisibleMobile:void 0!==o.mobileHidePage?!o.mobileHidePage:!o.hidePage,items:i(t.items,e),link:r(e,t.refId),type:"BasicMenuItem",metaData:{}},"#"+n}function r(e,t){var n=I+S++;return e[n]={id:n,type:"PageLink",pageId:t,metaData:{}},"#"+n}function a(e,t){return t&&e[y(t)]}function s(e){delete e.link}function c(e,t){var n=a(e,t.link);return"PageLink"===T.get(n,"type")?n:void 0}function u(e,t){var n=c(e,t);return n&&!a(e,n.pageId)}function p(e,t){return t.link&&("#CUSTOM_MENU_HEADER"===t.link||u(e,t))}function d(e,t){t.items=T.filter(t.items,function(t){return!T.isUndefined(a(e,t))}),T.forEach(t.items,function(t){var n=a(e,t);p(e,n)&&s(n),d(e,n)})}function m(e){T(e.data.document_data).filter({type:"Menu"}).map("id").forEach(function(t){delete e.data.document_data[t]})}function l(e){return"Page"===T.get(e,"structure.type")}function y(e){return T.replace(e,"#","")}function f(e,t){var n=e.CUSTOM_MAIN_MENU.items,i=T(e).filter({type:"BasicMenuItem"}).map("link").compact().map(y).map(function(t){return e[t]}).map("pageId").compact().map(y).value(),o=T.difference(t,i);T.forEach(o,function(t){e[t].isPopup||n.push(g(e,t))})}function g(e,t){var n=_+k++,i=e[t];return e[n]={id:n,label:i.title,isVisible:!i.hidePage,isVisibleMobile:void 0!==i.mobileHidePage?!i.mobileHidePage:!i.hidePage,items:[],link:r(e,"#"+t),type:"BasicMenuItem",metaData:{}},"#"+n}function w(e,t){var n=T.filter(e,function(e){return e.id&&0===e.id.indexOf(t)}),i=-1;return T.forEach(n,function(e){var n=Number(e.id.replace(t,""));n>i&&(i=n)}),++i}function v(e,t){function n(t){t.items=T.filter(t.items,i),T(t.items).map(function(t){return a(e.data.document_data,t)}).forEach(n)}function i(n){var i=e.data.document_data,o=a(i,n);return function(){return!o.link}()||function(){return!c(i,o)}()||function(){var e=a(i,o.link),n=T.get(e,"pageId");return T.includes(t,y(n))}()}return{removeInvalidSubMenues:n}}var T=n(0),h=n(15),k=0,S=0,_="bmi",I="pglk";e.exports={exec:function(e,t){if(l(e))return void m(e);h.exec(e,t);var n=e.data.document_data;k=w(n,_),S=w(n,I),e.data.document_data.CUSTOM_MAIN_MENU||(e.data.document_data.CUSTOM_MAIN_MENU={id:"CUSTOM_MAIN_MENU",items:i(e.data.document_data.MAIN_MENU.items,e.data.document_data),name:"Custom Main Menu",type:"CustomMenu",metaData:{}}),e.data.document_data.CUSTOM_MENUS?T.includes(e.data.document_data.CUSTOM_MENUS.menus,"#CUSTOM_MAIN_MENU")||e.data.document_data.CUSTOM_MENUS.menus.push("#CUSTOM_MAIN_MENU"):e.data.document_data.CUSTOM_MENUS={id:"CUSTOM_MENUS",menus:["#CUSTOM_MAIN_MENU"],type:"CustomMenusCollection",metaData:{}},f(n,t),n.CUSTOM_MAIN_MENU.items=T.uniq(n.CUSTOM_MAIN_MENU.items),d(n,n.CUSTOM_MAIN_MENU),e.data.document_data.MAIN_MENU.items.length>0&&(e.data.document_data.MAIN_MENU.items=[]);var o=e.data.document_data.CUSTOM_MAIN_MENU;v(e,t).removeInvalidSubMenues(o)}}},function(e,t,n){"use strict";function i(e){return w.reduce(e.items,function(e,t){return e.push(t.refId),t.items&&t.items.length?e.concat(i(t)):e},[])}function o(e){return i(e.MAIN_MENU)}function r(e,t){var n=e.items[t];n.items&&n.items.length>0&&w.forEach(n.items,function(t,i){e.items.push(t),delete n.items[i]}),n.items=[],e.items.splice(t,1)}function a(e,t){var n={};return w.find(e.items,function(e,i){return n.topIndex=i,w.find(e.items,function(e,i){if(e.refId===t)return n.subIndex=i,!0})}),n}function s(e,t){var n=w.findIndex(e.items,{refId:t});if(n>=0)r(e,n);else{var i=a(e,t);e.items[i.topIndex].items.splice(i.subIndex,1)}}function c(e,t){var n=e.MAIN_MENU;w.forEach(t,function(e){e||s(n,e)}),w.pull(t,"",void 0)}function u(e,t,n){w.forEach(t,function(t){w.includes(n,t.slice(1))||s(e.MAIN_MENU,t)})}function p(e,t,n){var i=e.MAIN_MENU,o=0===i.items.length;if(!!e.CUSTOM_MAIN_MENU){if(o)return;delete e.CUSTOM_MAIN_MENU,delete e.CUSTOM_MENUS}w.forEach(n,function(e){if(!w.includes(t,"#"+e)){t.push("#"+e);var n={items:[],refId:"#"+e};i.items.push(n)}})}function d(e){return e.replace("#","")}function m(e,t){e&&e.mainPage&&!w.includes(t,d(e.mainPage))&&(e.mainPage="#"+t[0])}function l(e,t){return!e[d(t)]}function y(e){var t=w.get(e,["CUSTOM_MAIN_MENU","items"]);t&&w.some(t,w.partial(l,e))&&(delete e.CUSTOM_MAIN_MENU,delete e.CUSTOM_MENUS)}function f(e){return"Document"===w.get(e,"structure.type")}function g(e,t){var n=o(e);y(e),c(e,n),u(e,n,t),p(e,n,t),m(e.masterPage,t)}var w=n(0);e.exports={exec:function(e,t){var n=e.data.document_data;f(e)&&(n.MAIN_MENU=n.MAIN_MENU||{items:[],type:"Menu",id:"MAIN_MENU",metaData:{}},t&&g(n,t))}}},function(e,t,n){"use strict";function i(e,t,n,i){var o=this.getComponentData(e,i);o&&"CustomMenuDataRef"===o.type||(delete i.dataQuery,this.setComponentData(e,i,{menuRef:"#CUSTOM_MAIN_MENU",type:"CustomMenuDataRef"},t))}var o=n(2),r={"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":i,"wysiwyg.viewer.components.menus.DropDownMenu":i},a=new o(r);e.exports={exec:a.migratePage.bind(a)}},function(e,t,n){"use strict";function i(e){e.skin&&a[e.skin]&&(e.skin=a[e.skin])}function o(e,t){var n=void 0,r=void 0,a=e[t]||e.components;if(a)for(n=0;n<a.length;n++)r=a[n],i(r),o(r,t)}var r=n(0),a={"mobile.core.skins.InlineSkin":"skins.core.VerySimpleSkin","mobile.core.skins.TwitterTweetSkin":"skins.core.TwitterTweetSkin","mobile.core.skins.ButtonSkin":"skins.core.ButtonSkin","mobile.core.skins.ContactItemSkin":"skins.core.ContactItemSkin","mobile.core.skins.ContactListSkin":"skins.core.ContactListSkin","mobile.core.skins.FacebookCommentSkin":"skins.core.FacebookCommentSkin","mobile.core.skins.GlobalMenuSkin":"skins.core.GlobalMenuSkin","mobile.core.skins.GooglePlusOneSkin":"skins.core.GooglePlusOneSkin","mobile.core.skins.HeaderSkin":"skins.core.HeaderSkin","mobile.core.skins.HomeButtonSkin":"skins.core.HomeButtonSkin","mobile.core.skins.ImageNewSkin":"skins.core.ImageNewSkin","mobile.core.skins.ImageSkin":"skins.core.ImageSkin","mobile.core.skins.MenuButtonSkin":"skins.core.MenuButtonSkin","mobile.core.skins.NetworkItemSkin":"skins.core.NetworkItemSkin","mobile.core.skins.NetworkListSkin":"skins.core.NetworkListSkin","mobile.core.skins.PageTitleSkin":"skins.core.PageTitleSkin","mobile.core.skins.PhotoFullScreenSkin":"skins.core.PhotoFullScreenSkin","mobile.core.skins.PhotoGalleryFullScreenDefaultSkin":"skins.core.PhotoGalleryFullScreenDefaultSkin","mobile.core.skins.PhotoGalleryGridDefaultSkin":"skins.core.PhotoGalleryGridDefaultSkin","mobile.core.skins.PhotoSkin":"skins.core.PhotoSkin","mobile.core.skins.RichTextImageSkin":"skins.core.RichTextImageSkin","mobile.core.skins.RichTextSkin":"skins.core.RichTextSkin","mobile.core.skins.ServiceItemSkin":"skins.core.ServiceItemSkin","mobile.core.skins.ServiceListSkin":"skins.core.ServiceListSkin","mobile.core.skins.SimpleButtonSkin":"skins.core.SimpleButtonSkin","mobile.core.skins.SiteNavigationMenuSkin":"skins.core.SiteNavigationMenuSkin","mobile.core.skins.TwitterFollowSkin":"skins.core.TwitterFollowSkin","mobile.core.skins.FacebookLikeSkin":"skins.core.FacebookLikeSkin","skins.viewer.gallerymatrix.PolaroidCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.PolaroidCustomHeightSkin","skins.viewer.gallerymatrix.PolaroidDisplayerCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.PolaroidDisplayerCustomHeightSkin","skins.viewer.gallerymatrix.TextBottomCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.TextBottomCustomHeightSkin","skins.viewer.gallerymatrix.TextBottomDisplayerCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.TextBottomDisplayerCustomHeightSkin","skins.viewer.galleryslider.SliderGalleryScotchTapeSkin":"wysiwyg.viewer.skins.galleryslider.SliderGalleryScotchTapeSkin","skins.viewer.galleryslider.SliderGalleryIronSkin":"wysiwyg.viewer.skins.galleryslider.SliderGalleryIronSkin","skins.viewer.galleryslider.SliderDisplayerIronSkin":"wysiwyg.viewer.skins.galleryslider.SliderDisplayerIronSkin","skins.viewer.galleryslider.SliderDisplayerScotchTapeSkin":"wysiwyg.viewer.skins.galleryslider.SliderDisplayerScotchTapeSkin","wysiwyg.viewer.skins.gallerymatrix.MatrixGallerySeparateTextBoxSkin":"wysiwyg.common.components.matrixgallery.viewer.skins.MatrixGallerySeparateTextBoxSkin","wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryTextOnCenterSkin":"wysiwyg.common.components.matrixgallery.viewer.skins.MatrixGalleryTextOnCenterSkin","wysiwyg.viewer.skins.dropmenu.TextOnlyMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.TextSeparatorsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextSeparatorsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SolidColorMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.ShinyMenuINSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIButtonSkin","wysiwyg.viewer.skins.dropmenu.ShinyMenuIINSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin","wysiwyg.viewer.skins.dropmenu.OverlineMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.OverlineMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateBasicMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateBasicMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateShinyIMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateShinyIIMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIIMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.LinesMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.LinesMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateLinesMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateLinesMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.PointerMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.PointerMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.RibbonsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.RibbonsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.VerticalRibbonsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.VerticalRibbonsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.IndentedMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.IndentedMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateIndentedMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateIndentedMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.ArrowRightMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ArrowRightMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SloppyBorderMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SloppyBorderMenuButtonSkin","wysiwyg.viewer.skins.menu.ShinyMenuISkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin","wysiwyg.viewer.skins.menu.ShinyMenuIISkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin","wysiwyg.viewer.skins.menu.TextOnlyMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonBgFixSkin","wysiwyg.viewer.skins.menu.TextSeparatorsMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextSeparatorsMenuButtonSkin","wysiwyg.viewer.skins.menu.SolidColorMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin","wysiwyg.viewer.skins.menu.OverlineMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.OverlineMenuButtonHorizontalMenuAdaptationSkin","wysiwyg.viewer.skins.menu.SeparateBasicMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateBasicMenuButtonSkin","wysiwyg.viewer.skins.menu.SeparateShinyIMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIMenuButtonSkin","wysiwyg.viewer.skins.menu.SeparateShinyIIMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIIMenuButtonBorderRadiusFixSkin","wysiwyg.viewer.skins.menu.LinesMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.LinesMenuButtonBorderRadiusFixSkin","wysiwyg.viewer.skins.menu.SeparateLinesMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateLinesMenuButtonHorizontalMenuAdaptationSkin","wysiwyg.viewer.skins.menu.PointerMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.PointerMenuButtonHorizontalMenuAdaptationSkin","wysiwyg.viewer.skins.menu.RibbonsMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.RibbonsMenuButtonSkin","wysiwyg.viewer.skins.menu.IndentedMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.IndentedMenuButtonSkin","wysiwyg.viewer.skins.menu.SeparateIndentedMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateIndentedMenuButtonSkin","wysiwyg.viewer.skins.menu.ArrowRightMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ArrowRightMenuButtonSkin","wysiwyg.viewer.skins.menu.SloppyBorderMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SloppyBorderMenuButtonSkin","tpa.viewer.skins.TPAMasonrySkin":"wysiwyg.viewer.skins.TPAMasonrySkin","tpa.viewer.skins.TPA3DCarouselSkin":"wysiwyg.viewer.skins.TPA3DCarouselSkin","tpa.viewer.skins.TPA3DGallerySkin":"wysiwyg.viewer.skins.TPA3DGallerySkin","tpa.viewer.skins.TPAAccordionSkin":"wysiwyg.viewer.skins.TPAAccordionSkin","tpa.viewer.skins.TPACollageSkin":"wysiwyg.viewer.skins.TPACollageSkin","tpa.viewer.skins.TPAEcomGallerySkin":"wysiwyg.viewer.skins.TPAEcomGallerySkin","tpa.viewer.skins.TPAFreestyleSkin":"wysiwyg.viewer.skins.TPAFreestyleSkin","tpa.viewer.skins.TPAHoneycombSkin":"wysiwyg.viewer.skins.TPAHoneycombSkin","tpa.viewer.skins.TPAImpressSkin":"wysiwyg.viewer.skins.TPAImpressSkin","tpa.viewer.skins.TPAStripShowcaseSkin":"wysiwyg.viewer.skins.TPAStripShowcaseSkin","tpa.viewer.skins.TPAStripSlideshowSkin":"wysiwyg.viewer.skins.TPAStripSlideshowSkin","tpa.viewer.skins.TPAThumbnailsSkin":"wysiwyg.viewer.skins.TPAThumbnailsSkin","tpa.common.skins.TPAPreloaderSkin":"wysiwyg.viewer.skins.TPAPreloaderSkin","tpa.common.skins.TPAUnavailableMessageOverlaySkin":"wysiwyg.viewer.skins.TPAUnavailableMessageOverlaySkin"};e.exports={exec:function(e){var t=e.structure;t&&(o(t,"children"),o(t,"mobileComponents"),i(t));var n=e.data&&e.data.theme_data;n&&r.forEach(n,function(e){i(e)})}}},function(e,t,n){"use strict";function i(e,t,n){return e[n.replace("llt_","llf_")]=t,e}function o(e){e.style.properties=u.reduce(e.style.properties,i,{}),e.style.propertiesSource=u.reduce(e.style.propertiesSource,i,{})}function r(e){e.style&&u.forEach(e.style.properties,function(e,t,n){"string"==typeof e&&(n[t]=e.replace(/(\d)x/g,"$1px"))})}function a(){return{type:"TopLevelStyle",id:"v2",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{brd:"color_15",brw:"0px",rd:"0px",shd:"0 1px 4px rgba(0, 0, 0, 0.6);"},propertiesSource:{brd:"theme",brw:"value",rd:"value",shd:"value"},groups:{}},componentClassName:"",pageId:"",compId:"",styleType:"system",skin:"wysiwyg.viewer.skins.video.VideoDefault"}}function s(e){if(!e.v2){var t=a();e.v2=u.cloneDeep(e.vl)||t}}function c(e){u.forOwn(e,function(e){p["*"](e),p[e.skin]&&p[e.skin](e)})}var u=n(0),p={"*":function(e){"THEME_DATA"!==e.id&&(e.style||(e.style={properties:{},propertiesSource:{},groups:{}}))},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutFlat":o,"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutTransparentWithIcon":o};e.exports={exec:function(e){var t=e.data&&e.data.theme_data;u.isEmpty(t)||(s(t),c(t),u.forEach(t,function(e){r(e)}))}}},function(e,t,n){"use strict";function i(e){return e&&"wysiwyg.viewer.components.BgImageStrip"===e.componentType}function o(e){return e&&e.dataQuery&&e.dataQuery.replace("#","")}function r(e){return e.uri.slice(0-p.length)===p}function a(e,t,n){if(i(n)){var a=o(n),s=a&&t[a];s&&(s.title=s.title||"",r(s)||(e[n.id]=a))}}function s(e,t,n){if(i(n)){var o=e[n.id];o?n.dataQuery="#"+o:delete n.dataQuery}}function c(e,t){u.forEach(e,function(e){t(e),c(e.components,t)})}var u=n(0),p="add_image_thumb.png";e.exports={exec:function(e){var t=e.structure,n=t&&(t.components||t.children),i=t&&t.mobileComponents;if(n){var o={};c(n,a.bind(null,o,e.data.document_data)),c(n,s.bind(null,o,e.data.document_data)),c(i,s.bind(null,o,e.data.document_data))}}}},function(e,t,n){"use strict";function i(e){var t={"wysiwyg.viewer.components.HorizontalMenu":{comp:"wysiwyg.viewer.components.menus.DropDownMenu",dataQuery:"#MAIN_MENU"}};return e&&(t["wysiwyg.viewer.components.ClipArt"]={comp:"wysiwyg.viewer.components.WPhoto"}),t}function o(e,t,n){var i=n.componentType,o=e[i];o&&(n.componentType=o.comp,o.dataQuery&&(n.dataQuery=o.dataQuery),o.callback&&o.callback(t))}function r(e,t){"wysiwyg.viewer.components.ItunesButton"===t.componentType&&(t.layout.height=Math.round(t.layout.width/2.75))}function a(e,t){return e.data.component_properties[t.propertyQuery]}function s(e,t){return t.dataQuery&&e.data.document_data[t.dataQuery.replace("#","")]}function c(e,t,n){e.data.component_properties[t.propertyQuery]=n}function u(e,t,n){var i=C.guidUtils.getUniqueId("dataItem","-");t.dataQuery="#"+i,n.id=i,e.data.document_data[i]=n}function p(e){if(e.components.length>0){var t=P.map(e.components,function(e){return e.layout.y+e.layout.height});return P.max(t)}return 0}function d(e){var t=P.find(e.structure.children,{id:"PAGES_CONTAINER"});return t.layout.y+t.layout.height}function m(e,t){"SITE_FOOTER"!==t.id||t.layout||(t.layout={anchors:[],fixedPosition:!1,height:p(t),rotationInDegrees:0,scale:1,width:320,x:0,y:d(e)})}function l(e,t){if(!s(e,t))switch(t.componentType){case"wysiwyg.viewer.components.svgshape.SvgShape":u(e,t,{link:null,type:"SvgShape"});break;case"wysiwyg.viewer.components.WFacebookComment":return void u(e,t,{type:"WFacebookComment",urlFormat:"hashBang"});case"wysiwyg.viewer.components.WFacebookLike":return void u(e,t,{type:"WFacebookLike",urlFormat:"hashBang"})}}function y(e,t){var n=s(e,t);if(n)switch(t.componentType){case"wysiwyg.viewer.components.ClipArt":return void(n.title="");case"wysiwyg.viewer.components.FacebookShare":case"wysiwyg.viewer.components.VKShareButton":case"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":case"wysiwyg.viewer.components.WTwitterTweet":case"wysiwyg.viewer.components.WFacebookComment":case"wysiwyg.viewer.components.WFacebookLike":return void(n.urlFormat=n.urlFormat||"hashBang")}}function f(e,t,n){"wysiwyg.common.components.anchor.viewer.Anchor"===n.componentType&&0===n.layout.width&&(n.layout.width=e)}function g(e,t){if(!a(e,t))switch(t.componentType){case"wysiwyg.viewer.components.menus.DropDownMenu":c(e,t,{alignButtons:"center",alignText:"center",sameWidthButtons:!1,moreButtonLabel:"More",moreItemHeight:15,stretchButtonsToMenuWidth:!0,type:"HorizontalMenuProperties"});break;case"wysiwyg.viewer.components.mobile.TinyMenu":;t.propertyQuery="TINY_MENU",c(e,t,{direction:"left",type:"TinyMenuProperties",id:"TINY_MENU",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}})}}function w(e,t,n){e.properties[n.id]=a(t,n)}function v(e,t,n){!a(t,n)&&e.properties[n.id]&&c(t,n,e.properties[n.id])}function T(e,t){var n=P.get(e,"modes.definitions");return!P.some(n,{modeId:t})}function h(e){var t=P.get(e,"modes.definitions");return P.find(t,{type:C.siteConstants.COMP_MODES_TYPES.HOVER}).modeId}function k(e,t){var n=a(e,t);if(t.propertyQuery&&n)switch(t.componentType){case"wysiwyg.viewer.components.WFacebookLike":case"wysiwyg.viewer.components.PayPalButton":case"wysiwyg.viewer.components.GoogleMap":n.language||(n.language="en");break;case"wysiwyg.viewer.components.WRichText":"WRichTextProperties"!==n.type&&delete t.propertyQuery;break;case"wysiwyg.viewer.components.HoverBox":n.mobileDisplayedModeId&&T(t,n.mobileDisplayedModeId)&&(n.mobileDisplayedModeId=h(t))}}function S(e,t,n){P.forEach(t,function(t){P.forEach(n,function(n){n(e,t)}),t.components&&S(e,t.components,n)})}function _(e){return P.partial(o,i(e))}function I(e,t,n,i){S(e,n,[_(i),r,l,g,k,y,P.partial(f,1920),P.partial(w,t)])}function E(e,t,n){e.pageContainsStructuresWithoutJsonAnchors=e.pageContainsStructuresWithoutJsonAnchors||!n.layout||!n.layout.anchors}function M(e,t){t.layout&&delete t.layout.anchors}function b(e,t,n,i){var o={pageContainsStructuresWithoutJsonAnchors:!1};S(e,n,[_(i),r,l,g,k,y,m,P.partial(f,320),P.partial(v,t),P.partial(E,o)]),o.pageContainsStructuresWithoutJsonAnchors&&S(e,n,[M])}var P=n(0),C=n(1);e.exports={exec:function(e,t,n,i,o,r,a,s){var c=e.structure;if(c){var u={properties:{}},p=c.components||c.children,d=c.mobileComponents,m=s.isExperimentOpen("merge_clipart_and_image");p&&I(e,u,p,m),d&&b(e,u,d,m)}}}},function(e,t,n){"use strict";function i(e){return(r.isUndefined(e.galleryImageOnClickAction)||"unset"===e.galleryImageOnClickAction)&&(!1===e.expandEnabled?e.galleryImageOnClickAction="disabled":e.galleryImageOnClickAction="zoomMode"),e}function o(e,t,n){return r(e).pickBy(function(e){return r.includes(t,e.type)}).mapValues(n).value()}var r=n(0),a=["GalleryExpandProperties","MatrixGalleryProperties","PaginatedGridGalleryProperties","SliderGalleryProperties","SlideShowGalleryProperties"];e.exports={exec:function(e){o(e.data.component_properties,a,i)}}},function(e,t,n){"use strict";function i(e){return["behaviors_data",e.behaviorQuery,"items"]}function o(e){return u.has(e,"behaviors_data")}function r(e,t,n){var r=JSON.stringify(e);o(n)?u.set(n,i(t),r):t.behaviors=r}function a(e,t){return o(t)?u.get(t,i(e),"[]"):e.behaviors||"[]"}function s(e,t){var n=[],i=a(e,t),s=JSON.parse(i);if(u.isEmpty(s))return void(o(t)?delete e.behaviorQuery:delete e.behaviors);if(u.isArray(s)){var c=!1;return u.forEach(s,function(t){var n=u.get(t,"action.sourceId");n&&n!==e.id&&(t.action.sourceId=e.id,c=!0)}),void(c&&r(s,e,t))}u.forEach(s,function(e,t){u.forEach(e,function(e,i){u.forEach(e,function(e){var o=u.assign({targetId:i,action:t},e);"screenIn"!==t&&"pageIn"!==t||(o.targetId=""),n.push(o)})})}),r(n,e,t)}function c(e,t){u.forEach(e,function(e){s(e,t),e.components&&c(e.components,t)})}var u=n(0),p=n(23);e.exports={exec:function(e){p.exec(e);var t=e.structure;t&&(t.components&&c(t.components,e.data),t.mobileComponents&&c(t.mobileComponents,e.data),t.children&&c(t.children,e.data))}}},function(e,t,n){"use strict";function i(e){var t=c.dataUtils.getAllCompsInStructure(e,!1);return s.pickBy(t,"behaviors")}function o(e,t){var n=c.dataUtils.getAllCompsInStructure(e,!0);return s.pickBy(n,function(e){return t[e.id]})}function r(e,t,n){e.behaviorQuery=t.id,n&&(n.behaviorQuery=e.behaviorQuery)}function a(e){var t=s.get(e,"data"),n=s.get(e,"structure");t.behaviors_data=t.behaviors_data||{};var a=i(n),c=o(n,a);s.forEach(a,function(e){var n=u.createBehaviorsDataItem(e.behaviors);r(e,n,c[e.id]),delete e.behaviors,s.set(t,["behaviors_data",n.id],n)})}var s=n(0),c=n(1),u=n(5);e.exports={exec:a}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){var t=i.get(e,"data");t.connections_data=t.connections_data||{}}}},function(e,t,n){"use strict";function i(e){o.forEach(e,function(e){if(o.has(r,e.skin)){var t=r[e.skin];e.layout=o.mapValues(e.layout,function(e,n){return t[n]?Math.max(e,t[n]):e})}e.components&&i(e.components)})}var o=n(0),r={"wysiwyg.viewer.skins.line.FadeLine":{width:90},"wysiwyg.viewer.skins.line.FadeNotchBottomLine":{width:60},"wysiwyg.viewer.skins.line.FadeNotchTopLine":{width:60},"wysiwyg.viewer.skins.line.ShadowBottomLine":{width:200},"wysiwyg.viewer.skins.line.ShadowTopLine":{width:200}};e.exports={exec:function(e){var t=e.structure;t&&(t.components&&i(t.components),t.children&&i(t.children),t.mobileComponents&&i(t.mobileComponents))}}},function(e,t,n){"use strict";function i(e){var t=o.head(e);return!!o.get(t,"layout.anchors")}var o=n(0);e.exports={exec:function(e){var t=e.structure;if(t&&t.components&&!o.isEmpty(t.components)&&i(t.components)){var n=o.maxBy(t.components,function(e){var t=-1*Number.MAX_VALUE;return e.layout&&o.isNumber(e.layout.y)&&o.isNumber(e.layout.height)&&(t=e.layout.y+e.layout.height),t}),r=void 0;n.layout&&n.layout.anchors&&(r=o.find(n.layout.anchors,{type:"BOTTOM_PARENT"})),r||(n.layout=n.layout||{},n.layout.anchors=n.layout.anchors||[],n.layout.anchors.push({distance:0,type:"BOTTOM_PARENT",targetComponent:e.structure.id,locked:!0,originalValue:e.structure.layout.height,topToTop:n.layout.y}))}}}},function(e,t,n){"use strict";function i(e){_[e.componentType]&&(e.layout.anchors=[])}function o(e){"TOP_TOP"===e.type&&(e.locked=!0)}function r(e,t,n){var i=(n||0)*Math.PI/180;return parseInt(Math.abs(t*Math.sin(i))+Math.abs(e*Math.cos(i)),10)}function a(e,t,n){return parseInt(e-(n-t)/2,10)}function s(e){return e.layout&&e.layout.y+e.layout.height}function c(e){return e.layout&&e.layout.anchors||[]}function u(e,t,n,i,o){if(!(o[e.id]||s(e)>n)){o[e.id]=!0;var r=c(e);h.remove(r,function(e){if(e.targetComponent===t.id)return!0;if("BOTTOM_PARENT"!==e.type){if(!i[e.targetComponent])return!0;u(i[e.targetComponent],t,n,i,o)}return!1})}}function p(e,t,n){if("BOTTOM_TOP"===e.type){var i=n[e.targetComponent],o=c(i);h.remove(o,{targetComponent:t.id});var r=h.filter(o,{type:"TOP_TOP"}),a=s(t)+10;h.forEach(r,function(e){n[e.targetComponent]&&u(n[e.targetComponent],t,a,n,{})})}}function d(e,t){"Document"===e.type&&h.forEach(t,function(e){"SITE_STRUCTURE"===e.targetComponent&&(e.targetComponent="masterPage")})}function m(e,t,n){t=h.reject(t,{type:"BOTTOM_PARENT"}),h.forEach(t,function(t){var i=n[t.targetComponent];if(i){var o=h.filter(c(i),{targetComponent:e.id,type:t.type});h.forEach(o,function(n){var o=e.layout.y<i.layout.y?i:e,r=e.layout.y<i.layout.y?n:t;h.remove(o.layout.anchors,function(e){return e===r})})}})}function l(e){h.forEach(e,function(t){var n=c(t);n=h.reject(n,{type:"BOTTOM_PARENT"}),h.remove(n,function(t){return!h.some(e,{id:t.targetComponent})})})}function y(e,t,n){var i=t.id,o=n[e.targetComponent];if("BOTTOM_PARENT"===e.type&&(o=e.targetComponent===i?t:null),!o)return!1;if("BOTTOM_BOTTOM"===e.type&&S[o.componentType])return!1;if("BOTTOM_PARENT"!==e.type&&(_[o.componentType]||"wysiwyg.viewer.components.HeaderContainer"===o.componentType&&o.layout&&!0===o.layout.fixedPosition))return!1;var s=void 0;if(o.layout&&h.isNumber(o.layout.height)&&h.isNumber(o.layout.y)){var c=o.layout,u=r(c.height,c.width,c.rotationInDegrees),p=a(c.y,c.height,u);s="BOTTOM_PARENT"===e.type||"BOTTOM_BOTTOM"===e.type?u:p}else s=0;return e.originalValue=Math.min(e.originalValue,s),!0}function f(e){h.remove(e,function(e){return null===e.distance||isNaN(e.distance)})}function g(e,t){!!t&&i(e)}function w(e,t){return g(e,t),v(e,t)}function v(e,t){var n=t?e[t]:e.components;if(!h.isEmpty(n)){var r=h.transform(n,function(e,t){e[t.id]=t},{});l(n),h.forEach(n,function(t){var n=c(t);f(n),i(t),d(e,n),m(t,n,r),h.remove(n,function(n){o(n);var i=y(n,e,r);return i&&p(n,t,r),!i}),v(t)})}}function T(e){var t=h.head(e);return!!h.get(t,"layout.anchors")}var h=n(0),k=n(6),S={"wysiwyg.common.components.anchor.viewer.Anchor":!0,"wysiwyg.common.components.subscribeform.viewer.SubscribeForm":!0,"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget":!0,"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":!0,"wixapps.integration.components.AppPart":!0,"wixapps.integration.components.AppPart2":!0,"wixapps.integration.components.common.minipart":!0,"wysiwyg.common.components.onlineclock.viewer.OnlineClock":!0,"wysiwyg.common.components.weather.viewer.Weather":!0,"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton":!0,"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow":!0,"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer":!0,"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton":!0,"wysiwyg.viewer.components.ContactForm":!0,"wysiwyg.viewer.components.FacebookShare":!0,"wysiwyg.viewer.components.FiveGridLine":!0,"wysiwyg.viewer.components.FlickrBadgeWidget":!0,"wysiwyg.viewer.components.ItunesButton":!0,"wysiwyg.viewer.components.LinkBar":!0,"wysiwyg.viewer.components.PayPalButton":!0,"wysiwyg.viewer.components.PinterestFollow":!0,"wysiwyg.viewer.components.VKShareButton":!0,"wysiwyg.viewer.components.WFacebookComment":!0,"wysiwyg.viewer.components.WGooglePlusOne":!0,"wysiwyg.viewer.components.mobile.TinyMenu":!0},_={"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton":!0,"wysiwyg.viewer.components.tpapps.TPAGluedWidget":!0,"mobile.core.components.Page":!0,"wixapps.integration.components.AppPage":!0};e.exports={exec:function(e){var t=e.structure,n="components";t&&("Document"===t.type&&(t=h.clone(e.structure),t.id="masterPage",e.structure=t,n="children"),T(t[n])&&w(t,n),T(t.mobileComponents)&&(w(t,"mobileComponents"),k.fixBottomTopBottomBottomCycles(t.mobileComponents)))}}},function(e,t,n){"use strict";function i(e){return e*Math.PI/180}function o(e){if(!e.rotationInDegrees)return e.height;var t=i(e.rotationInDegrees);return parseInt(Math.abs(e.width*Math.sin(t))+Math.abs(e.height*Math.cos(t)),10)}function r(e){if(!e.rotationInDegrees)return e.y;var t=o(e);return parseInt(e.y-(t-e.height)/2,10)}function a(e){return m.maxBy(e,function(e){return r(e.layout)})}function s(e){var t=e.pagesContainer,n=e.header;t&&n&&(m.remove(t.layout.anchors,{targetComponent:"SITE_HEADER",type:"TOP_TOP"}),m.remove(n.layout.anchors,{targetComponent:"PAGES_CONTAINER",type:"TOP_TOP"}))}function c(e,t){var n=t.pagesContainer,i=t.header,s=t.footer,c=n&&n.components&&m.find(n.components,{id:"SITE_PAGES"});if(!c||!c.layout||c.layout.anchors&&0!==c.layout.anchors.length||(c.layout.anchors=[{distance:0,locked:!0,originalValue:0,targetComponent:"PAGES_CONTAINER",type:"BOTTOM_PARENT"}]),n&&n.layout&&(!n.layout.anchors||0===n.layout.anchors.length)&&s&&s.layout&&!s.layout.fixedPosition&&(n.layout.anchors=[{distance:10,locked:!0,originalValue:0,targetComponent:"SITE_FOOTER",type:"BOTTOM_TOP"}]),i){if(!m.find(e,function(e){return m.find(e.layout.anchors,{type:"BOTTOM_PARENT",targetComponent:"masterPage"})})){var u=a(e);if(!u.layout.anchors)return;u.layout.anchors.push({distance:0,locked:!0,originalValue:r(u.layout)+o(u.layout)+(i?o(i.layout):0),targetComponent:"masterPage",type:"BOTTOM_PARENT"})}}}function u(e){return!(e.length&&e[0].layout&&e[0].layout.anchors)}function p(e){var t={};return m.forEach(e,function(e){switch(e.id){case"SITE_HEADER":return t.header=e,!(t.footer&&t.pagesContainer);case"SITE_FOOTER":return t.footer=e,!(t.header&&t.pagesContainer);case"PAGES_CONTAINER":return t.pagesContainer=e,!(t.header&&t.footer);default:return!0}}),t}function d(e){if(e&&!m.isEmpty(e)&&!u(e)){var t=p(e);s(t),c(e,t)}}var m=n(0);e.exports={exec:function(e){var t=e.structure;t&&"Document"===t.type&&(d(t.children),d(t.mobileComponents))},test:{getBoundingHeight:o,getBoundingY:r,getLowestComp:a}}},function(e,t,n){"use strict";function i(e){var t=void 0;if(e.structure.children){var n=s.find(e.structure.children,{id:"PAGES_CONTAINER"});n&&!s.isEmpty(n.components)&&(t=s.find(n.components,{id:"SITE_PAGES"}))}return t}function o(e){var t=void 0;if(e.structure.mobileComponents){var n=s.find(e.structure.mobileComponents,{id:"PAGES_CONTAINER"});n&&!s.isEmpty(n.components)&&(t=s.find(n.components,{id:"SITE_PAGES"}))}return t}function r(e){s.isEmpty(e.components)||(e.components=[])}function a(e){e.layout&&(e.layout.y=0)}var s=n(0);e.exports={exec:function(e){if(e.structure&&"Document"===e.structure.type){var t=i(e),n=o(e);t&&(r(t),a(t)),n&&(r(n),a(n))}return e}}},function(e,t,n){"use strict";var i=n(0),o=n(1);e.exports={exec:function(e){function t(e){var t=i.indexOf(y.toFix,e.type),o=y.newNames[t],r=i.defaults({type:o},i.omit(e,f)),a=n(e,!0);return a&&(r.link=p(a.id),T[a.id]=a),e.type===r.type&&(r.metaData.schemaVersion="2.0"),r}function n(e,t){var n=e.linkType||"",i=n.toLowerCase(),o=t?l():e.id;switch(i){case"page":return a(o,e);case"website":return r(o,e);case"email":return c(o,e);case"document":return s(o,e);case"login":return u(o,e);case"admin_login":case"free_link":case"":default:return null}}function r(e,t){var n={};n.id=e,n.type="ExternalLink",n.target=d(t.target);var i=t.href;return i?(n.url=i,n):null}function a(e,t){var n={};n.id=e,n.type="PageLink";var i=t.href;if(!i)return null;var o=i.lastIndexOf("/");return o<0&&(o=i.lastIndexOf("|")),i=i.substr(o+1),n.pageId=p(i),n}function s(e,t){var n={},i=void 0;n.type="DocumentLink",n.id=e;var o=t.href;if(!o)return null;i=o.substr(o.lastIndexOf("/")+1);var r=i.indexOf("?dn=");return-1!==r&&(i=i.substring(0,r)),n.docId=i,n.name=t.text,n}function c(e,t){var n={};n.id=e,n.type="EmailLink";var i=t.href;if(!i||!i.toLowerCase)return null;o.stringUtils.startsWith(i,"mailto:",!0)&&(i=i.substr("mailto:".length));var r=i.split("?");if(n.recipient=r[0],r[1]){var a=m(r[1]);a.subject&&(n.subject=a.subject),a.body&&(n.body=a.body)}return n}function u(e,t){var n={};n.id=e,n.type="LoginToWixLink";var i=t.text;return i&&o.stringUtils.startsWith(i,"{")&&(i=JSON.parse(i),n.postLoginUrl=i.postLoginUrl,n.postSignupUrl=i.postSignupUrl,n.dialog=i.type),n}function p(e){return e?e&&o.stringUtils.startsWith(e,"#")?e:"#"+e:null}function d(e){var t=i.indexOf(g.oldValues,e);return i.includes(g.newValues,e)?e:-1!==t?g.newValues[t]:g.newValues[1]}function m(e){for(var t={},n=/([^&=]+)=([^&]*)/g,i=void 0;i=n.exec(e);)t[i[1]]=i[2];return t}function l(){var t=i.keys(e.data.document_data),n=void 0;do{n=(new Date).getTime().toString(36)+"_"+Math.round(99999*Math.random()).toString(36),n=n.replace(/\s/g,"_")}while(t[n]);return n}var y={toFix:["FlashComponent","SiteButton","Image"],newNames:["LinkableFlashComponent","LinkableButton","Image"],originalLink:["TextLink","Link"]},f=["href","text","target","icon","linkType"],g={oldValues:["same","other"],newValues:["_self","_blank"]},w=e.data,v=w.document_data,T={},h=void 0;h=function(e){return i.filter(e,function(e){var t=e.type===y.toFix[2],n=!t||"2.0"!==e.metaData.schemaVersion;return!e.link&&i.includes(y.toFix,e.type)&&n})}(v),i.forEach(h,function(e){var n=t(e);n&&(v[e.id]=n)}),h=function(e){return i.filter(e,function(e){return e.linkType&&i.includes(y.originalLink,e.type)})}(v),i.forEach(h,function(e){var t=n(e);t&&(v[e.id]=t)}),i.assign(v,T)}}},function(e,t,n){"use strict";e.exports={exec:function(e){var t=e.data;t.document_data.THEME_DATA&&(t.theme_data.THEME_DATA||(t.theme_data.THEME_DATA=t.document_data.THEME_DATA),delete t.document_data.THEME_DATA)}}},function(e,t,n){"use strict";function i(e){o.forEach(e.structure.children,function(e){e.componentType===r&&(e.layout.fixedPosition=!0)})}var o=n(0),r="wysiwyg.viewer.components.tpapps.TPAGluedWidget";e.exports={exec:function(e){"masterPage"===o.get(e,"structure.id")&&i(e)}}},function(e,t,n){"use strict";function i(e,t,n){var i=h.guidUtils.getUniqueId("dataItem","-");t.dataQuery="#"+i,n.id=i,e.data.document_data[i]=n}function o(e,t){var n=T.find(e,{appDefinitionId:S});if(n){var o=p(t,n.applicationId);if(T.forEach(o,function(e){var o=e.data,r=T.keys(o.widgets);o.applicationId===n.applicationId&&T.includes(r,o.widgetId)||i(t,e.comp,T.assign(o,{applicationId:n.applicationId,widgetId:_}))}),!d(n)&&!o.length){var a=T.get(n,"widgets."+_),l=m("comp","-"),y=m("dataItem","-"),f=m("propItem","-"),g=r(l,y,f,a);t.structure.children.push(g),t.data.document_data[y]=s(n,y),t.data.component_properties[f]=c(a),t.data.theme_data[g.styleId]||(t.data.theme_data[g.styleId]=u(g.styleId))}}}function r(e,t,n,i,o){return{type:"Component",styleId:o||"tpagw0",id:e,dataQuery:"#"+t,skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:T.get(i,"defaultWidth")||320,height:T.get(i,"defaultHeight")||250,x:T.get(i,"x")||0,y:T.get(i,"y")||0,scale:1,rotationInDegrees:0,fixedPosition:T.get(i,"fixedPosition")||!0},propertyQuery:n,componentType:"wysiwyg.viewer.components.tpapps.TPAGluedWidget"}}function a(e,t,n,i){return t=w(t),n=w(n),r(e,t,n,{x:10,y:10,width:0,height:5,fixedPosition:!1},i)}function s(e,t){return{type:"TPAWidget",id:t,metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:e.applicationId,widgetId:_}}function c(e){return{type:"TPAGluedProperties",metaData:{schemaVersion:"1.0"},placement:T.get(e,"gluedOptions.placement"),verticalMargin:T.get(e,"gluedOptions.verticalMargin"),horizontalMargin:T.get(e,"gluedOptions.horizontalMargin")}}function u(e){return{type:"TopLevelStyle",styleType:"system",compId:"",componentClassName:"wysiwyg.viewer.components.tpapps.TPAGluedWidget",pageId:"",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",style:{groups:{},properties:{},propertiesSource:{}},id:e,metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}}}function p(e,t){return T(e.structure.children).filter(function(n){if(!n.dataQuery)return!1;var i=e.data.document_data[n.dataQuery.replace("#","")];return T.get(i,"widgetId")===_||T.get(i,"applicationId")===t}).map(function(t){return{comp:t,data:e.data.document_data[t.dataQuery.replace("#","")]}}).value()}function d(e){return!0===T.get(e,"permissions.revoked")}function m(e,t){return l(E,e,t,Date.now())}function l(e,t,n,i){t=t||"",n=n||"";var o=i;return o===e.lastGeneratedId?e.counter++:(e.lastGeneratedId=o,e.counter=0),t+n+Number(e.lastGeneratedId).toString(36)+(e.counter||"")}function y(e,t){var n=T.find(t,{appDefinitionId:S}),i=p(e).length>0;e&&e.structure.id===I&&n&&!T.get(n,"permissions.revoked")&&i&&f(e.data,e.structure.children,n)&&!f(e.data,e.structure.mobileComponents,n)&&v(e,g(e.data.document_data,e.structure.children,n))}function f(e,t,n){return!!g(e.document_data,t,n)}function g(e,t,n){for(var i=[].concat(t);!T.isEmpty(i);){var o=i.shift();if(o.componentType===k){var r=e[w(o.dataQuery)];if(Number(r.applicationId)===Number(n.applicationId))return o}T.isEmpty(o.components)||(i=i.concat(o.components))}return null}function w(e){return e&&"#"===e[0]?e.substr(1):e}function v(e,t){var n=e.structure.mobileComponents,i=T.find(n,{id:"SITE_FOOTER"}),o=t.dataQuery,r=t.propertyQuery,s=t.styleId;i&&T.isArray(i.components)?i.components.push(a(t.id,o,r,s)):n.push(a(t.id,o,r,s))}var T=n(0),h=n(1),k="wysiwyg.viewer.components.tpapps.TPAGluedWidget",S="14517e1a-3ff0-af98-408e-2bd6953c36a2",_="14517f3f-ffc5-eced-f592-980aaa0bbb5c",I="masterPage",E={lastGeneratedId:void 0,counter:0};e.exports={exec:function(e,t,n,i,r,a,s,c){var u=T.get(c,"clientSpecMap");if("masterPage"===e.structure.id){o(u,e);var p=T.get(c,"quickActionsMenuEnabled");T.get(e,"structure.id")!==I||p||y(e,u)}}}},function(e,t,n){"use strict";function i(){return{type:"BackgroundMedia",color:"transparent",alignType:"center",fittingType:"fill",scrollType:"none",mediaRef:null}}function o(e,t){var n=u.get(e,"structure.id"),i=u.get(e,["data","document_data",n]),o=u.get(i,"tpaPageId"),a=u.get(i,"tpaApplicationId");o===m&&a===t&&(r(i,e,"desktop"),r(i,e,"mobile"),e.structure.styleId=l)}function r(e,t,n){var o=u.get(e,"pageBackgrounds."+n+".ref");o=u.replace(o,"#","");var r=u.get(t,["data","document_data",o]);r&&u.merge(r,i())}function a(e,t){if("masterPage"===u.get(e,"structure.id")){var n=u.get(e,"data.document_data"),i=u.find(n,{tpaApplicationId:t,tpaPageId:m});i&&(r(i,e,"desktop"),r(i,e,"mobile"))}else s(e)}function s(e){var t=u.get(e,["structure","components"]),n=u.find(t,{componentType:y});if(n){var i=n.dataQuery.replace("#","");u.get(e,["data","document_data",i,"widgetId"])===d&&(e.structure.styleId=l)}}function c(e){var t=u.find(e,{appDefinitionId:p});return u.get(t,"applicationId")}var u=n(0),p="14271d6f-ba62-d045-549b-ab972ae1f70e",d="144f04b9-aab4-fde7-179b-780c11da4f46",m="fullscreen_page",l="non_existing_style_id",y="wysiwyg.viewer.components.tpapps.TPAMultiSection";e.exports={exec:function(e,t,n,i,r,s,u,p){var d=c(p.clientSpecMap);d&&(p.isViewerMode?o(e,d):p.isExperimentOpen("se_proGalleryBGDataFixer")&&a(e,d))}}},function(e,t,n){"use strict";function i(e){o.forEach(e,function(e){var t=a[e.type];t&&t(e)})}var o=n(0),r=n(3),a={BgImageStripProperties:function(e){e.fittingType=r.cssToFittingType({bgSize:e.bgSize,bgRepeat:e.bgRepeat}),e.fittingType=r.migrateToLegacyFittings(e.fittingType),e.alignType=r.cssToAlignType(e.bgPosition),e.type="BgImageStripUnifiedProperties",delete e.bgSize,delete e.bgRepeat,delete e.bgPosition,delete e.bgUrl}};e.exports={exec:function(e){var t=e.data.component_properties;o.isEmpty(t)||i(t)}}},function(e,t,n){"use strict";function i(e){o(r).values().forEach(function(t){o(e.data.document_data).filter(t.filterAppPart).forEach(function(e){e.appLogicCustomizations=o(e.appLogicCustomizations).map(function(e){return o.find([e],t.filterAppLogicCustomization)?t.modify(e):e}).compact().value()})})}var o=n(0),r={faq:{filterAppPart:{appPartName:"f2c4fc13-e24d-4e99-aadf-4cff71092b88",viewName:"ExpandQuestions"},filterAppLogicCustomization:{type:"AppPartCustomization",forType:"Category",view:"ToggleMobile",key:"comp.initialState",fieldId:"toggle",format:"Mobile"},modify:function(e){return o.assign(e,{fieldId:"vars",key:"initialState"})}}};e.exports={exec:i}},function(e,t,n){"use strict";function i(e,t){var n=w.filter(e,function(e){return"Page"===e.type||"AppPage"===e.type}),i=w.map(n,"id");w.some(n,function(e){return e.pageBackgrounds&&e.pageBackgrounds.desktop.ref})?r(e):c(e,t.siteBg,t.mobileBg&&"[siteBg]"!==t.mobileBg?t.mobileBg:t.siteBg,i)}function o(e){r(e)}function r(e){var t=w.filter(e,{type:k});w.forEach(t,function(t){a(e,t)})}function a(e,t){var n=t.id,i=T.guidUtils.getUniqueId(S+I);s(e,d(t),n,i)}function s(e,t,n,i){e[n]=w.assign({id:n},t.bgItem),t.imageItem&&(e[n].mediaRef="#"+i,e[i]=w.assign({id:i},t.imageItem))}function c(e,t,n,i){var o=p(t),r=p(n);w.forEach(i,function(t){var n=T.guidUtils.getUniqueId(_,I),i=T.guidUtils.getUniqueId(_,I),a=n.replace(_,S),s=i.replace(_,S);u(e,o,t,n,a,"desktop"),u(e,r,t,i,s,"mobile")})}function u(e,t,n,i,o,r){e[n].pageBackgrounds=e[n].pageBackgrounds||{desktop:"",mobile:""},e[n].pageBackgrounds[r]={ref:"#"+i,custom:!0,isPreset:!1},s(e,t,i,o)}function p(e){return l(m.apply(this,w.compact(e.split(" "))))}function d(e){return l(m.apply(this,[e.url,e.imagesizew,e.imagesizeh,e.positionx,e.positiony,e.width,e.repeatx,e.repeaty,e.attachment,e.color,e.metaData]))}function m(e,t,n,i,o,r,a,s,c,u,p){return p=p||{},{imageId:e,imageW:t,imageH:n,x:i,y:o,width:r,repeatX:a,repeatY:s,attachment:c,color:u,metaData:{isPreset:p.isPreset||!1,schemaVersion:"2.0",isHidden:p.isHidden||!1}}}function l(e){var t={bgItem:{}},n="rgb(255,255,255)",i=v.cssToAlignType(e.x+" "+e.y),o=v.cssToFittingType({bgRepeat:e.repeatX+" "+e.repeatY,bgSize:e.width}),r="fixed"===e.attachment?"fixed":"scroll";return o=y(o),e.color&&"none"!==e.color&&(n=e.color),e.imageId&&"none"!==e.imageId&&(t.imageItem={type:"Image",uri:e.imageId,width:parseInt(e.imageW,10),height:parseInt(e.imageH,10),metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}}),t.bgItem={type:"BackgroundMedia",color:n,alignType:i,fittingType:o,scrollType:r,metaData:e.metaData},t}function y(e){var t={};return t[h.fittingTypes.TILE]=h.fittingTypes.LEGACY_BG_FIT_AND_TILE,t[h.fittingTypes.TILE_HORIZONTAL]=h.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL,t[h.fittingTypes.TILE_VERTICAL]=h.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL,t[h.fittingTypes.LEGACY_ORIGINAL_SIZE]=h.fittingTypes.LEGACY_BG_NORMAL,t[e]||e}function f(e){e.siteBg=g(e.siteBg),e.mobileBg&&"[siteBg]"!==e.mobileBg&&(e.mobileBg=g(e.mobileBg))}function g(e){var t=w.compact(e.split(" ")),n=m.apply(this,t),i=n.color;return i&&(i=i.replace("[","{"),i=i.replace("]","}"),t[9]=i),t.join(" ")}var w=n(0),v=n(3),T=n(1),h=n(7),k="BackgroundImage",S="bgImage",_="mediaBg",I="-";e.exports={exec:function(e){if(e.structure){var t=e.data.theme_data&&e.data.theme_data.THEME_DATA,n=e.data.document_data,r=w.some(n,{type:"BackgroundMedia"}),a=w.some(n,{type:k});r&&!a||("Document"===e.structure.type?(f(t),i(n,t)):o(n))}}}},function(e,t,n){"use strict";function i(e,t){return s.guidUtils.getUniqueId(t.id,"_")+e}function o(e,t){t[e]=a.assign({id:e},c)}function r(e){var t=a.filter(e,function(e){return"Page"===e.type||"AppPage"===e.type});a.forEach(t,function(t){var n=void 0;a.defaults(t,u),t.pageBackgrounds.mobile.ref||(n=i("_mobile_bg",t),o(n,e),t.pageBackgrounds.mobile.ref="#"+n),t.pageBackgrounds.desktop.ref||(n=i("_desktop_bg",t),o(n,e),t.pageBackgrounds.desktop.ref="#"+n)})}var a=n(0),s=n(1),c={alignType:"center",color:"{color_11}",fittingType:"fill",scrollType:"scroll",type:"BackgroundMedia"},u={pageBackgrounds:{desktop:{custom:!0,isPreset:!0,ref:null},mobile:{custom:!0,isPreset:!0,ref:null}}};e.exports={exec:function(e){if(e.structure){var t=e.data.document_data;a.some(t,{type:"BackgroundMedia"})&&r(t)}}}},function(e,t,n){"use strict";function i(e,t,n){n[e]=c.assign({id:e},c.omit(t,"id"))}function o(e,t,n){return e+"_"+t+"_"+n}function r(e,t,n,r,a){if(0!==e[t].indexOf("#"+r)){var s=c.cloneDeep(a[e[t].replace("#","")]),u=o(r,n,t);i(u,s,a),e[t]="#"+u}}function a(e,t,n){var i=t.pageBackgrounds[e].ref.replace("#",""),o=n[i],a=void 0;o&&o.mediaRef&&(a=n[o.mediaRef.replace("#","")],"WixVideo"===a.type&&r(a,"posterImageRef",e,t.id,n),o.imageOverlay&&r(o,"imageOverlay",e,t.id,n),r(o,"mediaRef",e,t.id,n))}function s(e,t){e.pageBackgrounds&&(a("mobile",e,t),a("desktop",e,t))}var c=n(0);e.exports={exec:function(e){if(e.structure){var t=e.data.document_data,n=c.filter(t,function(e){return"Page"===e.type||"AppPage"===e.type});c.forEach(n,function(e){s(e,t)})}}}},function(e,t,n){"use strict";function i(e,t){var n=u.get(t,[e.behaviorQuery,"items"],"[]");return JSON.parse(n)}function o(e,t){return t[t[e.designQuery.replace("#","")].background.replace("#","")]}function r(e,t,n){var r=void 0;if(u.includes(d,e.componentType)){var a=o(e,t),s=a.scrollType;if(a.scrollType="none","scroll"!==s&&"none"!==s){r=i(e,n),r=u.reject(r,{name:"ContainerFixedBg",action:"bgScrub"}),r.push(m[s]);var c=JSON.stringify(r);if(e.behaviorQuery)u.set(n,[e.behaviorQuery,"items"],c);else{var l=p.createBehaviorsDataItem(c);u.set(n,l.id,l),e.behaviorQuery=l.id}}}}function a(e,t,n){var r=void 0;if(u.includes(d,e.componentType)){o(e,t).scrollType="none",r=i(e,n),r=u.reject(r,{name:"ContainerFixedBg",action:"bgScrub"}),u.isEmpty(r)?(delete e.behaviors,delete e.behaviorQuery):u.set(n,[e.behaviorQuery,"items"],JSON.stringify(r))}}function s(e,t,n){u.forEach(e,function(e){r(e,t,n),e.components&&s(e.components,t,n)})}function c(e,t,n){u.forEach(e,function(e){a(e,t,n),e.components&&c(e.components,t,n)})}var u=n(0),p=n(5),d=["wysiwyg.viewer.components.StripContainer","wysiwyg.viewer.components.StripContainerSlideShowSlide"],m={fixed:{action:"bgScrub",name:"BackgroundReveal",duration:1,delay:0},parallax:{action:"bgScrub",name:"BackgroundParallax",duration:1,delay:0}};e.exports={exec:function(e){var t=e.structure;if(t){var n=e.data.design_data,i=e.data.behaviors_data;t.components&&s(t.components,n,i),t.children&&s(t.children,n,i),t.mobileComponents&&c(t.mobileComponents,n,i)}}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){if("Page"===e.structure.type){var t=e.structure.components,n=e.data.document_data;i.forEach(t,function(e){if(i.includes(e.componentType,"DocumentMedia")){var t=e.dataQuery,o=n[t.replace("#","")];0===o.uri.indexOf("media/")&&(o.uri=o.uri.replace("media/",""))}})}return e}}},function(e,t,n){"use strict";function i(e){e.urlChoice=o.includes(e.urlChoice,"pinterest.com")?e.urlChoice:"www.pinterest.com/"+e.urlChoice}var o=n(0);e.exports={exec:function(e){return o(e.data.document_data).pickBy({type:"PinterestFollow"}).mapValues(i).value()}}},function(e,t,n){"use strict";function i(e){var t=o(e);t&&r(e,"#"+t)}function o(e){var t=a.findKey(e,function(e){return e.appPageId&&"7326bfbb-4b10-4a8e-84c1-73f776051e10"===e.appPageId});if(!t)return null;var n=a.findKey(e,function(e){return e.pageId&&e.pageId==="#"+t});return a.findKey(e,function(e){return e.link&&e.link==="#"+n})}function r(e,t){var n=e.CUSTOM_MAIN_MENU&&e.CUSTOM_MAIN_MENU.items;a.forEach(n,function(n){var i=e[n.replace("#","")].items,o=a.indexOf(i,t);if(-1!==o)return i.splice(o,1),e.CUSTOM_MAIN_MENU.items.push(t),!1})}var a=n(0);e.exports={exec:function(e){return e.structure&&"Document"===e.structure.type&&i(e.data.document_data),e}}},function(e,t,n){"use strict";var i=n(0),o=n(1),r={exec:function(e){e.data&&e.data.document_data&&i(e.data.document_data).filter(function(e){return r.isAppPartType(e.type)}).forEach(function(e){i(e.appLogicCustomizations).compact().groupBy("view").filter(function(e,t){return o.appPartMediaInnerViewNameUtils.isMediaInnerViewName(t)}).forEach(function(e){i(e).groupBy("fieldId").filter(function(e){return i.isEqual(i.map(e,"format"),[""])}).forEach(function(e){i.forEach(e,function(e){e.format="*"})})})})},isAppPartType:function(e){return"AppPart"===e}};e.exports=r},function(e,t,n){"use strict";var i=n(0),o=n(1),r={exec:function(e){e.data&&i(e.data.document_data).filter(function(e){return e.type===r.getAppPartType()&&i.includes(r.getBlogFeedAppPartNames(),e.appPartName)}).forEach(function(e){var t=e.appLogicCustomizations;i(t).compact().filter(function(e){return e.fieldId===r.getReadMoreValueCustomizationFieldId()&&e.key===r.getReadMoreValueCustomizationKey()&&""===e.format&&i.includes(r.getAffectedReadMoreValueCustomizationViews(),e.view)}).forEach(function(e){i.remove(t,{fieldId:e.fieldId,format:"*",key:e.key,view:e.view}),e.format="*"})})},getAppPartType:function(){return"AppPart"},getBlogFeedAppPartNames:function(){return[o.blogAppPartNames.FEED,o.blogAppPartNames.CUSTOM_FEED]},getReadMoreValueCustomizationFieldId:function(){return"ReadMoreBtn"},getReadMoreValueCustomizationKey:function(){return"value"},getAffectedReadMoreValueCustomizationViews:function(){return["MediaLeft","MediaLeftPage","MediaRight","MediaRightPage","MediaZigzag","MediaZigzagPage","Masonry","MasonryPage"]}};e.exports=r},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){i(e.data.document_data).filter({type:"AppPart"}).forEach(function(e){i(e.appLogicCustomizations).filter({fieldId:"tagsValue",forType:"Post",format:"",key:"value",view:"SinglePostMediaTop"}).forEach(function(e){e.format="*"})})}}},function(e,t,n){"use strict";function i(e){var t=o.omit(e,"value");return JSON.stringify(t)}var o=n(0);e.exports={exec:function(e){o(e.data.document_data).filter({type:"AppPart"}).forEach(function(e){for(var t=e.appLogicCustomizations,n=t.length,o={};n;){n-=1;var r=i(t[n]);o[r]?t.splice(n,1):o[r]=!0}})}}},function(e,t,n){"use strict";function i(e){return"Array"===e.forType&&"comp.itemsPerPage"===e.key&&o.includes(["","*"],e.format)&&o.includes(["paginatedlist","columnBlog"],e.fieldId)&&o.includes(["MediaTop","MediaBottom","MediaLeft","MediaRight","MediaZigzag","Masonry"],e.view)}var o=n(0),r=n(1);e.exports={exec:function(e){o(e.data.document_data).filter({type:"AppPart",appPartName:r.blogAppPartNames.CUSTOM_FEED}).forEach(function(e){o(e.appLogicCustomizations).filter(i).forEach(function(e){o.assign(e,{fieldId:"vars",format:"*",key:"itemsPerPage"})})})}}},function(e,t,n){"use strict";function i(e){return"Post"===e.forType&&"comp.hidden"===e.key&&("date"===e.fieldId||"author"===e.fieldId)&&o.includes(["MediaTop","MediaBottom","MediaLeft","MediaRight","MediaZigzag","Masonry","MediaTopPage","MediaBottomPage","MediaLeftPage","MediaRightPage","MediaZigzagPage","MasonryPage","SinglePostMediaBottom","SinglePostMediaTop"],e.view)}var o=n(0),r=n(1);e.exports={exec:function(e){o(e.data.document_data).filter(function(e){return"AppPart"===e.type&&o.includes([r.blogAppPartNames.CUSTOM_FEED,r.blogAppPartNames.FEED,r.blogAppPartNames.SINGLE_POST],e.appPartName)}).forEach(function(e){o(e.appLogicCustomizations).filter(i).forEach(function(e){o.assign(e,{fieldId:"dateAndAuthor"})})})}}},function(e,t,n){"use strict";function i(e){return"Post"===e.forType&&"layout.spacerBefore"===e.key&&"date"===e.fieldId&&o.includes(["MediaTop","MediaBottom","MediaLeft","MediaRight","MediaZigzag","Masonry","MediaTopPage","MediaBottomPage","MediaLeftPage","MediaRightPage","MediaZigzagPage","MasonryPage","SinglePostMediaBottom","SinglePostMediaTop"],e.view)}var o=n(0),r=n(1);e.exports={exec:function(e){o(e.data.document_data).filter(function(e){return"AppPart"===e.type&&o.includes([r.blogAppPartNames.CUSTOM_FEED,r.blogAppPartNames.FEED,r.blogAppPartNames.SINGLE_POST],e.appPartName)}).forEach(function(e){o(e.appLogicCustomizations).filter(i).forEach(function(e){o.assign(e,{fieldId:"vars",key:"dateAndAuthorPosition",value:"0"===e.value?"left":"right"})})})}}},function(e,t,n){"use strict";var i=n(0),o=n(1),r=null;e.exports={exec:function(e){i.isNull(r)&&(r=[],i.forEach(e.data.theme_data,function(e,t,n){i.matches({componentClassName:"wysiwyg.viewer.components.SiteButton",skin:"wysiwyg.viewer.skins.AppPartSkin"})(e)&&(r.push(t),delete n[t])}),setTimeout(function(){r=null})),i(e.data.document_data).filter(function(e){return"AppPart"===e.type&&i.includes(o.blogAppPartNames,e.appPartName)}).forEach(function(e){i.remove(e.appLogicCustomizations,function(e){return"comp.style"===e.key&&i.includes(r,e.value)})})}}},function(e,t,n){"use strict";var i=n(0),o=n(1),r={};r[o.blogAppPartNames.FEED]=["MediaBottomPage","MediaLeftPage","MediaRightPage","MediaTopPage","MediaZigzagPage"],r[o.blogAppPartNames.POSTS_LIST]=["PostsList","PostsListMediaLeft"],r[o.blogAppPartNames.TICKER]=["TickerMediaBottom","TickerMediaTop"],e.exports={exec:function(e){i(e.data.document_data).filter(function(e){return"AppPart"===e.type&&i.includes([o.blogAppPartNames.FEED,o.blogAppPartNames.POSTS_LIST,o.blogAppPartNames.TICKER],e.appPartName)}).forEach(function(e){i(e.appLogicCustomizations).filter(function(t){return"date"===t.fieldId&&"Post"===t.forType&&!t.format&&"comp.format"===t.key&&i.includes(r[e.appPartName],t.view)}).forEach(function(e){e.format="*"})})}}},function(e,t,n){"use strict";function i(e){return(e||"").replace("#","")}function o(e,t){var n=e.isExperimentOpen;return(n("sv_contactFormTemplatesMigration")||n("sv_contactFormFinalMigration")||n("sv_contactFormFinalMigrationEditor"))&&!!t}function r(e,t,n){return!m.has(n.data.component_properties,t)&&e.componentType===v}function a(e){var t=i(e.propertyQuery);m.unset(e,"propertyQuery"),m.unset(this.pageJson.data.component_properties,[t])}function s(e){switch(e){case"email":return{fieldType:"email",fieldInputType:"email"};case"phone":return{fieldType:"phone",fieldInputType:"tel"};default:return{fieldType:e,fieldInputType:"text"}}}function c(e,t,n){var i=m.startsWith(e,f.skinPrefix)?f.fields:g.fields;return m.reduce(i,function(e,i){var o=i+"FieldLabel",r=n["hidden_"+o];if(r){var a=s(i);e.push({name:a.fieldType,inputType:a.fieldInputType,displayLabel:t[o]||m.get(y[o],"default"),required:n["required_"+o],isDisplayed:r})}return e},[])}function u(e){return m.has(e,"dynamicFields")&&m.get(e,"type")===w}function p(e){var t=this,n=i(e.dataQuery),o=i(e.propertyQuery),a=this.pageJson.data.document_data[n],s=r(e,o,this.pageJson)?l:this.pageJson.data.component_properties[o];m.unset(e,"propertyQuery"),m.set(e,"componentType",T),u(a)||(m.assign(this.pageJson.data.document_data[n],{type:w,dynamicFields:c(e.skin,a,s)}),["name","email","subject","phone","address","message"].forEach(function(e){m.unset(t.pageJson.data.document_data,[n,e+"FieldLabel"])}),m.unset(this.pageJson.data.component_properties,o))}function d(e){var t=this;e&&m.forEach(e,function(e){e.componentType===v&&p.call(t,e),e.componentType===T&&a.call(t,e),d.call(t,e.components)})}var m=n(0),l={type:"ContactFormProperties",hidden_emailFieldLabel:!0,hidden_nameFieldLabel:!0,hidden_phoneFieldLabel:!1,hidden_addressFieldLabel:!1,hidden_subjectFieldLabel:!0,hidden_messageFieldLabel:!0,required_emailFieldLabel:!0,required_nameFieldLabel:!0,required_phoneFieldLabel:!1,required_addressFieldLabel:!1,required_subjectFieldLabel:!1,required_messageFieldLabel:!1,useCookie:!0},y={nameFieldLabel:{type:"string",default:"Name"},emailFieldLabel:{type:"string",default:"Email"},phoneFieldLabel:{type:"string",default:"Phone"},addressFieldLabel:{type:"string",default:"Address"},subjectFieldLabel:{type:"string",default:"Subject"},messageFieldLabel:{type:"string",default:"Message"},submitButtonLabel:{type:"string",default:"Send"},successMessage:{type:"string",default:"Your details were sent successfully!"},errorMessage:{type:"string",default:"Please provide a valid email"},textDirection:{type:"string",default:"left",enum:["left","right"]},validationErrorMessage:{type:"string",default:"Please fill in all required fields."},onSubmitBehavior:{type:"string",default:"message",enum:["message","link"]}},f={skinPrefix:"contactform.",fields:["name","email","subject","phone","address","message"]},g={skinPrefix:"wysiwyg.viewer.skins.contactform.",fields:["name","email","phone","address","subject","message"]},w="DynamicContactForm",v="wysiwyg.viewer.components.ContactForm",T="wysiwyg.viewer.components.DynamicContactForm";e.exports={exec:function(e,t,n,i,r,a,s,c){var u=e.structure;if(o(c,u)){var p=m.concat([],u.components||u.children,u.mobileComponents||[]);d.call({pageJson:e},p)}}}},function(e,t,n){"use strict";function i(e){return"Page"===s.get(e,"structure.type")}function o(e){s(e.data.document_data).filter({type:"Page"}).map("id").forEach(function(t){delete e.data.document_data[t]})}function r(e){s.forEach(e.data.document_data,function(e){"#SITE_STRUCTURE"===e.pageId&&(e.pageId="#masterPage")})}function a(e){i(e)&&o(e),r(e)}var s=n(0);e.exports={exec:a}},function(e,t,n){"use strict";function i(e){e.componentType===a&&(e.skin=s)}function o(e){r.forEach(e,function(e){i(e),o(e.components)})}var r=n(0),a="wysiwyg.viewer.components.Group",s="wysiwyg.viewer.components.GroupSkin";e.exports={exec:function(e){var t=e.structure;if(t){var n=t.components||t.children,i=t.mobileComponents;n&&o(n),i&&o(i)}}}},function(e,t,n){"use strict";function i(e){return a(e).pickBy(function(e){return a.includes(s,e.type)}).mapValues(function(e){return e.text=o(e.text),e.text=r(e.text),e}).value()}function o(e){return e&&e.replace(/(<object[^>]*>)(.*?)(<\/object>)/gi,"")}function r(e){return e&&e.replace(/<img[^>]*(onerror|onload|onmouseenter|onmousemove|onmouseleave|onmouseover|onmouseup|onmouseout)[^>]*\/?>(<\/img>)?/gi,"")}var a=n(0),s=["RichText","Text","StyledText","MediaRichText"];e.exports={exec:function(e){var t=e.data.document_data;t&&i(t)}}},function(e,t,n){"use strict";var i=n(0),o=i.matchesProperty(["structure","type"],"Page");e.exports={exec:function(e,t,n,r,a,s,c,u){i.get(u,"isSlash")&&!o(e)&&i.forEach(u.pageIdToResolvedUriSEO,function(t,n){e.data.document_data[n].pageUriSEO=t.curr})}}},function(e,t,n){"use strict";function i(){return{type:"MediaContainerDesignData",id:m.guidUtils.getUniqueId("dataItem","-"),background:{id:m.guidUtils.getUniqueId("dataItem","-"),type:"BackgroundMedia",mediaRef:null,alignType:"center",fittingType:"fill",colorOpacity:0,colorOverlay:"",colorOverlayOpacity:1,imageOverlay:"",scrollType:"none",color:"#FFFFFF"}}}function o(){return{columnsMargin:0,frameMargin:0,fullWidth:!0,rowMargin:0,siteMargin:0,type:"StripColumnsContainerProperties"}}function r(){return{type:"ColumnProperties",alignment:50}}function a(e,t){return{id:p.get(t,[e.id,"mediaId"],m.guidUtils.getUniqueId("media")),type:"Container",layout:{width:e.layout.width,height:e.layout.height,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[{distance:0,topToTop:0,originalValue:0,type:"BOTTOM_PARENT",locked:!0,targetComponent:e.id}],fixedPosition:!1},components:e.components,componentType:"wysiwyg.viewer.components.Column",styleId:"strc1"}}function s(e,t){p.forEach(e.components,function(e){var n=p.get(e,["layout","anchors"],[]);p.forEach(n,function(e){"BOTTOM_PARENT"===e.type&&(e.targetComponent=t.id)})})}function c(e,t){e.behaviors&&(t.behaviors=p.clone(e.behaviors),delete e.behaviors),e.behaviorQuery&&(t.behaviorQuery=e.behaviorQuery,delete e.behaviorQuery)}function u(e,t,n,u){u.componentType="wysiwyg.viewer.components.StripColumnsContainer",delete u.skin,u.styleId="strc1",this.setComponentProperties(e,u,o(),t);var d=a(u,t);if(s(u,d),c(u,d),p.set(t,[u.id,"mediaId"],d.id),this.setComponentProperties(e,d,r(),t),d.designQuery=u.designQuery,delete u.designQuery,n)u.layout.width=320,u.designQuery=p.get(t,[u.id,"designQuery"]),this.deleteComponentData(e,u);else{u.layout.width=980;var m=i();this.setComponentDesignData(e,u,m,t)}delete u.dataQuery,u.components=[d]}var p=n(0),d=n(2),m=n(1),l={"wysiwyg.viewer.components.StripContainer":u},y=new d(l);e.exports={exec:y.migratePage.bind(y)}},function(e,t,n){"use strict";function i(e){function t(e,t,n){o.isUndefined(e)||o.isUndefined(e[t])||(e[n]=e[n]||e[t])}if(e.skin===r&&!o.isUndefined(e.style)&&!o.isUndefined(e.style.properties)){var n=[["bg","bgDrop"],["bg","bgOpen"],["txt","bordercolor"],["txt","iconcolor"],["bordercolor","borderColorSelected"]],i=e.style.properties,a=e.style.propertiesSource;o.forEach(n,function(e){var n=e[0],o=e[1];t(i,n,o),t(a,n,o),n="alpha-"+n,o="alpha-"+o,t(i,n,o),t(a,n,o)})}}var o=n(0),r="wysiwyg.viewer.skins.mobile.TinyMenuSkin";e.exports={exec:function(e){var t=e.data&&e.data.theme_data;o.isEmpty(t)||o.forEach(t,i)}}},function(e,t,n){"use strict";function i(e){var t=o.find(e,{id:"TINY_MENU"});return t?(t.layout.fixedPosition&&t.layout.x>320&&(t.layout.x=250),!0):o.some(e,function(e){return!o.isEmpty(e.components)&&i(e.components)})}var o=n(0);e.exports={exec:function(e){"masterPage"===o.get(e,["structure","id"])&&i(e.structure.mobileComponents)}}},function(e,t,n){"use strict";function i(e){return"wysiwyg.viewer.components.StripContainer"===e.componentType}function o(e){return!f.isUndefined(e.designQuery)}function r(e,t,n){return f.isUndefined(n)&&(n=g.guidUtils.getUniqueId("dataItem","-")),t[n]={id:n,type:"MediaContainerDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}},e.designQuery="#"+n,n}function a(e,t,n){return t[n]=e[n],delete e[n],t[n]}function s(e,t,n,i){var o=n[e];if(!f.isUndefined(o.background)){var r=o.background.slice(1),s=a(n,i,r);if(!f.isUndefined(s.mediaRef)){var c=s.mediaRef.slice(1),u=a(n,i,c);if("WixVideo"===u.type){a(n,i,u.posterImageRef.slice(1))}if(!f.isUndefined(u.originalImageDataRef)){a(n,i,u.originalImageDataRef.slice(1))}f.isUndefined(u.link)||delete u.link}if(!f.isUndefined(s.imageOverlay)){a(n,i,s.imageOverlay.slice(1))}return delete o.background,i[t].background="#"+r,r}}function c(e,t,n,i,o){var a=o.dataQuery.slice(1),c=r(o,t);n[a]=c;var u=s(a,c,e,t);f.isUndefined(u)||(i[a]=u)}function u(e,t,n,i){var o=i.dataQuery.slice(1);i.designQuery="#"+t[o]}function p(e,t,n,r){var a={},s={},p=f.filter(e,i);f(p).reject(o).forEach(f.partial(c,n,r,s,a)),f(t).filter(function(e){return i(e)&&!o(e)}).forEach(f.partial(u,r,s,a))}function d(e){return f.isUndefined(e.components)?f.isUndefined(e.children)?[]:e.children:e.components}function m(e){for(var t=f.clone(e)||[],n=[];t.length>0;){var i=t.pop();n.push(i);var o=d(i);f.forEach(o,function(e){t.push(e)})}return n}function l(e){return m(d(e.structure))}function y(e){return m(e.structure.mobileComponents)}var f=n(0),g=n(1);e.exports={exec:function(e){var t=l(e),n=y(e);e.data.design_data=e.data.design_data||{},p(t,n,e.data.document_data,e.data.design_data)}}},function(e,t,n){"use strict";function i(e){e.metaData&&"2.0"===e.metaData.schemaVersion||(e.sendMail=!0)}function o(e){r.forEach(e,function(e){"LoginToWixLink"!==e.type&&"HomePageLogin"!==e.type||i(e)})}var r=n(0);e.exports={exec:function(e){var t=e.data.document_data;r.isEmpty(t)||o(t)}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){return e.structure&&"Document"===e.structure.type&&i.isEmpty(e.data.document_data.masterPage.characterSets)&&(e.data.document_data.masterPage.characterSets=["latin"]),e}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){var t=i.get(e,["data","component_properties",e.structure.id]);t&&t.popup&&(i.forEach(["desktop","mobile"],function(e){var n=t[e],o=t.popup[e];(n||o)&&i.set(t,[e,["popup"]],i.assign(n||{},o||{}))}),delete t.popup)}}},function(e,t,n){"use strict";var i=n(0),o=n(1);e.exports={exec:function(e){i(e.data.document_data).filter({type:"AppPart",appPartName:o.blogAppPartNames.SINGLE_POST}).forEach(function(e){var t=i.find(e.appLogicCustomizations,{forType:"Post",fieldId:"vars",key:"selectionSharerExperimentOpen",view:e.viewName});t||(t={forType:"Post",fieldId:"vars",key:"selectionSharerExperimentOpen",view:e.viewName,type:"AppPartCustomization",format:""},e.appLogicCustomizations.push(t))})}}},function(e,t,n){"use strict";function i(e){return m.find(e.structure.mobileComponents,{id:"QUICK_ACTION_BAR"})}function o(e){e.structure.mobileComponents.push({type:"Container",id:"QUICK_ACTION_BAR",componentType:"wysiwyg.viewer.components.QuickActionBar",components:[],styleId:"quickActionBarStyle",layout:{fixedPosition:!0}})}function r(e){i(e).styleId="quickActionBarStyle",m.assign(e.data.theme_data,{quickActionBarStyle:{type:"TopLevelStyle",id:"quickActionBarStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},skin:"wysiwyg.viewer.skins.quickActionBar.floatingSkin",style:{properties:{"alpha-controlButtonBG":"1","alpha-controlButtonFG":"1","alpha-controlButtonBorderColor":"1","alpha-actionsBorderColor":"1","boxShadowToggleOn-actionsSHD":"true","boxShadowToggleOn-controlButtonSHD":"true",controlButtonBG:"#ffffff",controlButtonFG:"#4682b4",controlButtonBorderSize:"0",controlButtonBorderColor:"#ffffff",actionsBorderSize:"0",actionsBorderColor:"#ffffff",colorScheme:"brand inv",controlButtonSHD:"0px 1px 4px 0px rgba(0,0,0,0.6)",actionsSHD:"0px 1px 4px 0px rgba(0,0,0,0.6)"},propertiesSource:{controlButtonBG:"value",controlButtonFG:"value",controlButtonBorderSize:"value",controlButtonBorderColor:"value",actionsBorderSize:"value",actionsBorderColor:"value",colorScheme:"value",controlButtonSHD:"value",actionsSHD:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.QuickActionBar",pageId:"",compId:"",styleType:"custom"}})}function a(e){i(e).propertyQuery="quickActionBarProps",m.assign(e.data.component_properties,{quickActionBarProps:{type:"QuickActionBarProperties",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},colorScheme:"brand",invertColors:!0,alignment:"right",hideText:!0}})}function s(e){return!!i(e)}function c(e){var t=m.find(e,{appDefinitionId:"14517e1a-3ff0-af98-408e-2bd6953c36a2"});return!m.isUndefined(t)&&!m.get(t,"permissions.revoked")}function u(e){var t=m.find(e.structure.mobileComponents,{id:"QUICK_ACTION_BAR"});m.isUndefined(t.components)&&(t.components=[]),t.type="Container",m.isUndefined(e.data.component_properties[t.propertyQuery])&&a(e)}function p(e){var t=m.find(e.structure.mobileComponents,{id:"QUICK_ACTION_BAR"}),n=m.get(e.data.theme_data,[t.styleId,"style","properties"]);m.transform(["controlButtonBorderColor","actionsBorderColor"],function(e,t){/^rgb/.test(e[t])&&(e[t]="#ffffff")},n)}function d(e){m(e.data.document_data).filter(function(e){return"QuickActionBarItem"===e.type&&m.isString(e.text)}).forEach(function(e){e.text=e.text.slice(0,40)})}var m=n(0);e.exports={exec:function(e,t,n,i,m,l,y,f){if("masterPage"===e.structure.id){if(d(e),s(e))return u(e),void p(e);c(f.clientSpecMap)&&!s(e)&&!f.quickActionsMenuEnabled&&(o(e),r(e),a(e))}}}},function(e,t,n){"use strict";var i=n(0),o=n(1),r={exec:function(e){i.forEach(e.data.document_data,function(e){e.appPartName&&e.appPartName===o.blogAppPartNames.FEED&&r.fixMobileDateCustomization(e)})},fixMobileDateCustomization:function(e){i.forEach(e.appLogicCustomizations,function(e){"date"===e.fieldId&&"Mobile"===e.format&&"Post"===e.forType&&"comp.hidden"===e.key&&(e.fieldId="dateAndAuthor")})}};e.exports=r},function(e,t,n){"use strict";function i(e){return"Image"===e.type}function o(e,t){return"undefined"!==t&&"null"!==t&&e.length>1}function r(e,t){var n=t+"_"+s.guidUtils.getUniqueId(),i=a.cloneDeep(e[t]);return i.id=n,i}var a=n(0),s=n(1);e.exports={exec:function(e){var t=a.get(e,["data","document_data"]);t&&a(t).pickBy(i).groupBy("originalImageDataRef").pickBy(o).forOwn(function(e,n){var i=a.tail(e),o=n.replace("#","");a.forEach(i,function(e){var n=r(t,o);t[n.id]=n,e.originalImageDataRef="#"+n.id})})}}},function(e,t,n){"use strict";function i(e,t){var n=t.widgets[m];!0===u.get(n,"appPage.landingPageInMobile")&&(e.isMobileLandingPage=!0)}function o(e,t){r(t,a(e))}function r(e,t){!0===s(e)&&(u.set(t.layout,"dock",l),10===t.layout.y&&(t.layout.y=0))}function a(e){for(var t=[].concat(u.get(e,"structure.mobileComponents"));t.length>0;){var n=t.shift();if(n&&n.componentType===p)return n;n.components&&(t=t.concat(n.components))}}function s(e){if(e){var t=e.widgets[m];return u.get(t,"shouldBeStretchedByDefaultMobile")}return null}function c(e){var t=u.find(e,{appDefinitionId:d});return u.get(t,"applicationId")}var u=n(0),p="wysiwyg.viewer.components.tpapps.TPASection",d="14724f35-6794-cd1a-0244-25fd138f9242",m="1489040e-001f-4631-55a9-2c29b4417126",l={left:{vw:0},right:{vw:0}};e.exports={exec:function(e,t,n,r,a,s,p,d){var m=void 0,l=u.get(d,"clientSpecMap"),y=d.isExperimentOpen("sv_tpaSectionsMobileFSDataFixer"),f=c(l);if(f&&y){var g=u.get(l,f);if("masterPage"===u.get(e,"structure.id")){var w=u.get(e,"data.document_data");m=u.find(w,{tpaApplicationId:f}),m&&i(m,g)}else{m=u.get(e,["data","document_data"]);u.find(m,{applicationId:f.toString(),type:"TPA"})&&o(e,g)}}}}},function(e,t,n){"use strict";function i(e){o.forEach(e,function(e){"WPhotoProperties"===e.type&&e.effectName&&(e.filterEffect||"none"===e.effectName||(e.filterEffect={effectType:e.effectName}),delete e.effectName)})}var o=n(0);e.exports={exec:function(e){var t=e.data.component_properties;o.isEmpty(t)||i(t)}}},function(e,t,n){"use strict";function i(e,t){var n=a.get(t,[e.styleId,"skin"]),i=e.skin;return n&&i&&a.includes(s,n)&&a.includes(s,i)}function o(e){e.skin=c,e.styleId=u}function r(e){var t=a.find(e,{id:"TINY_MENU"});return t||(a.forEach(e,function(e){if(!a.isEmpty(e.components))return!(t=r(e.components))}),t)}var a=n(0),s=["wysiwyg.viewer.skins.mobile.TinyMenuSkin","wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin","wysiwyg.viewer.skins.mobile.TinyMenuPullFromLeftSkin","wysiwyg.viewer.skins.mobile.TinyMenuPullFromTopSkin","wysiwyg.viewer.skins.mobile.TinyMenuPullFromRightSkin"],c="wysiwyg.viewer.skins.mobile.TinyMenuSkin",u="tm2";e.exports={exec:function(e){if("masterPage"===a.get(e,["structure","id"])){var t=r(e.structure.mobileComponents);t&&!i(t,e.data.theme_data)&&o(t)}}}},function(e,t,n){"use strict";function i(e){a.forEach(e,function(e){if(a.includes(e.skin,"svgshape")&&e.componentClassName!==u){var t=d[p];l(e,t)}})}function o(e,t,n){var i=t[a.get(e,"dataQuery","").replace("#","")];r(e.components,t,n,a.get(i,"items"))}function r(e,t,n,i){a.forEach(e,function(e){if(e.components)e.componentType===m&&(o(e,t,n),i=[]),r(e.components,t,n,i);else{var s=d[e.componentType];if(s){var c=e.skin,u=a.get(e,"propertyQuery","").replace("#",""),p=a.get(e,"dataQuery","").replace("#","");n[u]||(n[u]={});var l=t[p],w=n[u];g(e,s),y(l,s,c),f(w,s),a.forEach(a.get(e,["modes","overrides"]),function(e){if(e.propertyQuery){var t=a.get(e,"propertyQuery","").replace("#","");n[t]||(n[t]={});var i=n[t];f(i,s)}}),a.forEach(i,function(n){var i=t[a.get(e,"dataQuery","").replace("#","")+"__"+n];i&&y(i,s,c)})}}})}var a=n(0),s=n(1),c=s.vectorImageConversionUtils,u="wysiwyg.viewer.components.PopupCloseIconButton",p="wysiwyg.viewer.components.svgshape.SvgShape",d=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},p,c.vectorImageDefaults),m="wysiwyg.viewer.components.Repeater",l=c.convertStyle,y=c.convertData,f=c.convertProperties,g=c.convertStructure;e.exports={exec:function(e){var t=e.data.theme_data,n=e.data.document_data,o=e.data.component_properties,s=e.structure.components||e.structure.children,c=e.structure.mobileComponents,u=[];a.isEmpty(t)||i(t),a.isEmpty(s)||r(s,n,o,u),a.isEmpty(c)||r(c,n,o,u)}}},function(e,t,n){"use strict";function i(e){r.forEach(e,function(e){var t=c[e.componentClassName];t&&u(e,t)})}function o(e){r.forEach(e,function(e){var t=c[e.componentType];t&&p(e,t),e.components&&o(e.components)})}var r=n(0),a=n(1),s=a.vectorImageConversionUtils,c={"wysiwyg.viewer.components.VectorImageArt":s.vectorImageDefaults,"wysiwyg.viewer.components.VectorImageShape":s.vectorImageDefaults},u=s.convertStyle,p=s.convertStructure;e.exports={exec:function(e){var t=e.data.theme_data,n=e.structure.components||e.structure.children,a=e.structure.mobileComponents;r.isEmpty(t)||i(t),r.isEmpty(n)||o(n),r.isEmpty(a)||o(a)}}},function(e,t,n){"use strict";function i(e){return a(e).filter("appFields.platform").reduce(function(e,t){return a(t.widgets).pickBy(["componentFields.semiNative",!0]).mapValues(a.constant(!0)).assign(e).value()},{})}function o(e){var t=a(e.data.theme_data).filter({componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}).map(function(e){var t=a.cloneDeep(e);return t.componentClassName="platform.components.semiNativeComponent",t.skin="wysiwyg.viewer.skins.semiNativeComponentSkin",t}).transform(function(e,t){e[t.id+c]=t},{}).value();a.assign(e.data.theme_data,t)}function r(e,t,n,o,r){var s=i(e),p=this.getComponentData(t,r);r.componentType===u&&s[p.widgetId]&&(r.componentType="platform.components.semiNativeComponent",r.skin="wysiwyg.viewer.skins.semiNativeComponentSkin",r.styleId+=c,this.setComponentData(t,r,a.defaults({type:"SemiNative"},p),n))}var a=n(0),s=n(2),c="-semi",u="wysiwyg.viewer.components.tpapps.TPAWidget";e.exports={exec:function(e,t,n,i,c,u,p,d){if(d.isExperimentOpen("sv_migrateTpaToSemiNative")&&d.isViewerMode){"masterPage"===e.structure.id&&o(e);var m={"wysiwyg.viewer.components.tpapps.TPAWidget":a.partial(r,d.clientSpecMap)};new s(m).migratePage(e)}}}},function(e,t,n){"use strict";function i(e,t,n,i){var r=e.data.document_data[i.dataQuery.slice(1)],a=e.data.component_properties,s=a[i.propertyQuery];if(o.has(s,"dataSource")){var c={type:s.dataSource.type,revision:s.dataSource.id};delete s.dataSource;var u="mobile_"+i.propertyQuery;o.has(a,u)&&delete a[u].dataSource,o.set(r,"dataSource",c)}}var o=n(0),r=n(2);e.exports={exec:function(e){new r({"wysiwyg.viewer.components.Grid":i}).migratePage(e)}}},function(e,t,n){"use strict";function i(e,t,n,i){n&&o.startsWith(i.designQuery,"#mobile_")&&(this.deleteComponentDesignData(e,i),i.designQuery=o.replace(i.designQuery,"mobile_",""))}var o=n(0),r=n(2),a={"wysiwyg.viewer.components.Column":i},s=new r(a);e.exports={exec:s.migratePage.bind(s)}},function(e,t,n){"use strict";function i(){return{type:"MediaContainerDesignData",id:a.guidUtils.getUniqueId("dataItem","-"),background:{id:a.guidUtils.getUniqueId("dataItem","-"),type:"BackgroundMedia",mediaRef:null,alignType:"center",fittingType:"fill",colorOpacity:0,colorOverlay:"",colorOverlayOpacity:1,imageOverlay:"",scrollType:"none",color:"#FFFFFF"}}}function o(e,t,n,o){if(!o.designQuery&&!n){o.layout.width=980;var r=i();this.setComponentDesignData(e,o,r,t)}}var r=n(2),a=n(1),s={"wysiwyg.viewer.components.StripColumnsContainer":o,"wysiwyg.viewer.components.Column":o},c=new r(s);e.exports={exec:c.migratePage.bind(c)}},function(e,t,n){"use strict";function i(e){switch(e){case"wysiwyg.viewer.components.WSiteStructure":return"Document";case"mobile.core.components.Page":return"Page";case"wixapps.integration.components.Area":case"mobile.core.components.Container":case"wysiwyg.viewer.components.HeaderContainer":case"wysiwyg.viewer.components.FooterContainer":case"wysiwyg.viewer.components.PagesContainer":case"wysiwyg.viewer.components.ScreenWidthContainer":case"wysiwyg.viewer.components.StripContainer":return"Container"}return"Component"}function o(e){return parseInt(e||0,10)}function r(e,t,n,r,a){var s=c(r).map("name").invokeMap("toLowerCase").zipObject(c.map(r,"value")).value();"Page"===i(s.comp)&&(t.page=s.id),e.pagesData[t.page]=e.pagesData[t.page]||{structure:{},data:{},theme_data:{}};var u=e.pagesData[t.page].structure=e.pagesData[t.page].structure||{};if(c.has(t.childrenIndex,t.page)){for(var p=0;p<t.childrenIndex[t.page].length;p++)u=u.components[t.childrenIndex[t.page][p]];var d={};t.childrenIndex[t.page].push(u.components.length),u.components.push(d),u=d}else t.childrenIndex[t.page]=[];u.componentType=s.comp,u.type=i(s.comp),u.id=s.id,u.components=[],u.skin=s.skin,u.styleId=s.styleid,s.dataquery&&(u.dataQuery=s.dataquery),u.propertyQuery=s.propertyquery,u.layout={width:o(s.width),height:o(s.height),x:o(s.x),y:o(s.y),anchors:e.wixAnchors[s.id]||[]}}function a(e,t,n){0===t.childrenIndex[t.page].length?t.page="masterPage":t.childrenIndex[t.page].pop()}function s(e){e.pagesData={};var t=c.get(e,"wixData.document_data.SITE_STRUCTURE.mainPage")||c.get(e,"wixData.document_data.masterPage.mainPage"),n=t&&t.slice(1);e.pagesData.masterPage={data:e.wixData},e.pagesData.masterPage.structure={};var i={page:"masterPage",childrenIndex:{}};u.htmlParser(e.wixHtmlRaw,{start:r.bind(void 0,e,i),end:a.bind(void 0,e,i)});var o=c.keys(e.pagesData),s=c.without(o,"masterPage");e.pagesData.masterPage.data.document_data.MAIN_MENU=e.pagesData.masterPage.data.document_data.MAIN_MENU||{items:[],type:"Menu",id:"MAIN_MENU",metaData:{}},c.forEach(o,function(t){e.pagesData[t]=p(e.pagesData[t],s,e.requestModel,e.currentUrl,e.urlFormatModel)}),e.publicModel.pageList={mainPageId:n,pages:c.map(s,function(t){return c.chain(e).get(["pagesData","masterPage","data","document_data",t]).pick(["title","pageUriSEO"]).assign({pageId:t}).value()})}}var c=n(0),u=n(1),p=n(4);e.exports=s},function(e,t,n){"use strict";function i(e){var t=e.getPageDataMap(e.MASTER_PAGE_ID,e.dataTypes.THEME),n=e.getPageDataMap(e.MASTER_PAGE_ID,e.dataTypes.DATA),i=m(n).filter({type:"BackgroundImage"}).map("id").value();r(n)||(o(n)?a(t,n):m.forEach(i,function(e){d(n[e])}))}function o(e){return!e[m.find(e,{type:"Page"}).id].pageBackgrounds}function r(e){var t=m.find(e,{type:"Page"});return e[t.id].pageBackgrounds&&"BackgroundMediaUnified"===e[t.id].pageBackgrounds.type}function a(e,t){var n=m(t).filter({type:"Page"}).map("id").value(),i=e.THEME_DATA.siteBg||"none 0 0 center center auto repeat repeat scroll none",o=("[siteBg]"===e.THEME_DATA.mobileBg?e.THEME_DATA.siteBg:e.THEME_DATA.mobileBg)||"none 0 0 center center auto repeat repeat scroll none",r=c(i),a=c(o);r.id="customBgImg"+s(),a.id="customBgImg"+s([r.id]),t[r.id]=r,t[a.id]=a,m.forEach(n,function(e){t[e].pageBackgrounds={desktop:{custom:!0,isPreset:!1,ref:"#"+r.id},mobile:{custom:!0,isPreset:!1,ref:"#"+a.id}}})}function s(e){var t="";for(e=e||[];m.includes(e,t);)t=m.random(0,99999).toString(36).replace(" ","_");return t}function c(e){var t=m.compact(e.split(" "));return p.apply(this,t)}function u(e){var t={};return t[f.fittingTypes.TILE]=f.fittingTypes.LEGACY_BG_FIT_AND_TILE,t[f.fittingTypes.TILE_HORIZONTAL]=f.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL,t[f.fittingTypes.TILE_VERTICAL]=f.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL,t[f.fittingTypes.ORIGINAL_SIZE]=f.fittingTypes.LEGACY_BG_NORMAL,t[e]||e}function p(e,t,n,i,o,r,a,s,c,p,d,m){var l=y.cssToAlignType(i+" "+o),f=y.cssToFittingType({bgRepeat:a+" "+s,bgSize:r});return f=u(f),d=d||{},p&&"none"!==p||(p="rgba(0,0,0,0)"),{type:"BackgroundMediaUnified",alignType:l,fittingType:f,attachment:c,imageWidth:Number(t),imageHeight:Number(n),mediaType:"image",uri:e,color:p,metaData:{isHidden:d.isHidden||!1,isPreset:d.isPreset||!1,schemaVersion:2},id:m}}function d(e){var t=[e.url,e.imagesizew,e.imagesizeh,e.positionx,e.positiony,e.width,e.repeatx,e.repeaty,e.attachment,e.color,e.metaData,e.id];return p.apply(this,t)}var m=n(0),l=n(1),y=n(3),f=l.imageClientApi;e.exports={fixBackgroundData:i,migrateBgDataItem:d,migrateBgString:c}}])});
//# sourceMappingURL=santa-data-fixer.js.map
function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}define("loginSocialBar/components/loginSocialButton",["santaComponents","prop-types","lodash","core","utils","santaProps","icon"],function(t,e,i,n,o,a,r){"use strict";var s=o.linkRenderer;return{displayName:"loginSocialButton",mixins:[n.compMixins.skinBasedComp,n.compMixins.createChildComponentMixin],propTypes:i.assign({id:e.string,label:e.string,iconRef:e.object,link:e.object,displayCount:e.number,iconSize:e.number,buttonsDirection:e.string,svgProps:e.object,rootNavigationInfo:a.Types.Component.rootNavigationInfo.isRequired},a.santaTypesUtils.getSantaTypesByDefinition(r)),statics:{useSantaTypes:!0},onButtonClick:function(){this.props.onClick&&this.props.onClick()},createBadge:function(){var e=null;if(i.isNumber(this.props.displayCount)){var n=this.props.displayCount>=1e3?Math.floor(this.props.displayCount/1e3)+"k":this.props.displayCount;e=t.utils.createReactElement("span",{children:n})}return e},getAriaLabel:function(){var t="";return i.isNumber(this.props.displayCount)&&(t=this.props.displayCount+" "),t+=this.props.label},createIcon:function(){if(this.props.iconRef)return this.createChildComponent(this.props.iconRef,"wysiwyg.viewer.components.Icon","icon",{ref:"icon",id:this.props.id+"icon",iconSize:this.props.iconSize,link:null,svgProps:this.props.svgProps,style:{width:this.props.iconSize,height:this.props.iconSize}})},getSkinProperties:function(){var t=this.props.iconSize/2,e="rtl"===this.props.buttonsDirection?{right:t,left:"auto"}:{left:t,right:"auto"};return{"":{onClick:this.onButtonClick,"aria-label":this.getAriaLabel()},link:this.props.link?s.renderLink(this.props.link,this.props.linkRenderInfo,this.props.rootNavigationInfo):{tabIndex:0},icon:this.createIcon(),badge:{children:this.createBadge(),style:e}}},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.LoginSocialButtonSkin"}}}),define("loginSocialBar/components/loginSocialBar",["santaComponents","lodash","core","santaProps","utils","textCommon","reactDOM","zepto","loginSocialBar/components/loginSocialButton","icon"],function(t,e,i,n,o,a,r,s,l,d){"use strict";function p(t){return t.loggedInMember===h.AVATAR||t.loggedInMember===h.BOTH}function g(t){return e.isArray(t.iconItems)&&t.iconItems.length>0}function c(t){return{isLoggedIn:t.isLoggedIn,$loggedIn:t.isLoggedIn?"loggedIn":"loggedOut",$direction:"rtl"===t.compProp.buttonsDirection?"rtl":"ltr",$dropdownDirection:"right"===t.compProp.dropDownTextAlignment?"right":"left",$iconsOnly:t.compData.loggedInMember,$noButtons:g(t)?"buttons":"noButtons"}}var u=o.linkRenderer,h={AVATAR:"avatarOnly",TEXT:"textOnly",BOTH:"avatarAndText"},m={LOGGED_IN:"loggedIn",LOGGED_IN_MENU_OPENED:"loggedInMenuOpened",LOGGED_OUT:"loggedOut"},f={32:"Space",13:"Enter",40:"ArrowDown"};return{displayName:"loginSocialBar",mixins:[i.compMixins.skinBasedComp,a.textScaleMixin,i.compMixins.createChildComponentMixin],propTypes:e.assign({compData:n.Types.Component.compData.isRequired,compProp:n.Types.Component.compProp.isRequired,isMobileView:n.Types.isMobileView.isRequired,rootNavigationInfo:n.Types.Component.rootNavigationInfo.isRequired,currentUrlPageId:n.Types.Component.currentUrlPageId,linkRenderInfo:n.Types.Link.linkRenderInfo.isRequired,componentPreviewState:n.Types.RenderFlags.componentPreviewState,componentViewMode:n.Types.RenderFlags.componentViewMode,logout:n.Types.SiteMembersSantaTypes.logout.isRequired,showAuthenticationDialog:n.Types.SiteMembersSantaTypes.showAuthenticationDialog.isRequired,serviceTopology:n.Types.ServiceTopology.serviceTopology.isRequired,isLoggedIn:n.Types.MemberLogin.isLoggedIn.isRequired,language:n.Types.MemberLogin.language.isRequired,memberName:n.Types.MemberLogin.memberName.isRequired,memberAvatar:n.Types.MemberLogin.memberAvatar,memberDefaultAvatar:n.Types.MemberLogin.memberDefaultAvatar,menuItems:n.Types.MemberLogin.menuItems,iconItems:n.Types.MemberLogin.iconItems,svgPropsForMemberLoginIconItems:n.Types.VectorImage.svgPropsForMemberLoginIconItems},n.santaTypesUtils.getSantaTypesByDefinition(l),n.santaTypesUtils.getSantaTypesByDefinition(d)),statics:{useSantaTypes:!0},getInitialState:function(){return e.assign(c(this.props),{isMenuOpen:!1})},createLoginSocialButtonComponent:function(t,i){var n=null,o=e.get(t,"iconRef.svgId");return o&&(n=e.get(this.props.svgPropsForMemberLoginIconItems,o,null)),this.createChildComponent(this.props.compData,"wysiwyg.viewer.components.LoginSocialButton","button",e.assign(e.clone(t),{ref:"button"+i,id:this.props.id+"button"+i,style:{width:this.props.compProp.iconSize,height:this.props.compProp.iconSize,marginRight:"rtl"===this.props.compProp.buttonsDirection?"auto":10,marginLeft:"rtl"===this.props.compProp.buttonsDirection?10:"auto"},linkRenderInfo:this.props.linkRenderInfo,rootNavigationInfo:this.props.rootNavigationInfo,iconSize:this.props.compProp.iconSize,buttonsDirection:this.props.compProp.buttonsDirection,svgProps:n}))},getButtonsToRender:function(){return g(this.props)?e.map(this.props.iconItems,this.createLoginSocialButtonComponent):null},toggleMenu:function(t){this.registerReLayout(),this.setState({isMenuOpen:t||!this.state.isMenuOpen})},onUserClick:function(){this.toggleMenu()},onDropdownMenuItemKeyDown:function(t){var i=void 0,n=t.target;if("ArrowDown"===t.key||"Tab"===t.key||"ArrowUp"===t.key){t.stopPropagation(),t.preventDefault();var a=0,l=(i=o.accessibility.getTabbaleElements(r.findDOMNode(this.refs.dropdownMenu))).indexOf(n);l>-1&&(a="ArrowUp"===t.key?l-1:l+1),a>=i.length?a=0:a<0&&(a=i.length-1);var d=i[a];d&&s(d).focus()}else if("Enter"===t.key)t.stopPropagation(),t.preventDefault(),e.invoke(n,"click");else if("Escape"===t.key){t.stopPropagation(),t.preventDefault(),this.toggleMenu(!1);var p=r.findDOMNode(this.refs.user);p&&p.focus()}},onUserKeyDown:function(t){if(this.state.isMenuOpen&&("Enter"===t.key||"Escape"===t.key||"ArrowUp"===t.key||32===t.keyCode))return t.stopPropagation(),t.preventDefault(),void this.toggleMenu(!1);if(f[t.keyCode])if(t.stopPropagation(),t.preventDefault(),this.state.isMenuOpen){var i=o.accessibility.getTabbaleElements(r.findDOMNode(this.refs.dropdownMenu));e.size(i)>0&&e.head(i).focus()}else this.toggleMenu(!0)},onBlur:function(t){if(this.state.isMenuOpen){if(!t.relatedTarget&&e.includes(e.get(window,"document.activeElement.id",""),this.props.id))return;t.relatedTarget&&e.includes(t.relatedTarget.id,this.props.id)||this.toggleMenu(!1)}},onLogout:function(t){if(this.getLogoutFunction){var i=this.getLogoutFunction(t);e.isFunction(i)&&i.call(this)}else this.setState({isMenuOpen:!1}),this.props.logout(this.props.language)},onLogin:function(t){if(this.getLoginFunction){var i=this.getLoginFunction(t);e.isFunction(i)&&i.call(this)}else this.setState({isMenuOpen:!1}),this.props.showAuthenticationDialog({language:this.props.language,appId:3})},getMenuItems:function(){var i=e.concat(this.props.menuItems||[],{label:this.props.compData.logOutText||"Log Out",onClick:this.onLogout}),n=function(t){switch(t.compProp.dropDownTextAlignment){case"left":return"rtl"===t.compProp.buttonsDirection?"row-reverse":"row";case"right":return"rtl"===t.compProp.buttonsDirection?"row":"row-reverse";default:return"row"}}(this.props),o=i.length-2,a=i.length-1;return e.map(i,function(i,r){var s={};return i.link?s=u.renderLink(i.link,this.props.linkRenderInfo,this.props.rootNavigationInfo):s.tabIndex=0,0===r&&(s["data-preview"]=this.props.componentPreviewState),i.isSelected&&(s["data-state"]="selected"),t.utils.createReactElement("li",{key:"item"+r,children:[t.utils.createReactElement("a",e.assign({children:[t.utils.createReactElement("div",{children:i.label,id:this.props.id+"menuItemDiv"+r,key:this.props.id+"menuItemDiv"+r}),e.isNumber(i.displayCount)?t.utils.createReactElement("div",{key:this.props.id+"displayCount"+r,children:"("+i.displayCount+")"}):null],ref:"menuItem"+r,id:this.props.id+"menuItem"+r,key:this.props.id+"menuItem"+r,"data-aid":"menuItem"+r,style:{flexDirection:n,marginTop:0===r?10:"initial",marginBottom:r===a?10:"initial"},onKeyDown:this.onDropdownMenuItemKeyDown},s)),r===o?t.utils.createReactElement("hr",{key:"separator"+r}):null],onClick:i.onClick||null})}.bind(this))},componentWillReceiveProps:function(t){var i=c(t);e.isEqual(this.props.componentPreviewState,t.componentPreviewState)?e.isEqual(this.props.componentViewMode,t.componentViewMode)?e.isEqual(this.props.currentUrlPageId,t.currentUrlPageId)||(i.isMenuOpen=!1):i.isMenuOpen=!1:e.includes(t.componentPreviewState,m.LOGGED_IN_MENU_OPENED)?i.isMenuOpen=!0:(!t.componentPreviewState||e.includes(t.componentPreviewState,m.LOGGED_IN)||e.includes(t.componentPreviewState,m.LOGGED_OUT))&&(i.isMenuOpen=!1),e.isMatch(this.state,i)||this.setState(i)},renderMemberAvatar:function(){var t=void 0,i=null;return this.props.memberAvatar?t={uri:this.props.memberAvatar,type:"Image"}:(t={svgId:this.props.memberDefaultAvatar,type:"VectorImage"},i=e.get(this.props.svgPropsForMemberLoginIconItems,this.props.memberDefaultAvatar,null)),this.createChildComponent(t,"wysiwyg.viewer.components.Icon","avatar",{ref:"avatar",id:this.props.id+"avatar",iconSize:this.props.compProp.iconSize,style:{width:this.props.compProp.iconSize,height:this.props.compProp.iconSize},svgProps:i})},getSkinProperties:function(){var i={"":{style:{direction:this.props.compProp.buttonsDirection||"ltr",justifyContent:function(t){switch(t.compProp.buttonsAlignment){case"left":return"rtl"===t.compProp.buttonsDirection?"flex-end":"flex-start";case"right":return"rtl"===t.compProp.buttonsDirection?"flex-start":"flex-end";case"center":return"center";default:return"flex-end"}}(this.props)},"aria-label":"Members bar","data-is-logged-in":this.state.isLoggedIn,onBlur:this.onBlur}},n=e.get(this.getFontSize(),"fontSize",null);return this.state.isLoggedIn?e.assign(i,{buttons:{children:this.getButtonsToRender(),style:{display:g(this.props)?null:"none"}},user:{onClick:this.onUserClick,onKeyDown:this.onUserKeyDown,"data-preview":this.props.componentPreviewState,"aria-label":this.props.memberName+" account menu"},icon:{children:this.renderMemberAvatar(),style:{display:p(this.props.compData)?null:"none"}},text:{children:t.utils.createReactElement("span",{children:this.props.memberName}),style:{display:function(t){return t.loggedInMember===h.TEXT||t.loggedInMember===h.BOTH}(this.props.compData)?null:"none",fontSize:n}},dropdownMenu:{children:t.utils.createReactElement("ul",{children:this.getMenuItems()}),style:{display:this.state.isMenuOpen?null:"none",fontSize:n}}}):(e.assign(i,{login:{children:[p(this.props.compData)?this.renderMemberAvatar():null,t.utils.createReactElement("span",{children:this.props.compData.loggedOutText||"Login | Sign up"})],onClick:this.onLogin,style:{fontSize:n},"data-preview":this.props.componentPreviewState}}),i[""]["aria-label"]="Login or Sign up"),i},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.LoginSocialBarSkin"}}}),define("loginSocialBar/skins/skins.json",[],function(){"use strict";var t={};return t["wysiwyg.viewer.skins.LoginSocialBarSkin"]={react:[["button","login",[],{}],["nav","buttons",[],{}],["button","user",[],{},["div","icon",[],{}],["div","text",[],{}],["div","arrow",[],{},["svg",null,[],{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8"},["path",null,[],{fillRule:"nonzero",d:"M1.707.293L.293 1.707l6 6a1 1 0 0 0 1.397.016l6-5.726L12.31.55 7.016 5.602 1.707.292z"}]]]],["nav","dropdownMenu",[],{}]],exports:{button:{skin:"wysiwyg.viewer.skins.LoginSocialButtonSkin"},avatar:{skin:"wysiwyg.viewer.skins.IconSkin"}},params:{bg:"BG_COLOR_ALPHA",brw:"BORDER_SIZE",brd:"BORDER_COLOR_ALPHA",rd:"BORDER_RADIUS",shd:"BOX_SHADOW","bg-dd":"BG_COLOR_ALPHA","brw-dd":"BORDER_SIZE","brd-dd":"BORDER_COLOR_ALPHA","rd-dd":"BORDER_RADIUS","shd-dd":"BOX_SHADOW",fnt:"FONT","fnt-size-dd":"TEXT_SIZE","txt-dd":"TEXT_COLOR","txt-slct-dd":"TEXT_COLOR","txth-dd":"TEXT_COLOR",txth:"TEXT_COLOR",txt:"TEXT_COLOR"},paramsDefaults:{bg:"transparent",brw:"0",brd:"color_15",rd:"0px",shd:"0 0 0 transparent","bg-dd":"color_11","brw-dd":"1px","brd-dd":"color_15","rd-dd":"0px","shd-dd":"0 0 0 transparent",fnt:"font_8","fnt-size-dd":"15px","txt-dd":"color_15","txt-slct-dd":"color_18","txth-dd":"color_14",txth:"color_17",txt:"color_18"},css:{"%":"display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;box-sizing:border-box;pointer-events:none;",'%[data-state~="loggedIn"]':"background-color:[bg];border:[brw] solid [brd];[rd]  [shd]",'%[data-state~="loggedIn"] %login':"display:none;",'%[data-state~="loggedIn"] %dropdownMenu':"z-index:99999;background-color:[bg-dd];border:[brw-dd] solid [brd-dd];box-sizing:border-box;[rd-dd]  [shd-dd]  [fnt]  font-size:[fnt-size-dd];position:absolute;min-width:100px;max-width:300px;",'%[data-state~="loggedIn"] %dropdownMenu a':"color:[txt-dd];padding-left:20px;padding-right:20px;display:-webkit-box;display:-webkit-flex;display:flex;line-height:260%;[rd-dd]    pointer-events:all;",'%[data-state~="loggedIn"] %dropdownMenu a[data-state~="selected"],%[data-state~="loggedIn"] %dropdownMenu a[data-preview~="selected"]':"color:[txt-slct-dd];",'%[data-state~="loggedIn"] %dropdownMenu a:hover,%[data-state~="loggedIn"] %dropdownMenu a[data-preview~="hover"]':"color:[txth-dd];",'%[data-state~="loggedIn"] %dropdownMenu a > div:first-child':"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;",'%[data-state~="loggedIn"] %dropdownMenu a > div:nth-child(2)':"opacity:0.6;",'%[data-state~="loggedIn"] %dropdownMenu hr':"margin:5px 20px 5px 20px;opacity:0.4;",'%[data-state~="loggedIn"] %user':"cursor:pointer;pointer-events:all;white-space:nowrap;padding-top:6px;padding-bottom:6px;",'%[data-state~="loggedIn"] %user:hover %text,%[data-state~="loggedIn"] %user[data-preview~="hover"] %text':"color:[txth];",'%[data-state~="loggedIn"] %user:hover %arrow path,%[data-state~="loggedIn"] %user[data-preview~="hover"] %arrow path':"fill:[txth];",'%[data-state~="loggedIn"] %icon':"display:inline-block;vertical-align:middle;",'%[data-state~="loggedIn"] %icon img':"border-radius:50%;",'%[data-state~="loggedIn"] %text':"color:[txt];[fnt]  display:inline-block;vertical-align:middle;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;min-width:60px;",'%[data-state~="loggedIn"] %arrow':"display:inline-block;vertical-align:middle;padding-left:14px;padding-right:14px;",'%[data-state~="loggedIn"] %arrow path':"fill:[txt];",'%[data-state~="loggedIn"] %buttons':"padding-top:6px;padding-bottom:6px;white-space:nowrap;",'%[data-state~="ltr"] %icon':"padding-right:14px;padding-left:initial;",'%[data-state~="ltr"] %buttons':"padding-left:14px;padding-right:initial;",'%[data-state~="ltr"] %login':"padding-right:14px;padding-left:initial;",'%[data-state~="ltr"][data-state~="avatarOnly"] %arrow':"padding-right:14px;padding-left:initial;",'%[data-state~="ltr"][data-state~="noButtons"] %icon':"padding-left:14px;",'%[data-state~="ltr"][data-state~="noButtons"][data-state~="textOnly"] %text':"padding-left:14px;padding-right:initial;",'%[data-state~="ltr"][data-state~="textOnly"] %login':"padding-left:14px;",'%[data-state~="rtl"] %icon':"padding-right:initial;padding-left:14px;",'%[data-state~="rtl"] %buttons':"padding-left:initial;padding-right:14px;",'%[data-state~="rtl"] %login':"padding-right:initial;padding-left:14px;",'%[data-state~="rtl"][data-state~="avatarOnly"] %arrow':"padding-right:initial;padding-left:14px;",'%[data-state~="rtl"][data-state~="noButtons"] %icon':"padding-right:14px;",'%[data-state~="rtl"][data-state~="noButtons"][data-state~="textOnly"] %text':"padding-right:14px;padding-left:initial;",'%[data-state~="rtl"][data-state~="textOnly"] %login':"padding-right:14px;",'%[data-state~="left"] %dropdownMenu a > div:nth-child(2)':"padding-left:12px;padding-right:initial;",'%[data-state~="right"] %dropdownMenu a > div:nth-child(2)':"padding-left:initial;padding-right:12px;",'%[data-state~="loggedOut"]':"background-color:[bg];border:[brw] solid [brd];[rd]  [shd]",'%[data-state~="loggedOut"] %user,%[data-state~="loggedOut"] %dropdownMenu,%[data-state~="loggedOut"] %buttons':"display:none;",'%[data-state~="loggedOut"] %login':"white-space:nowrap;padding-top:6px;padding-bottom:6px;color:[txt];[fnt]  [rd]  cursor:pointer;pointer-events:all;",'%[data-state~="loggedOut"] %login:hover,%[data-state~="loggedOut"] %login[data-preview~="hover"]':"color:[txth];",'%[data-state~="loggedOut"] %login span':"vertical-align:middle;",'%[data-state~="loggedOut"] %login %avatar':"display:inline-block;vertical-align:middle;padding-right:14px;padding-left:14px;"}},t["wysiwyg.viewer.skins.LoginSocialButtonSkin"]={react:[["a","link",[],{},["div","icon",[],{}],["div","text",[],{}],["div","badge",[],{}]]],exports:{icon:{skin:"wysiwyg.viewer.skins.IconSkin"}},params:{"badge-bg":"COLOR","badge-txt":"TEXT_COLOR"},paramsDefaults:{"badge-bg":"#E21C21","badge-txt":"color_11"},css:{"%":"position:relative;display:inline-block;","%icon":"border-radius:50%;","%badge":"background-color:[badge-bg];color:[badge-txt];border-radius:10px;position:absolute;top:0;text-align:center;height:18px;line-height:18px;letter-spacing:1px;","%badge span":"padding-left:6px;padding-right:6px;","% a":"display:block;pointer-events:all;"}},t}),define("loginSocialBar/components/loginSocialBarDataRequirementsChecker",["lodash","core","coreUtils","utils","components"],function(t,e,i,n,o){"use strict";function a(t,e){return l.createSvgFetchRequest(t.serviceTopology.mediaRootUrl,t,e)}function r(e,n,o,r){var s=[a(o,c)],l=t.get(r,e);t.forEach(l,function(e){var i=t.get(e,"iconRef.svgId");i&&s.push(a(o,i))});var d=p(t.get(r,["data","language"]));return!t.isString(d)&&t.isEmpty(d)||s.push.apply(s,_toConsumableArray(i.translationsLoader.getRequests(o,d,function(){return g(o,n,d)}))),t.compact(s)}var s=e.dataRequirementsChecker,l=n.svg,d=o.translationRequirementsChecker,p=d.fixLanguageCode,g=d.reportFailure,c="3d84bae5ad4d4d8a96de15e9f4b79a08.svg";s.registerCheckerForCompType("wysiwyg.viewer.components.LoginSocialBar",r.bind(null,"data.iconItemsRef.menuRef.items","wysiwyg.viewer.components.LoginSocialBar"));var u="wysiwyg.viewer.components.mobile.TinyMenu";return s.registerCheckerForCompType(u,r.bind(null,"data.loginSocialBarRef.iconItemsRef.menuRef.items",u)),{DEFAULT_AVATAR_ID:c}}),define("loginSocialBar",["lodash","loginSocialBar/components/loginSocialBar","loginSocialBar/components/loginSocialButton","core","skins","loginSocialBar/skins/skins.json","loginSocialBar/components/loginSocialBarDataRequirementsChecker"],function(t,e,i,n,o,a,r){"use strict";var s={loginSocialBar:e,loginSocialButton:i,loginSocialBarDataRequirementsChecker:r};return n.compRegistrar.register("wysiwyg.viewer.components.LoginSocialBar",s.loginSocialBar,!0).register("wysiwyg.viewer.components.LoginSocialButton",s.loginSocialButton,!0),o.skinsMap.addBatch(a),s});
//# sourceMappingURL=loginSocialBar.min.js.map
define("dataFixer/plugins/verticalMenuFixer",["lodash","coreUtils","skinExports"],function(e,t,n){"use strict";function a(t,n){return"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"===n.componentType&&!function(t,n){var a=i(t,n);return!e.isUndefined(a.menuItemHeight)}(t,n)}function i(e,t){return e.data.component_properties[t.propertyQuery.replace("#","")]}function r(a,r){var o=function(e,t){return e.data.document_data[t.dataQuery.replace("#","")]}(a,r),s=e.get(o,"menuRef","").replace("#",""),u=c[s],d=function(e,t){return e.data.theme_data[t.styleId]||l[t.styleId]}(a,r);if(d){var f=parseInt(d.style.properties.sepw||d.style.properties.separatorHeight||0,10),p=n[d.skin];!function(e,n,a){var r=i(e,n);a?r.menuItemHeight=a:t.log.error("cannot find menu items")}(a,r,t.verticalMenuCalculations.getItemHeight(r.layout.height,f,u,p))}else t.log.error("cannot find style")}function o(t,n){e.forEach(n,function(e){a(t,e)&&r(t,e),e.components&&o(t,e.components)})}function s(e){var t=e.structure;t&&(t.components&&o(e,t.components),t.mobileComponents&&o(e,t.mobileComponents),t.children&&o(e,t.children))}var u=!1,l={},c={},d=[];return{exec:function(t){if(function(e){return!!e.data.theme_data.THEME_DATA}(t))for(!function(e){l=e.data.theme_data}(t),function(t){var n=t.data.document_data,a=n.CUSTOM_MENUS&&n.CUSTOM_MENUS.menus||[];e.forEach(a,function(t){var a=t.replace("#",""),i=n[a]&&n[a].items||[],r=e.filter(i,function(e){return n[e.replace("#","")].isVisible}).length;c[a]=r||1})}(t),s(t),u=!0;d.length>0;)s(d.pop());else u?s(t):d.push(t)}}}),define("dataFixer/plugins/boxSlideShowDataFixer",["lodash","coreUtils"],function(e,t){"use strict";var n="BOXSLIDESHOW_Regular_Slideshow_Slides_New_Slide_Label";return{exec:function(a,i,r,o,s,u,l){var c=a.data.document_data;if("Template"===e.get(l,"siteInfo.documentType")){!function(a,i){if(e.includes(t.languages,i)){var r=t.translationsLoader.getTranslationAllKeys("boxSlideShow",i,{},{useOldTranslations:!0});r&&e.forOwn(a,function(e){if("boxSlideShowSlide"===e.type||"StripContainerSlideShowSlide"===e.type){var t=e.title?e.title.split(" ")[1]:"";e.title=r[n]&&t?r[n].replace("<%= curr_slide %>",t):e.title}})}}(c,r?t.wixUserApi.getLanguage(r.cookie,o,r.language):"en")}}}}),define("dataFixer/plugins/contactFormDataFixer",["lodash","coreUtils"],function(e,t){"use strict";var n=["addressFieldLabel","emailFieldLabel","errorMessage","messageFieldLabel","nameFieldLabel","phoneFieldLabel","subjectFieldLabel","submitButtonLabel","successMessage","validationErrorMessage"];return{exec:function(a,i,r,o,s,u,l){var c=a.data.document_data;if("Template"===e.get(l,"siteInfo.documentType")){!function(a,i){if(e.includes(t.languages,i)){var r=t.translationsLoader.getTranslationAllKeys("contactFormTranslations",i,{},{useOldTranslations:!0});r&&e.forOwn(a,function(t){"ContactForm"===t.type&&e.forEach(n,function(e){t[e]=r[e]||t[e]})})}}(c,t.wixUserApi.getLanguage(r.cookie,o,r.language)),function(t){e.forOwn(t,function(e){"ContactForm"===e.type&&(e.onSubmitBehavior||(e.onSubmitBehavior="message"))})}(c)}}}}),define("dataFixer/plugins/subscribeFormDataFixer",["lodash","coreUtils"],function(e,t){"use strict";var n=["emailFieldLabel","errorMessage","firstNameFieldLabel","lastNameFieldLabel","phoneFieldLabel","submitButtonLabel","subscribeFormTitle","successMessage","validationErrorMessage"];return{exec:function(a,i,r,o,s,u,l){var c=a.data.document_data;if(function(t){return"Template"===e.get(t,"siteInfo.documentType")}(l)){!function(a,i){if(e.includes(t.languages,i)){var r=t.translationsLoader.getTranslationAllKeys("subscribeFormTranslations",i,{},{useOldTranslations:!0});r&&e.forOwn(a,function(t){"SubscribeForm"===t.type&&e.forEach(n,function(e){t[e]=r[e]||t[e]})})}}(c,t.wixUserApi.getLanguage(r.cookie,o,r.language)),function(t){e.forOwn(t,function(e){"SubscribeForm"===e.type&&(e.onSubmitBehavior||(e.onSubmitBehavior="message"))})}(c)}}}}),define("dataFixer",["lodash","experiment","santa-data-fixer","dataFixer/plugins/verticalMenuFixer","dataFixer/plugins/boxSlideShowDataFixer","dataFixer/plugins/contactFormDataFixer","dataFixer/plugins/subscribeFormDataFixer"],function(e,t,n,a,i,r,o){"use strict";return e.assign({},n,{fix:function(s,u,l,c,d,f,p){var m=e(e.get(p,"runningExperiments",{})).pickBy(function(e,n){return t.isOpen(n,{rendererModel:p})}).keys().value(),g=e.get(p,"clientSpecMap"),b=e.get(p,"siteMetaData.quickActions.configuration.quickActionsMenuEnabled",!1);return s=n.fix({pageJson:s,clientSpecMap:g,urlFormatModel:d,quickActionsMenuEnabled:b,isViewerMode:f,experiments:m,pageIdsArray:u}),e.forEach([a,i,r,o],function(e){return e.exec(s,u,l,c,d,f,p)}),s}})});
//# sourceMappingURL=dataFixer.min.js.map
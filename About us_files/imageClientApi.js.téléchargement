!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.imageClientApi=e():t.imageClientApi=e()}(this,function(){return function(t){var e={};function i(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=12)}([function(t,e,i){"use strict";t.exports={alignTypes:{CENTER:"center",TOP:"top",TOP_LEFT:"top_left",TOP_RIGHT:"top_right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom_left",BOTTOM_RIGHT:"bottom_right",LEFT:"left",RIGHT:"right"},alignTypesMap:{center:"c",top:"t",top_left:"tl",top_right:"tr",bottom:"b",bottom_left:"bl",bottom_right:"br",left:"l",right:"r"},transformTypes:{FIT:"fit",FILL:"fill",FILL_FOCAL:"fill_focal",CROP:"crop",LEGACY_CROP:"legacy_crop",LEGACY_FILL:"legacy_fill"},fittingTypes:{SCALE_TO_FILL:"fill",SCALE_TO_FIT:"fit",STRETCH:"stretch",ORIGINAL_SIZE:"original_size",TILE:"tile",TILE_HORIZONTAL:"tile_horizontal",TILE_VERTICAL:"tile_vertical",FIT_AND_TILE:"fit_and_tile",LEGACY_STRIP_TILE:"legacy_strip_tile",LEGACY_STRIP_TILE_HORIZONTAL:"legacy_strip_tile_horizontal",LEGACY_STRIP_TILE_VERTICAL:"legacy_strip_tile_vertical",LEGACY_STRIP_SCALE_TO_FILL:"legacy_strip_fill",LEGACY_STRIP_SCALE_TO_FIT:"legacy_strip_fit",LEGACY_STRIP_FIT_AND_TILE:"legacy_strip_fit_and_tile",LEGACY_STRIP_ORIGINAL_SIZE:"legacy_strip_original_size",LEGACY_ORIGINAL_SIZE:"actual_size",LEGACY_FIT_WIDTH:"fitWidth",LEGACY_FIT_HEIGHT:"fitHeight",LEGACY_FULL:"full",LEGACY_BG_FIT_AND_TILE:"legacy_tile",LEGACY_BG_FIT_AND_TILE_HORIZONTAL:"legacy_tile_horizontal",LEGACY_BG_FIT_AND_TILE_VERTICAL:"legacy_tile_vertical",LEGACY_BG_NORMAL:"legacy_normal"},htmlTag:{BG:"bg",IMG:"img",SVG:"svg"},defaultUSM:{radius:.66,amount:1,threshold:.01},emptyData:{uri:"",css:{img:{},container:{}},attr:{img:{},container:{}}},imageQuality:{HIGH:"HIGH",MEDIUM:"MEDIUM",LOW:"LOW",TINY:"TINY"},imageQualityMap:{HIGH:{size:196e4,quality:90,maxUpscale:1},MEDIUM:{size:36e4,quality:85,maxUpscale:1},LOW:{size:16e4,quality:80,maxUpscale:1.2},TINY:{size:0,quality:80,maxUpscale:1.4}},fileType:{JPG:"jpg",JPEG:"jpeg",PNG:"png",WEBP:"webp",WIX_ICO_MP:"wix_ico_mp",WIX_MP:"wix_mp",GIF:"gif",SVG:"svg",UNRECOGNIZED:"unrecognized"},webp:{LOSSLESS:"lossless",LOSSY:"lossy",ALPHA:"alpha",ANIMATION:"animation"},API_VERSION:"v1"}},function(t,e,i){"use strict";var a=i(2),r=i(0),n=i(11);function s(t){var e=new window.Image;e.onload=function(){var i=n.getFeature("isWEBP");i[t]=e.width>0&&e.height>0,n.setFeature("isWEBP",i)},e.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[t]}function o(t){var e=[r.fileType.PNG,r.fileType.JPEG,r.fileType.JPG,r.fileType.WIX_ICO_MP,r.fileType.WIX_MP];return a.includes(e,T(t))}function c(t){return a.includes(["jpg","jpeg"],T(t))}function h(t){return a.includes(["png"],T(t))}function g(t){return a.includes(["webp"],T(t))}function p(t){return/(^https?)|(^data)|(^\/\/)/.test(t)}function T(t){return(/[.]([^.]+)$/.exec(t)&&/[.]([^.]+)$/.exec(t)[1]||"").toLowerCase()}function u(t,e,i,a){return Math.min(i/t,a/e)}function l(t,e,i,a){return Math.max(i/t,a/e)}function m(t,e,i,a,n){return n===r.transformTypes.FILL?l(t,e,i,a):n===r.transformTypes.FIT?u(t,e,i,a):1}function d(t){return t.pixelAspectRatio||1}function _(t,e){return r.imageQualityMap[A(t,e)].maxUpscale}function A(t,e){var i=t*e;return i>r.imageQualityMap[r.imageQuality.HIGH].size?r.imageQuality.HIGH:i>r.imageQualityMap[r.imageQuality.MEDIUM].size?r.imageQuality.MEDIUM:i>r.imageQualityMap[r.imageQuality.LOW].size?r.imageQuality.LOW:r.imageQuality.TINY}function f(t,e){var i=Math.pow(10,e||0);return(t*i/i).toFixed(parseInt(e,10))}t.exports={populateGlobalFeatureSupport:function(){"undefined"!=typeof window&&(s(r.webp.LOSSY),s(r.webp.ANIMATION),n.setFeature("isObjectFitBrowser","objectFit"in window.document.documentElement.style))},isWEBPBrowserSupport:function(t){var e=n.getFeature("isWEBP"),i=t===r.fileType.JPG&&e[r.webp.LOSSY],a=t===r.fileType.PNG&&e[r.webp.LOSSLESS],s=t===r.fileType.PNG&&e[r.webp.ALPHA];return i||a&&s},isObjectFitBrowserSupport:function(){return n.getFeature("isObjectFitBrowser")},isImageTransformApplicable:function(t){return o(t)&&!p(t)},isValidRequest:function(t,e,i){return i&&e&&!(!(n=e.id)||!n.trim()||"none"===n.toLowerCase())&&a.includes(r.fittingTypes,t);var n},isImageTypeSupported:o,isExternalUrl:p,isJPG:c,isPNG:h,isWEBP:g,getFileType:function(t){return c(t)?r.fileType.JPG:h(t)?r.fileType.PNG:g(t)?r.fileType.WEBP:r.fileType.UNRECOGNIZED},getFileExtension:T,getFileName:function(t){var e=t,i=/\/(.*?)$/.exec(t);return i&&i[1]&&(e=i[1]),e.replace(/\.[^.]*$/,"")},getAlignedRect:function(t,e,i){var a=void 0,n=void 0;switch(i){case r.alignTypes.CENTER:a=Math.max(0,(t.width-e.width)/2),n=Math.max(0,(t.height-e.height)/2);break;case r.alignTypes.TOP:a=Math.max(0,(t.width-e.width)/2),n=0;break;case r.alignTypes.TOP_LEFT:a=0,n=0;break;case r.alignTypes.TOP_RIGHT:a=Math.max(0,t.width-e.width),n=0;break;case r.alignTypes.BOTTOM:a=Math.max(0,(t.width-e.width)/2),n=Math.max(0,t.height-e.height);break;case r.alignTypes.BOTTOM_LEFT:a=0,n=Math.max(0,t.height-e.height);break;case r.alignTypes.BOTTOM_RIGHT:a=Math.max(0,t.width-e.width),n=Math.max(0,t.height-e.height);break;case r.alignTypes.LEFT:a=0,n=Math.max(0,(t.height-e.height)/2);break;case r.alignTypes.RIGHT:a=Math.max(0,t.width-e.width),n=Math.max(0,(t.height-e.height)/2)}return{x:t.x?t.x+a:a,y:t.y?t.y+n:n,width:Math.min(t.width,e.width),height:Math.min(t.height,e.height)}},getOverlappingRect:function(t,e){var i=Math.max(0,Math.min(t.width,e.x+e.width)-Math.max(0,e.x)),a=Math.max(0,Math.min(t.height,e.y+e.height)-Math.max(0,e.y));return i&&a&&(t.width!==i||t.height!==a)?{x:Math.max(0,e.x),y:Math.max(0,e.y),width:i,height:a}:null},getFitScaleFactor:u,getFillScaleFactor:l,getScaleFactor:m,getCalculatedTransformedData:function(t,e,i,a){var n=d(i),s={width:0,height:0,scaleFactor:0,cssUpscaleNeeded:!1},o=m(t,e,i.width*n,i.height*n,a),c=_(t,e);if(o>c){switch(a){case r.transformTypes.FILL:s.width=i.width*n*(c/o),s.height=i.height*n*(c/o);break;case r.transformTypes.FIT:s.width=t*c,s.height=e*c}s.scaleFactor=c,s.cssUpscaleNeeded=!0}else{switch(a){case r.transformTypes.FILL:s.width=i.width*n,s.height=i.height*n;break;case r.transformTypes.FIT:s.width=t*o,s.height=e*o}s.scaleFactor=o,s.cssUpscaleNeeded=!1}return s},getPixelAspectRatio:d,getAlignment:function(t){return r.alignTypesMap[t.alignment]||r.alignTypesMap[r.alignTypes.CENTER]},getPreferredImageQuality:function(t,e){return r.imageQualityMap[A(t,e)].quality},getPreferredUpscaleFactor:_,getDimension:function(t,e,i,a,r){var n=m(t,e,i,a,r);return{width:Math.round(t*n),height:Math.round(e*n)}},getFocalPoint:function(t){var e=null;return"number"==typeof t.x&&"number"==typeof t.y&&(e={x:f(Math.max(0,Math.min(100,t.x))/100,2),y:f(Math.max(0,Math.min(100,t.y))/100,2)}),e},roundToFixed:f}},function(t,e,i){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={assign:function(){for(var t=arguments[0]||{},e=Array.prototype.slice.call(arguments,1,arguments.length),i=0;i<e.length;i++){var a=e[i];for(var r in a)a.hasOwnProperty(r)&&(t[r]=a[r])}return t},includes:function(t,e){return t.indexOf?t.indexOf(e)>-1:!(!t||"object"!==(void 0===t?"undefined":a(t)))&&Object.keys(t).some(function(i){return t[i]===e})},last:function(t){return t[t.length-1]},template:function(t){return function(e){var i=t;for(var a in e)e.hasOwnProperty(a)&&(i=i.replace(new RegExp("\\$\\{"+a+"\\}","g"),e[a]));return i}}}},function(t,e,i){"use strict";var a=i(2),r=i(0),n=i(1);t.exports={get:function(t,e){var i={css:{container:{},img:{}}},s=i.css,o=t.fittingType,c=r.fittingTypes,h=e.alignment,g=r.alignTypes,p=void 0,T=void 0;t.parts&&t.parts.length?(p=t.parts[0].width,T=t.parts[0].height):(p=t.src.width,T=t.src.height);var u=void 0;switch(s.img.display="block",s.container.position="relative",s.img.position="absolute",s.img.top="auto",s.img.right="auto",s.img.bottom="auto",s.img.left="auto",o){case c.ORIGINAL_SIZE:case c.LEGACY_ORIGINAL_SIZE:s.img.width=p,s.img.height=T;break;case c.SCALE_TO_FIT:case c.LEGACY_FIT_WIDTH:case c.LEGACY_FIT_HEIGHT:case c.LEGACY_FULL:u=n.getDimension(p,T,e.width,e.height,r.transformTypes.FIT),a.assign(s.img,u);break;case c.STRETCH:s.img.width=e.width,s.img.height=e.height;break;case c.SCALE_TO_FILL:var l=t.src.id;n.isImageTypeSupported(l)||n.isExternalUrl(l)?(s.img.width=e.width,s.img.height=e.height):(u=n.getDimension(p,T,e.width,e.height,r.transformTypes.FILL),a.assign(s.img,u),s.container.overflow="hidden")}if(s.img.width!==e.width||s.img.height!==e.height){var m=Math.round((e.height-s.img.height)/2),d=Math.round((e.width-s.img.width)/2);switch(h){default:case g.CENTER:s.img.top=m,s.img.left=d;break;case g.LEFT:s.img.left=0,s.img.top=m;break;case g.RIGHT:s.img.right=0,s.img.top=m;break;case g.TOP:s.img.left=d,s.img.top=0;break;case g.BOTTOM:s.img.left=d,s.img.bottom=0;break;case g.TOP_RIGHT:s.img.right=0,s.img.top=0;break;case g.TOP_LEFT:s.img.left=0,s.img.top=0;break;case g.BOTTOM_RIGHT:s.img.right=0,s.img.bottom=0;break;case g.BOTTOM_LEFT:s.img.left=0,s.img.bottom=0}}return i}}},function(t,e,i){"use strict";var a=i(0),r=i(1);t.exports={get:function(t,e){var i={css:{container:{}},attr:{container:{},img:{}}},n=i.css,s=i.attr,o=t.fittingType,c=a.fittingTypes,h=e.alignment,g=a.alignTypes,p=t.src.width,T=t.src.height,u=void 0;switch(n.container.position="relative",o){case c.ORIGINAL_SIZE:case c.LEGACY_ORIGINAL_SIZE:case c.TILE:t.parts&&t.parts.length?(s.img.width=t.parts[0].width,s.img.height=t.parts[0].height):(s.img.width=p,s.img.height=T),s.img.preserveAspectRatio="xMidYMid slice";break;case c.SCALE_TO_FIT:case c.LEGACY_FIT_WIDTH:case c.LEGACY_FIT_HEIGHT:case c.LEGACY_FULL:s.img.width="100%",s.img.height="100%",s.img.transform="",s.img.preserveAspectRatio="";break;case c.STRETCH:s.img.width=e.width,s.img.height=e.height,s.img.x=0,s.img.y=0,s.img.transform="",s.img.preserveAspectRatio="none";break;case c.SCALE_TO_FILL:r.isImageTransformApplicable(t.src.id)?(s.img.width=e.width,s.img.height=e.height):(u=r.getDimension(p,T,e.width,e.height,a.transformTypes.FILL),s.img.width=u.width,s.img.height=u.height),s.img.x=0,s.img.y=0,s.img.transform="",s.img.preserveAspectRatio="xMidYMid slice"}if(s.img.width!==e.width||s.img.height!==e.height){var l=0,m=0,d=void 0,_=void 0;o===c.TILE?(d=e.width%s.img.width,_=e.height%s.img.height):(d=e.width-s.img.width,_=e.height-s.img.height);var A=Math.round(d/2),f=Math.round(_/2);switch(h){case g.TOP_LEFT:l=0,m=0;break;case g.TOP:l=A,m=0;break;case g.TOP_RIGHT:l=d,m=0;break;case g.LEFT:l=0,m=f;break;case g.CENTER:l=A,m=f;break;case g.RIGHT:l=d,m=f;break;case g.BOTTOM_LEFT:l=0,m=_;break;case g.BOTTOM:l=A,m=_;break;case g.BOTTOM_RIGHT:l=d,m=_}s.img.x=l,s.img.y=m}return s.container.width=e.width,s.container.height=e.height,s.container.viewBox=[0,0,e.width,e.height].join(" "),i}}},function(t,e,i){"use strict";var a=i(0);t.exports={get:function(t,e){var i={css:{container:{},img:{}}},r=i.css,n=t.fittingType,s=e.alignment,o=a.fittingTypes,c=a.alignTypes;switch(r.container.position="relative",n){case o.ORIGINAL_SIZE:case o.LEGACY_ORIGINAL_SIZE:t.parts&&t.parts.length?(r.img.width=t.parts[0].width,r.img.height=t.parts[0].height):(r.img.width=t.src.width,r.img.height=t.src.height);break;case o.SCALE_TO_FIT:case o.LEGACY_FIT_WIDTH:case o.LEGACY_FIT_HEIGHT:case o.LEGACY_FULL:r.img.width=e.width,r.img.height=e.height,r.img.objectFit="contain";break;case o.STRETCH:r.img.width=e.width,r.img.height=e.height,r.img.objectFit="fill";break;case o.SCALE_TO_FILL:r.img.width=e.width,r.img.height=e.height,r.img.objectFit="cover"}if(r.img.width!==e.width||r.img.height!==e.height){var h=Math.round((e.height-r.img.height)/2),g=Math.round((e.width-r.img.width)/2);switch(r.img.position="absolute",r.img.top="auto",r.img.right="auto",r.img.bottom="auto",r.img.left="auto",s){default:case c.CENTER:r.img.width=e.width,r.img.height=e.height,r.img.objectFit="none";break;case c.LEFT:r.img.left=0,r.img.top=h;break;case c.RIGHT:r.img.right=0,r.img.top=h;break;case c.TOP:r.img.left=g,r.img.top=0;break;case c.BOTTOM:r.img.left=g,r.img.bottom=0;break;case c.TOP_RIGHT:r.img.right=0,r.img.top=0;break;case c.TOP_LEFT:r.img.left=0,r.img.top=0;break;case c.BOTTOM_RIGHT:r.img.right=0,r.img.bottom=0;break;case c.BOTTOM_LEFT:r.img.left=0,r.img.bottom=0}}return i}}},function(t,e,i){"use strict";var a=i(0);t.exports={get:function(t,e){var i={css:{container:{}}},r=i.css,n=a.alignTypes,s=t.fittingType,o=a.fittingTypes;switch(s){case o.ORIGINAL_SIZE:case o.LEGACY_ORIGINAL_SIZE:case o.LEGACY_STRIP_ORIGINAL_SIZE:r.container.backgroundSize="auto",r.container.backgroundRepeat="no-repeat";break;case o.SCALE_TO_FIT:case o.LEGACY_STRIP_SCALE_TO_FIT:r.container.backgroundSize="contain",r.container.backgroundRepeat="no-repeat";break;case o.STRETCH:r.container.backgroundSize="100% 100%",r.container.backgroundRepeat="no-repeat";break;case o.SCALE_TO_FILL:case o.LEGACY_STRIP_SCALE_TO_FILL:r.container.backgroundSize="cover",r.container.backgroundRepeat="no-repeat";break;case o.TILE_HORIZONTAL:case o.LEGACY_STRIP_TILE_HORIZONTAL:r.container.backgroundSize="auto",r.container.backgroundRepeat="repeat-x";break;case o.TILE_VERTICAL:case o.LEGACY_STRIP_TILE_VERTICAL:r.container.backgroundSize="auto",r.container.backgroundRepeat="repeat-y";break;case o.TILE:case o.LEGACY_STRIP_TILE:r.container.backgroundSize="auto",r.container.backgroundRepeat="repeat";break;case o.FIT_AND_TILE:case o.LEGACY_STRIP_FIT_AND_TILE:r.container.backgroundSize="contain",r.container.backgroundRepeat="repeat";break;case o.LEGACY_BG_FIT_AND_TILE:r.container.backgroundSize="auto",r.container.backgroundRepeat="repeat";break;case o.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:r.container.backgroundSize="auto",r.container.backgroundRepeat="repeat-x";break;case o.LEGACY_BG_FIT_AND_TILE_VERTICAL:r.container.backgroundSize="auto",r.container.backgroundRepeat="repeat-y";break;case o.LEGACY_BG_NORMAL:r.container.backgroundSize="auto",r.container.backgroundRepeat="no-repeat"}switch(e.alignment){case n.CENTER:r.container.backgroundPosition="center center";break;case n.LEFT:r.container.backgroundPosition="left center";break;case n.RIGHT:r.container.backgroundPosition="right center";break;case n.TOP:r.container.backgroundPosition="center top";break;case n.BOTTOM:r.container.backgroundPosition="center bottom";break;case n.TOP_RIGHT:r.container.backgroundPosition="right top";break;case n.TOP_LEFT:r.container.backgroundPosition="left top";break;case n.BOTTOM_RIGHT:r.container.backgroundPosition="right bottom";break;case n.BOTTOM_LEFT:r.container.backgroundPosition="left bottom"}return i}}},function(t,e,i){"use strict";var a=i(0),r=i(1),n=i(6),s=i(5),o=i(4),c=i(3);t.exports={getAttributes:function(t,e){return(e.htmlTag===a.htmlTag.BG?n:e.htmlTag===a.htmlTag.SVG?o:r.isObjectFitBrowserSupport()?s:c).get(t,e)}}},function(t,e,i){"use strict";var a=i(2),r=i(0),n=a.template("fit/w_${width},h_${height}"),s=a.template("fill/w_${width},h_${height},al_${alignment}"),o=a.template("fill/w_${width},h_${height},fp_${focalPointX}_${focalPointY}"),c=a.template("crop/x_${x},y_${y},w_${width},h_${height}"),h=a.template("crop/w_${width},h_${height},al_${alignment}"),g=a.template("fill/w_${width},h_${height},al_${alignment}"),p=a.template(",lg_1"),T=a.template(",q_${quality}"),u=a.template(",usm_${radius}_${amount}_${threshold}"),l=a.template(",bl"),m=a.template(",wm_${watermark}");t.exports={getImageURI:function(t){var e=[];t.parts.forEach(function(t){switch(t.transformType){case r.transformTypes.CROP:e.push(c(t));break;case r.transformTypes.LEGACY_CROP:e.push(h(t));break;case r.transformTypes.LEGACY_FILL:var i=g(t);t.upscale&&(i+=p(t)),e.push(i);break;case r.transformTypes.FIT:var a=n(t);t.upscale&&(a+=p(t)),e.push(a);break;case r.transformTypes.FILL:var T=s(t);t.upscale&&(T+=p(t)),e.push(T);break;case r.transformTypes.FILL_FOCAL:var u=o(t);t.upscale&&(u+=p(t)),e.push(u)}});var i=e.join("/");return(t.fileType===r.fileType.PNG&&t.isWEBPSupport||t.fileType===r.fileType.JPG)&&(i+=T(t)),t.unsharpMask&&(i+=u(t.unsharpMask)),t.progressive||(i+=l(t)),t.watermark&&(i+=m(t)),t.src.id+"/"+r.API_VERSION+"/"+i+"/"+t.fileName+"."+(t.isWEBPSupport?"webp":t.fileExtension)}}},function(t,e,i){"use strict";var a=i(2),r=i(0),n=i(1);t.exports={setTransformOptions:function(t,e){e=e||{},t.quality=function(t,e){var i=a.last(t.parts),r=n.getPreferredImageQuality(i.width,i.height),s=e.quality&&e.quality>=5&&e.quality<=90?e.quality:r;return parseInt(s,10)}(t,e),t.unsharpMask=function(t,e){var i=void 0;return!function(t){var e=void 0!==(t=t||{}).radius&&t.radius>=.1&&t.radius<=500,i=void 0!==t.amount&&t.amount>=0&&t.amount<=10,a=void 0!==t.threshold&&t.threshold>=0&&t.threshold<=255;return e&&i&&a}(e.unsharpMask)?function(t){return void 0!==(t=t||{}).radius&&0===t.radius&&void 0!==t.amount&&0===t.amount&&void 0!==t.threshold&&0===t.threshold}(e.unsharpMask)||function(t){var e=a.last(t.parts);return!(e.scaleFactor>=1)||e.forceUSM}(t)&&(i=r.defaultUSM):i={radius:e.unsharpMask.radius,amount:e.unsharpMask.amount,threshold:e.unsharpMask.threshold},i&&(i.radius=n.roundToFixed(i.radius,2),i.amount=n.roundToFixed(i.amount,2),i.threshold=n.roundToFixed(i.threshold,2)),i}(t,e),t.progressive=function(t){return!1!==t.progressive}(e),t.watermark=function(t){return t.watermark}(e)}}},function(t,e,i){"use strict";var a=i(2),r=i(0),n=i(1);function s(t,e){var i=n.getCalculatedTransformedData(t.src.width,t.src.height,e,r.transformTypes.FIT);return{transformType:r.transformTypes.FILL,width:Math.round(i.width),height:Math.round(i.height),alignment:r.alignTypesMap.center,upscale:i.scaleFactor>1,forceUSM:!1,scaleFactor:i.scaleFactor,cssUpscaleNeeded:i.cssUpscaleNeeded}}function o(t){return{transformType:r.transformTypes.CROP,x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}t.exports={setTransformParts:function(t,e,i){var c=void 0;switch(e.crop&&(c=n.getOverlappingRect(e,e.crop))&&(t.src.width=c.width,t.src.height=c.height,t.src.cropped=!0,t.parts.push(o(c))),t.fittingType){case r.fittingTypes.SCALE_TO_FIT:case r.fittingTypes.LEGACY_FIT_WIDTH:case r.fittingTypes.LEGACY_FIT_HEIGHT:case r.fittingTypes.LEGACY_FULL:case r.fittingTypes.FIT_AND_TILE:case r.fittingTypes.LEGACY_BG_FIT_AND_TILE:case r.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case r.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL:case r.fittingTypes.LEGACY_BG_NORMAL:t.parts.push(s(t,i));break;case r.fittingTypes.SCALE_TO_FILL:t.parts.push(function(t,e){var i=n.getCalculatedTransformedData(t.src.width,t.src.height,e,r.transformTypes.FILL),a=n.getFocalPoint(t.focalPoint);return{transformType:a?r.transformTypes.FILL_FOCAL:r.transformTypes.FILL,width:Math.round(i.width),height:Math.round(i.height),alignment:n.getAlignment(e),focalPointX:a&&a.x,focalPointY:a&&a.y,upscale:i.scaleFactor>1,forceUSM:!1,scaleFactor:i.scaleFactor,cssUpscaleNeeded:i.cssUpscaleNeeded}}(t,i));break;case r.fittingTypes.STRETCH:t.parts.push(function(t,e){var i=n.getScaleFactor(t.src.width,t.src.height,e.width,e.height,r.transformTypes.FILL),o=a.assign({},e);return o.width=t.src.width*i,o.height=t.src.height*i,s(t,o)}(t,i));break;case r.fittingTypes.TILE_HORIZONTAL:case r.fittingTypes.TILE_VERTICAL:case r.fittingTypes.TILE:case r.fittingTypes.LEGACY_ORIGINAL_SIZE:case r.fittingTypes.ORIGINAL_SIZE:c=n.getAlignedRect(t.src,i,i.alignment),t.src.isCropped?(a.assign(t.parts[0],c),t.src.width=c.width,t.src.height=c.height):t.parts.push(o(c));break;case r.fittingTypes.LEGACY_STRIP_TILE_HORIZONTAL:case r.fittingTypes.LEGACY_STRIP_TILE_VERTICAL:case r.fittingTypes.LEGACY_STRIP_TILE:case r.fittingTypes.LEGACY_STRIP_ORIGINAL_SIZE:t.parts.push(function(t){return{transformType:r.transformTypes.LEGACY_CROP,width:Math.round(t.width),height:Math.round(t.height),alignment:n.getAlignment(t),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}(i));break;case r.fittingTypes.LEGACY_STRIP_SCALE_TO_FIT:case r.fittingTypes.LEGACY_STRIP_FIT_AND_TILE:t.parts.push(function(t){return{transformType:r.transformTypes.FIT,width:Math.round(t.width),height:Math.round(t.height),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(i));break;case r.fittingTypes.LEGACY_STRIP_SCALE_TO_FILL:t.parts.push(function(t){return{transformType:r.transformTypes.LEGACY_FILL,width:Math.round(t.width),height:Math.round(t.height),alignment:n.getAlignment(t),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(i))}}}},function(t,e,i){"use strict";var a={isWEBP:{lossless:!1,lossy:!1,alpha:!1,animation:!1},isObjectFitBrowser:!1};t.exports={getFeature:function(t){return a[t]},setFeature:function(t,e){a[t]=e}}},function(t,e,i){"use strict";var a=i(2),r=i(0),n=i(1),s=i(10),o=i(9),c=i(8),h=i(7);t.exports={populateGlobalFeatureSupport:n.populateGlobalFeatureSupport,getData:function(t,e,i,g){var p={},T=n.getFileType(e.id),u={fileName:n.getFileName(e.id),fileExtension:n.getFileExtension(e.id),fileType:T,isWEBPSupport:n.isWEBPBrowserSupport(T),fittingType:t,src:{id:e.id,width:e.width,height:e.height,isCropped:!1},focalPoint:{x:e.focalPoint&&e.focalPoint.x,y:e.focalPoint&&e.focalPoint.y},quality:0,progressive:!0,unsharpMask:{},watermark:"",parts:[]};return n.isValidRequest(t,e,i)?(n.isImageTransformApplicable(e.id)?(s.setTransformParts(u,e,i),o.setTransformOptions(u,g),p.uri=c.getImageURI(u)):p.uri=e.id,a.assign(p,h.getAttributes(u,i))):p=r.emptyData,p},fittingTypes:r.fittingTypes,alignTypes:r.alignTypes,htmlTag:r.htmlTag}}])});
//# sourceMappingURL=imageClientApi.js.map